[{"url": "https://api.github.com/repos/ktbyers/netmiko/issues/3165", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/3165/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/3165/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/3165/events", "html_url": "https://github.com/ktbyers/netmiko/issues/3165", "id": 1667555627, "node_id": "I_kwDOAaBOds5jZOEr", "number": 3165, "title": "Huawei telnet login doesn't handle re grouping properly", "user": {"login": "hgqcs", "id": 22882104, "node_id": "MDQ6VXNlcjIyODgyMTA0", "avatar_url": "https://avatars.githubusercontent.com/u/22882104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hgqcs", "html_url": "https://github.com/hgqcs", "followers_url": "https://api.github.com/users/hgqcs/followers", "following_url": "https://api.github.com/users/hgqcs/following{/other_user}", "gists_url": "https://api.github.com/users/hgqcs/gists{/gist_id}", "starred_url": "https://api.github.com/users/hgqcs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hgqcs/subscriptions", "organizations_url": "https://api.github.com/users/hgqcs/orgs", "repos_url": "https://api.github.com/users/hgqcs/repos", "events_url": "https://api.github.com/users/hgqcs/events{/privacy}", "received_events_url": "https://api.github.com/users/hgqcs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-04-14T05:56:41Z", "updated_at": "2023-04-20T03:06:43Z", "closed_at": "2023-04-20T03:06:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi ktbyers:\r\n     I try login huawei device,netmiko  auto send username and password, device response:\r\n\r\n```\r\n ':\r\nInfo: The max number of VTY users is 5, the number of current VTY users online is 1, and total number of terminal users online is 1.\r\n      The current login time is 2023-04-14 10:53:30.\r\n<HUWWEI-DEVICE>'\r\n```\r\n\r\n but netmiko raise en error, i look for source code, found it re rule's '(>\\s*$|]\\s*$|(Change now|Please choose 'YES' or 'NO').+)' and the length of re.split() method is 4, not 3,so it raise error. \r\n     re pattern include meta code with \r\n\r\n```\r\n()\r\n```\r\n\r\n it should add\r\n\r\n```\r\n\\\r\n```\r\n did you think so ?\r\n\r\nnetmiko version: 4.1.2\r\nsource re rule: (>\\s*$|]\\s*$|(Change now|Please choose 'YES' or 'NO').+)\r\nsuccess login and respose: ':\\nInfo: The max number of VTY users is 5, the number of current VTY users online is 1, and total number of terminal users online is 1.\\n      The current login time is 2023-04-14 09:43:39.\\n<HUWWEI-DEVICE>'\r\nre.split's length: 4\r\ntest rule:     combined_pattern = r\"({}|{}|{})\".format(\r\n        pri_prompt_terminator, alt_prompt_terminator, re.escape(password_change_prompt)\r\n    )\r\nthe device list:\r\nmodel                         system version\r\nCE6865-48S8CQ-EI     Version 8.180\r\nNetEngine 8000          Version 8.191\r\nS12700                        Version 5.170\r\nS9700                          Version 5.160\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/3165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/3165/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/3017", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/3017/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/3017/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/3017/events", "html_url": "https://github.com/ktbyers/netmiko/issues/3017", "id": 1433730867, "node_id": "I_kwDOAaBOds5VdP8z", "number": 3017, "title": "ssh_dispatcher.py ConnLogOnly() throwing exception", "user": {"login": "windmite", "id": 53015777, "node_id": "MDQ6VXNlcjUzMDE1Nzc3", "avatar_url": "https://avatars.githubusercontent.com/u/53015777?v=4", "gravatar_id": "", "url": "https://api.github.com/users/windmite", "html_url": "https://github.com/windmite", "followers_url": "https://api.github.com/users/windmite/followers", "following_url": "https://api.github.com/users/windmite/following{/other_user}", "gists_url": "https://api.github.com/users/windmite/gists{/gist_id}", "starred_url": "https://api.github.com/users/windmite/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/windmite/subscriptions", "organizations_url": "https://api.github.com/users/windmite/orgs", "repos_url": "https://api.github.com/users/windmite/repos", "events_url": "https://api.github.com/users/windmite/events{/privacy}", "received_events_url": "https://api.github.com/users/windmite/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-11-02T20:17:09Z", "updated_at": "2022-12-15T03:51:20Z", "closed_at": "2022-12-15T03:51:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "ssh_dispatcher.py lines 414-421\r\n\r\n```\r\nexcept NetmikoTimeoutException as e:\r\n        if \"DNS failure\" in str(e):\r\n            msg = f\"Device failed due to a DNS failure, hostname {hostname}\"\r\n        elif \"TCP connection to device failed\" in str(e):\r\n            msg = f\"Netmiko was unable to reach the provided host and port: {hostname}:{port}\"\r\n            msg += f\"\\n\\n{str(e)}\"\r\n        logger.error(msg)\r\n        return None\r\n```\r\n\r\nUnfortunately I wasn't able to capture the string that brought me to this bug (and it was a timeout error I've only gotten a couple times so difficult to reproduce, I've added some code to grab it if it every happens again) but I'm assuming this needs to be something like:\r\n\r\n```\r\nexcept NetmikoTimeoutException as e:\r\n        if \"DNS failure\" in str(e):\r\n            msg = f\"Device failed due to a DNS failure, hostname {hostname}\"\r\n        elif \"TCP connection to device failed\" in str(e):\r\n            msg = f\"Netmiko was unable to reach the provided host and port: {hostname}:{port}\"\r\n            msg += f\"\\n\\n{str(e)}\"\r\n        else:\r\n            msg = f\"Unknown Timeout Error device timed-out: {hostname}:{port}\"\r\n            msg += f\"\\n\\n{str(e)}\"\r\n        logger.error(msg)\r\n```\r\n\r\nI was getting 'msg' referenced before assignment because presumably neither of those strings was in str(e)  Big fan of ConnLogOnly() by the way. ", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/3017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/3017/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2874", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2874/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2874/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2874/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2874", "id": 1320756211, "node_id": "I_kwDOAaBOds5OuSPz", "number": 2874, "title": "`send_config_set` no longer works with generators", "user": {"login": "cbay", "id": 725049, "node_id": "MDQ6VXNlcjcyNTA0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/725049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbay", "html_url": "https://github.com/cbay", "followers_url": "https://api.github.com/users/cbay/followers", "following_url": "https://api.github.com/users/cbay/following{/other_user}", "gists_url": "https://api.github.com/users/cbay/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbay/subscriptions", "organizations_url": "https://api.github.com/users/cbay/orgs", "repos_url": "https://api.github.com/users/cbay/repos", "events_url": "https://api.github.com/users/cbay/events{/privacy}", "received_events_url": "https://api.github.com/users/cbay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-07-28T10:55:34Z", "updated_at": "2022-08-08T18:46:23Z", "closed_at": "2022-08-08T18:46:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Starting with bc8fc448bb76a57cb18f61c663c4d7aeb8c037ef, `send_config_set` no longer works when `config_commands` is a generator as `bypass_commands` (which is automatically set by default) will consume the generator, and the rest of the method will have an \"empty\" `config_commands`.\r\n\r\nThat breaks [Napalm](https://github.com/napalm-automation/napalm/blob/develop/napalm/nxos_ssh/nxos_ssh.py#L473), for instance.", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2874/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2866", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2866/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2866/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2866/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2866", "id": 1312996724, "node_id": "I_kwDOAaBOds5OQr10", "number": 2866, "title": "Linux SSH / OpenGear read_until_prompt fails to detect enable mode when prompt is only single character", "user": {"login": "mirceaulinic", "id": 16694679, "node_id": "MDQ6VXNlcjE2Njk0Njc5", "avatar_url": "https://avatars.githubusercontent.com/u/16694679?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mirceaulinic", "html_url": "https://github.com/mirceaulinic", "followers_url": "https://api.github.com/users/mirceaulinic/followers", "following_url": "https://api.github.com/users/mirceaulinic/following{/other_user}", "gists_url": "https://api.github.com/users/mirceaulinic/gists{/gist_id}", "starred_url": "https://api.github.com/users/mirceaulinic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mirceaulinic/subscriptions", "organizations_url": "https://api.github.com/users/mirceaulinic/orgs", "repos_url": "https://api.github.com/users/mirceaulinic/repos", "events_url": "https://api.github.com/users/mirceaulinic/events{/privacy}", "received_events_url": "https://api.github.com/users/mirceaulinic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-07-21T09:57:59Z", "updated_at": "2022-08-08T21:37:44Z", "closed_at": "2022-08-08T21:37:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Steps to reproduce:\r\n\r\n1. Initialise a connection with an OpenGear device, using the Linux SSH driver:\r\n\r\n```python\r\n>>> from netmiko import ConnectHandler\r\n>>> device = ConnectHandler(device_type=\"linux\", host=\"some-opengear\", username=\"root\", password=\"pass\", secret=\"pass\", fast_cli=False)\r\n```\r\n\r\n2. Attempt to enter in enable mode:\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.9/site-packages/netmiko/linux/linux_ssh.py\", line 150, in enable\r\n    raise ValueError(msg)\r\nValueError: \r\n\r\nNetmiko failed to elevate privileges.\r\n\r\nPlease ensure you pass the sudo password into ConnectHandler\r\nusing the 'secret' argument and that the user has sudo\r\npermissions.\r\n```\r\n\r\nThe previous command does send the `sudo -s` command as it should, the device returns a line containing the `#` as expected, but it fails on `check_enable_mode`.\r\n\r\nAfter digging deeper, it seems like the issue is caused by the `read_until_prompt` method that is misbehaving. To reproduce, use the `device` defined previously:\r\n\r\n```python\r\n>>> device.write_channel(device.RETURN)\r\n>>> output = device.read_channel()\r\n>>> results = re.split(\"(.*)\", output, maxsplit=1, flags=re.I)\r\n>>> output, match_str, buffer = results\r\n>>> output\r\n''\r\n>>> match_str\r\n''\r\n>>> output + match_str\r\n''\r\n>>> buffer\r\n'\\n# \\n# \\n# '\r\n>>> \r\n```\r\n\r\nCan notice that it sends the return, it reads the prompt correctly, but the regular expression split renders `output + match_str` to be an empty string. As a result, `check_enable_mode` will never find the `#` prompt in the empty string, and therefore `check_enable_mode` will always return `False` in https://github.com/ktbyers/netmiko/blob/v4.1.1/netmiko/base_connection.py#L1861.\r\n\r\nThe above is a simplified version of https://github.com/ktbyers/netmiko/blob/v4.1.1/netmiko/base_connection.py#L614-L640 to reproduce it step-by-step. The pattern `.*` comes from https://github.com/ktbyers/netmiko/blob/v4.1.1/netmiko/base_connection.py#L731-L733 as `self.base_prompt` is empty string. So everything seems to be caused by the incorrectly detected prompt.\r\n\r\nTL;DR: `self.base_prompt` should be `#` but it's `''`.\r\n\r\nIf I change the line https://github.com/ktbyers/netmiko/blob/v4.1.1/netmiko/base_connection.py#L1289 to\r\n\r\n```python\r\nself.base_prompt = prompt\r\n```\r\n\r\nEverything seems to work fine, but might break other things? If so, perhaps something like the following would be more appropriate?\r\n\r\n```python\r\nif len(prompt.strip()) == 1:\r\n    self.base_prompt = prompt\r\nelse:\r\n    self.base_prompt = prompt[:-1]\r\n```\r\n\r\nIn fact, I can't think of a case where we need to strip the last character of a prompt, but perhaps there's more background to this than I'm aware of.", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2866/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2866/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2861", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2861/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2861/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2861/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2861", "id": 1308253633, "node_id": "I_kwDOAaBOds5N-l3B", "number": 2861, "title": "Redispatch failing due to no data being present", "user": {"login": "assadniang", "id": 55926182, "node_id": "MDQ6VXNlcjU1OTI2MTgy", "avatar_url": "https://avatars.githubusercontent.com/u/55926182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/assadniang", "html_url": "https://github.com/assadniang", "followers_url": "https://api.github.com/users/assadniang/followers", "following_url": "https://api.github.com/users/assadniang/following{/other_user}", "gists_url": "https://api.github.com/users/assadniang/gists{/gist_id}", "starred_url": "https://api.github.com/users/assadniang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/assadniang/subscriptions", "organizations_url": "https://api.github.com/users/assadniang/orgs", "repos_url": "https://api.github.com/users/assadniang/repos", "events_url": "https://api.github.com/users/assadniang/events{/privacy}", "received_events_url": "https://api.github.com/users/assadniang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2022-07-18T17:09:23Z", "updated_at": "2022-07-27T19:38:58Z", "closed_at": "2022-07-27T19:38:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nThis used to work before I upgrade from version 3.4.0 to version 4.1.1\r\n\r\nNot sure why it is failing on the juniper device:\r\n\r\n````\r\n#Use the redispatch method (to switch the Netmiko class to a Juniper)\r\n    redispatch(net_connect, device_type='juniper_junos')\r\n    \r\n    net_connect.send_command('cli', expect_string=r'>')\r\n    \r\n    output = net_connect.send_command('show configuration | display set')\r\n    \r\n    if f'vcsr-{domain}' in output:\r\n        print(f'Found vcsr-{domain}')\r\n        print(f'>>> Deleting vcsr-{domain} instance')\r\n        net_connect.send_config_set(f'delete virtual-machines instance vcsr-{domain}',\\\r\n             exit_config_mode = False)\r\n        output = net_connect.commit(and_quit=True)\r\n        \r\n        if 'commit complete' in output:\r\n            print(output)\r\n            print(Fore.LIGHTGREEN_EX + 'Success!')\r\n        else:\r\n            print(Fore.RED + f'Could not delete vcsr-{domain} instance')\r\n            net_connect.disconnect()\r\n            quit()\r\n    else:\r\n        print(f'No vcsr-{domain} instance running')\r\n    \r\n    net_connect.send_command('exit', expect_string=r'#')\r\n````\r\n\r\n**Output:**\r\n\r\n> >>> Checking if any vnf are running: vcsr-a\r\n> Traceback (most recent call last):\r\n>   File \"./CSR1000V_License_Stage.py\", line 1467, in <module>\r\n>     check_vnf_running()\r\n>   File \"./CSR1000V_License_Stage.py\", line 275, in check_vnf_running\r\n>     redispatch(net_connect, device_type='juniper_junos')\r\n>   File \"/usr/local/lib/python3.8/site-packages/netmiko/ssh_dispatcher.py\", line 449, in redispatch\r\n>     obj._try_session_preparation()\r\n>   File \"/usr/local/lib/python3.8/site-packages/netmiko/base_connection.py\", line 879, in _try_session_preparation\r\n>     self.session_preparation()\r\n>   File \"/usr/local/lib/python3.8/site-packages/netmiko/juniper/juniper.py\", line 20, in session_preparation\r\n>     self._test_channel_read(pattern=pattern)\r\n>   File \"/usr/local/lib/python3.8/site-packages/netmiko/base_connection.py\", line 1119, in _test_channel_read\r\n>     return self.read_until_pattern(pattern=pattern, read_timeout=20)\r\n>   File \"/usr/local/lib/python3.8/site-packages/netmiko/base_connection.py\", line 651, in read_until_pattern\r\n>     raise ReadTimeout(msg)\r\n> netmiko.exceptions.ReadTimeout: \r\n> \r\n> Pattern not detected: '[%>$#]' in output.\r\n> \r\n> Things you might try to fix this:\r\n> 1. Adjust the regex pattern to better identify the terminating string. Note, in\r\n> many situations the pattern is automatically based on the network device's prompt.\r\n> 2. Increase the read_timeout to a larger value.\r\n> \r\n> You can also look at the Netmiko session_log or debug log for more information.\r\n\r\n**Log file shows this:**\r\n\r\n> DEBUG:netmiko:read_channel: root@ptr53-jdm:~# \r\n> DEBUG:netmiko:Pattern found: ([\\$\\#]) Last login: Tue Jul 19 00:36:24 2022 from fd:192:168:53::250\r\n> root@ptr53-jdm:~#\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:Clear buffer detects data in the channel\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:write_channel: b'\\n'\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> root@ptr53-jdm:~# \r\n> DEBUG:netmiko:Pattern found: ([\\$\\#]) \r\n> root@ptr53-jdm:~#\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:Clear buffer detects data in the channel\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:[find_prompt()]: prompt is root@ptr53-jdm:~#\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:write_channel: b'\\n'\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> root@ptr53-jdm:~# \r\n> DEBUG:netmiko:Pattern found: ([\\$\\#]) \r\n> root@ptr53-jdm:~#\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:Clear buffer detects data in the channel\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:[find_prompt()]: prompt is root@ptr53-jdm:~#\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> ...\r\n> .....\r\n> .......\r\n> ..........\r\n\r\nI also tried commenting this line, but same issue:\r\n`#net_connect.send_command('cli', expect_string=r'>')`", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2861/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2861/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2837", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2837/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2837/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2837/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2837", "id": 1286011766, "node_id": "I_kwDOAaBOds5Mpvt2", "number": 2837, "title": "Nokia SR-OS classical CLI doesn't let you set global_cmd_verify (i.e. it is always hard-coded to False).", "user": {"login": "laimaretto", "id": 8891825, "node_id": "MDQ6VXNlcjg4OTE4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/8891825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laimaretto", "html_url": "https://github.com/laimaretto", "followers_url": "https://api.github.com/users/laimaretto/followers", "following_url": "https://api.github.com/users/laimaretto/following{/other_user}", "gists_url": "https://api.github.com/users/laimaretto/gists{/gist_id}", "starred_url": "https://api.github.com/users/laimaretto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laimaretto/subscriptions", "organizations_url": "https://api.github.com/users/laimaretto/orgs", "repos_url": "https://api.github.com/users/laimaretto/repos", "events_url": "https://api.github.com/users/laimaretto/events{/privacy}", "received_events_url": "https://api.github.com/users/laimaretto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-06-27T15:58:35Z", "updated_at": "2022-07-25T21:28:01Z", "closed_at": "2022-07-25T21:28:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi. I'm in the process of migrating my tools to netmiko 4.1.0. I'm wondering if `send_config_set()` is behaving as before. This is how send config commands to the router, where `inCmds` is a list of commands.\r\n\r\nSo, the commands I'm sending to the router are the following...\r\n```\r\necho SCRIPT_NONO_START\r\n\r\n/environment no more\r\n/configure router interface loop8 loopback\r\n/configure router interface loop8 address 11.11.11.23/32\r\nexit all\r\necho SCRIPT_NONO_FIN\r\n```\r\nAnd this is how I send those by means of the function `send_config_set()`:\r\n```\r\ninCmds = ['echo SCRIPT_NONO_START', '', '/environment no more', '/configure router interface loop8 loopback', '/configure router interface loop8 address 11.11.11.23/32', 'exit all', 'echo SCRIPT_NONO_FIN', '']\r\noutputTxt = conn2rtr.send_config_set(config_commands=inCmds, enter_config_mode=False, cmd_verify=True, read_timeout=10)\r\n```\r\nHowever, when lookin at the debug shown by netmiko, it seems to me that netmiko is sending the commands as a bulk operation. \r\n\r\n```\r\nDEBUG:netmiko:[find_prompt()]: prompt is *A:myRouter#\r\nDEBUG:netmiko:write_channel: b'echo SCRIPT_NONO_START\\n'\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:write_channel: b'/environment no more\\n'\r\nDEBUG:netmiko:write_channel: b'/configure router interface loop8 loopback\\n'\r\nDEBUG:netmiko:write_channel: b'/configure router interface loop8 address 11.11.11.23/32\\n'\r\nDEBUG:netmiko:write_channel: b'exit all\\n'\r\nDEBUG:netmiko:write_channel: b'echo SCRIPT_NONO_FIN\\n'\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: echo SCRIPT_NONO_START \r\nSCRIPT_NONO_START\r\n*A:myRouter# \r\n*A:myRouter# /environment no more \r\n*A:myRouter# /configure router interface \"loop8\" loopback \r\n*A:myRouter# /configure router interface \"loop8\" address 11.11.11.23/32 \r\n*A:\r\nDEBUG:netmiko:read_channel: myRouter# exit all \r\n*A:myRouter# echo SCRIPT_NONO_FIN \r\n\r\nDEBUG:netmiko:read_channel: SCRIPT_NONO_FIN\r\n*A:myRouter# \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'exit all\\n'\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: exit all \r\n```\r\nIs that so? I don't have a log with me at this moment, but I'm pretty sure that netmiko 3.4.0 would perform a command verify per each individual command in the list provided to `send_config_set()`. I know that, because with 3.4.0 if there was any difference between the sent command with respect to the echo, netmiko would complain. And now it is not happening ...\r\n\r\nFor example: I'm sending (on purpose) the line `configure router interface loop8 loopback` and the router is echoing `configure router interface \"loop8\" loopback` (note the `\"\"` on the interface name). Before this would imply an error; it is not happening now...\r\n\r\nRegards!\r\n\r\nLucas\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2837/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2837/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2818", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2818/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2818/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2818/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2818", "id": 1272699228, "node_id": "I_kwDOAaBOds5L29lc", "number": 2818, "title": "Netmiko file_transfer can have an MD5 failure when it incorrectly believes the file already exists", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-15T20:25:00Z", "updated_at": "2022-09-01T22:18:18Z", "closed_at": "2022-09-01T22:18:18Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Okay, so the issue is a bug in Netmiko. \r\n\r\n```\r\n    raise ValueError(f\"Invalid output from MD5 command: {md5_output}\")\r\nValueError: Invalid output from MD5 command: % Error: file file:/mnt/flash/arista_test.txt not found\r\n```\r\n\r\nBasically, netmiko does the following the check whether the file in question already exists.\r\n\r\n```python\r\n            self.ssh_ctl_chan._enter_shell()\r\n            remote_cmd = f\"ls {self.file_system}\"\r\n            remote_out = self.ssh_ctl_chan.send_command(\r\n                remote_cmd, expect_string=r\"[\\$#]\"\r\n            )   \r\n            self.ssh_ctl_chan._return_cli()\r\n            return self.dest_file in remote_out\r\n```\r\n\r\nSo it executes a ls from the linux shell, but arista1 used to have the following files in the ls output.\r\n```\r\n[pyclass@arista1 flash]$ ls *arista_test.txt\r\nBF_arista_test.txt  BTF_arista_test.txt  stian_arista_test.txt\r\n```\r\n\r\nAnd the check was does arista_test.txt exist in the remote_out (which it does since that filename is a subset of those other filenames).", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2818/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2818/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2812", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2812/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2812/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2812/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2812", "id": 1266088542, "node_id": "I_kwDOAaBOds5Ldvpe", "number": 2812, "title": "Set Adtran terminal width to at least 132", "user": {"login": "jhodie", "id": 94171273, "node_id": "U_kgDOBZzwiQ", "avatar_url": "https://avatars.githubusercontent.com/u/94171273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhodie", "html_url": "https://github.com/jhodie", "followers_url": "https://api.github.com/users/jhodie/followers", "following_url": "https://api.github.com/users/jhodie/following{/other_user}", "gists_url": "https://api.github.com/users/jhodie/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhodie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhodie/subscriptions", "organizations_url": "https://api.github.com/users/jhodie/orgs", "repos_url": "https://api.github.com/users/jhodie/repos", "events_url": "https://api.github.com/users/jhodie/events{/privacy}", "received_events_url": "https://api.github.com/users/jhodie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-06-09T12:54:09Z", "updated_at": "2022-09-01T21:47:01Z", "closed_at": "2022-09-01T21:47:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, sorry if this has been solved previously.\r\n\r\nI get the following error whenever I try to connect to an ADTRAN device since upgrading to 4.0 and 4.1:\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\jhodie\\pinemedia.net\\NOC Team - Documents\\Automation-testing\\Netmiko testing\\ttp-test-01\\ttp-test-05.py\", line 101, in <module>\r\n    ssp()\r\n  File \"C:\\Users\\jhodie\\pinemedia.net\\NOC Team - Documents\\Automation-testing\\Netmiko testing\\ttp-test-01\\ttp-test-05.py\", line 39, in ssp\r\n    output = net_connect.send_command(cfg, cmd_verify=False) #Send command\r\n  File \"C:\\Users\\jhodie\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\netmiko\\utilities.py\", line 596, in wrapper_decorator\r\n    return func(self, *args, **kwargs)\r\n  File \"C:\\Users\\jhodie\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\netmiko\\base_connection.py\", line 1694, in send_command\r\n    raise ReadTimeout(msg)\r\nnetmiko.exceptions.ReadTimeout:\r\nPattern not detected: 'terminal\\\\ width\\\\ 132' in output.\r\n\r\nThings you might try to fix this:\r\n1. Explicitly set your pattern using the expect_string argument.\r\n2. Increase the read_timeout to a larger value.\r\n\r\nYou can also look at the Netmiko session_log or debug log for more information.\r\n```\r\n\r\nIs there something with the update that I can do differently to stop this?\r\n\r\nMy code is:\r\n```\r\nfrom ttp import ttp\r\nfrom netmiko import ConnectHandler\r\nimport pprint\r\nimport json\r\nimport argparse\r\n\r\n#########################################################################################################################################################################\r\n\r\ndef setup_args():\r\n    parser = argparse.ArgumentParser(description='Gather data from a OLT')\r\n    parser.add_argument('serial', help='Serial number of the ONT')\r\n    parser.add_argument('olt_hostname', help='Hostname of OLT in \"quotes\"')\r\n    return parser.parse_args()\r\n\r\n#########################################################################################################################################################################\r\n\r\ndef ssp():\r\n    global ont_id\r\n    global olt_shelf\r\n    global olt_slot\r\n    global olt_port\r\n    global ont_state\r\n    global distance_to_ont\r\n    global light_rx\r\n    global light_tx\r\n    global rdi\r\n    template_01 = \"\"\"\r\n    {{ ont_id }}@{{ olt_shelf }}/{{ olt_slot }}/{{ olt_port }}.gpon IS {{ state }} {{ ignore }} {{ distance }} {{ light_rx }}|{{ light_tx }} {{ ignore }} {{ rdi }} {{ ignore }}\r\n    \"\"\"\r\n\r\n    if olt_type == 1:\r\n            cfg = f'show table remote ont | include ' + str(args.serial)\r\n            all_devices = [testolt]\r\n            with open('adtran_ssp_output.txt', 'w') as o: #Output processes to a text file for debugging\r\n                for devices in all_devices: #Repeat the below for each device\r\n                    net_connect = ConnectHandler(**devices) #Tells netmiko to connect to all devices in the devices list\r\n                    net_connect.enable() #Enter enable mode\r\n                    net_connect.send_command('terminal width 132', cmd_verify=False) #Set large terminal width else netmiko gets verrry confused\r\n                    output = net_connect.send_command(cfg, cmd_verify=False) #Send command\r\n                    o.write(output)\r\n            if output != \"\" or output != 'None':\r\n                parser = ttp('adtran_ssp_output.txt', template_01)\r\n                parser.parse()\r\n                #put result in JSON format\r\n                results_0 = parser.result(format='json')[0]\r\n                #str to list **convert with json.loads\r\n                result_0 = json.loads(results_0)\r\n\r\n                ont_id = result_0[0]['ont_id']\r\n                olt_shelf = result_0[0]['olt_shelf']\r\n                olt_slot = result_0[0]['olt_slot']\r\n                olt_port = result_0[0]['olt_port']\r\n                ont_state = result_0[0]['state']\r\n                distance_to_ont = result_0[0]['distance']\r\n                light_rx = result_0[0]['light_rx']\r\n                light_tx = result_0[0]['light_tx']\r\n                rdi = result_0[0]['rdi']\r\n\r\n            else:\r\n                print('\\033[2;31;43mWARNING: The specified serial number does not exist')\r\n                print('Exiting...\\033[0;0m')\r\n                exit()\r\n\r\n\r\n#########################################################################################################################################################################\r\n\r\nglobal args\r\nglobal testolt\r\nglobal olt_type\r\nolt_type = None\r\nargs = setup_args()\r\n\r\n#Define device connection details based on the selected OLT\r\nif args.olt_hostname == 'olt-01.testing':\r\n    testolt = { 'device_type': 'adtran_os',\r\n        'ip': '10.0.10.10',\r\n        'username': 'user',\r\n        'password': 'pass',\r\n        'port': '22',\r\n        'session_log': 'adtran_output.txt'\r\n        }\r\n    olt_type = 1\r\n\r\nelif args.olt_hostname == 'olt-02.testing':\r\n    testolt = { 'device_type': 'adtran_os',\r\n        'ip': '10.0.1.10',\r\n        'username': 'user',\r\n        'password': 'pass',\r\n        'port': '22',\r\n        'session_log': 'adtran_output.txt'\r\n        }\r\n    olt_type = 1\r\n\r\nelse:\r\n    print('\\033[2;31;43mWARNING: Incorrect OLT specified.')\r\n    print('Exiting...\\033[0;0m')\r\n    exit()\r\n\r\nprint(f'\\nTest displaying passed information \\n Serial: {args.serial} \\n OLT Hostname: {args.olt_hostname} \\n')\r\nprint('\\n=== 1. Finding ONT information ===\\n')\r\nssp()\r\nprint('ONT ID: ' + str(ont_id) + '\\n OLT Shelf: ' + str(olt_shelf) + '\\n OLT Slot: ' + str(olt_slot) + '\\n OLT Port: ' + str(olt_port) + '\\n ONT State: ' + str(ont_state) + '\\n Distance to ONT: ' + str(distance_to_ont) + '\\n Rx Light levels: ' + str(light_rx) + '\\n Tx Light levels: ' + str(light_tx) + 'RDI: ' + str(rdi) + '\\n')\r\n\r\n```\r\n\r\nThe session log is:\r\n```\r\nLast Login Date      : Jun  9 2022 09:31:46 \r\nLast Login Type      : IP Session(CLI) \r\nLogin Failures       : 0 (Since Last Login)\r\n                     : 0 (Total for Account)\r\nolt-02.testing>\r\nolt-02.testing>terminal length 0\r\nolt-02.testing>\r\nolt-02.testing>enable\r\nolt-02.testing#\r\nolt-02.testing#\r\nolt-02.testing#\r\n\r\nolt-02.testing#terminal width 132\r\nolt-02.testing#\r\n\r\nshow table remote ont | include ADTN12345678\r\n5@1/1/2.gpon          IS     up     ADTN12345678   2045   -17.0|2.9      0|11    0    En \r\nolt-02.testing#\r\n```\r\n\r\n\r\nOnce again sorry if this has been answered and I'm just being blind", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2812/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2791", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2791/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2791/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2791/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2791", "id": 1241332246, "node_id": "I_kwDOAaBOds5J_ToW", "number": 2791, "title": "API documentation still shows legacy sub-module `ssh_exception`", "user": {"login": "matthias-colt", "id": 78732585, "node_id": "MDQ6VXNlcjc4NzMyNTg1", "avatar_url": "https://avatars.githubusercontent.com/u/78732585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthias-colt", "html_url": "https://github.com/matthias-colt", "followers_url": "https://api.github.com/users/matthias-colt/followers", "following_url": "https://api.github.com/users/matthias-colt/following{/other_user}", "gists_url": "https://api.github.com/users/matthias-colt/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthias-colt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthias-colt/subscriptions", "organizations_url": "https://api.github.com/users/matthias-colt/orgs", "repos_url": "https://api.github.com/users/matthias-colt/repos", "events_url": "https://api.github.com/users/matthias-colt/events{/privacy}", "received_events_url": "https://api.github.com/users/matthias-colt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-05-19T07:18:01Z", "updated_at": "2022-09-01T21:02:45Z", "closed_at": "2022-09-01T21:02:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the current [netmiko API documentation](https://ktbyers.github.io/netmiko/docs/netmiko/ssh_exception.html) the exceptions are still listed under the sub-module `ssh_exception` although since release 4.0.0 this has been moved to `exceptions`.\r\n\r\nI found that the exceptions are also directly accessible under the main module, e.g. `netmico.NetMikoTimeoutException`.\r\nNot sure if it is good practice to use them or better stick with `netmico.exceptions.NetMikoTimeoutException`, any recommendations?", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2791/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2791/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2773", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2773/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2773/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2773/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2773", "id": 1228121797, "node_id": "I_kwDOAaBOds5JM6bF", "number": 2773, "title": "cisco_xr commit() error on IOS 6.x", "user": {"login": "bodothebest", "id": 1067602, "node_id": "MDQ6VXNlcjEwNjc2MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/1067602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bodothebest", "html_url": "https://github.com/bodothebest", "followers_url": "https://api.github.com/users/bodothebest/followers", "following_url": "https://api.github.com/users/bodothebest/following{/other_user}", "gists_url": "https://api.github.com/users/bodothebest/gists{/gist_id}", "starred_url": "https://api.github.com/users/bodothebest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bodothebest/subscriptions", "organizations_url": "https://api.github.com/users/bodothebest/orgs", "repos_url": "https://api.github.com/users/bodothebest/repos", "events_url": "https://api.github.com/users/bodothebest/events{/privacy}", "received_events_url": "https://api.github.com/users/bodothebest/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-05-06T17:34:35Z", "updated_at": "2022-09-01T20:33:47Z", "closed_at": "2022-09-01T20:33:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI wrote my first netmiko script to send some commands to a bunch of IOS XR routers, but I get an error when I commit the changes with the function commit().\r\nI have two different sets of XR routers (ASR9K): some have 32bit IOS XR 6.x and others have 64bit IOS XR 7.x and the problem is present only on the ones with version 6.x.\r\nThis is my script (shortened for readability):\r\n\r\n```\r\nfrom netmiko import ConnectHandler\r\nimport getpass\r\nimport sys\r\nimport time\r\n\r\ndevice = {\r\n    'session_log': 'netmiko_session.log',\r\n    'device_type': 'cisco_xr',\r\n    'ip': '1.1.1.1',\r\n    'username': 'username',\r\n    'password': 'password',\r\n    'secret':'password'\r\n    }\r\n\r\nipfile=open(\"apparati_mpls_ios_XR.txt\")\r\n\r\nprint (\"Inserisci le credenziali per l'accesso SSH agli apparati\")\r\ndevice['username']=input(\"User name: \")\r\ndevice['password']=getpass.getpass()\r\ndevice['secret']=getpass.getpass(prompt='Enable password: ')\r\n\r\nconfig_commands = [\r\n        'no ipv4 access-list ACL',\r\n        'ipv4 access-list ACL',\r\n        'permit ipv4 10.0.0.0 0.0.0.255 any',\r\n        ]\r\n\r\nfor line in ipfile:\r\n\r\n devname, devip = line.strip(\"\\n\").split(':')\r\n device['ip']=devip\r\n print(\"\\n\\nConnessione a \"+devname,\"(\"+devip+\")...\")\r\n\r\n net_connect = ConnectHandler(**device)\r\n net_connect.enable()\r\n time.sleep(2)\r\n print (\"Invio configurazione... \")\r\n net_connect.send_config_set(config_commands)\r\n print (\"Configurazione terminata, salvo le modifiche...\")\r\n net_connect.commit(read_timeout=20)\r\n\r\nipfile.close()\r\n```\r\n\r\nand this is the output:\r\n\r\n```\r\nConnessione a XR-6 (X.X.X.X)...\r\nInvio configurazione... \r\nConfigurazione terminata, salvo le modifiche...\r\nTraceback (most recent call last):\r\n  File \"netmiko_config_xr.py\", line 64, in <module>\r\n    net_connect.commit()\r\n  File \"/home/marco/.local/lib/python3.8/site-packages/netmiko/cisco/cisco_xr.py\", line 143, in commit\r\n    new_data = self._send_command_str(\r\n  File \"/home/marco/.local/lib/python3.8/site-packages/netmiko/base_connection.py\", line 1716, in _send_command_str\r\n    output = self.send_command(*args, **kwargs)\r\n  File \"/home/marco/.local/lib/python3.8/site-packages/netmiko/utilities.py\", line 596, in wrapper_decorator\r\n    return func(self, *args, **kwargs)\r\n  File \"/home/marco/.local/lib/python3.8/site-packages/netmiko/base_connection.py\", line 1644, in send_command\r\n    new_data = self.command_echo_read(cmd=cmd, read_timeout=10)\r\n  File \"/home/marco/.local/lib/python3.8/site-packages/netmiko/base_connection.py\", line 1369, in command_echo_read\r\n    new_data = self.read_until_pattern(\r\n  File \"/home/marco/.local/lib/python3.8/site-packages/netmiko/base_connection.py\", line 651, in read_until_pattern\r\n    raise ReadTimeout(msg)\r\nnetmiko.exceptions.ReadTimeout: \r\n\r\nPattern not detected: 'y' in output.\r\n\r\nThings you might try to fix this:\r\n1. Adjust the regex pattern to better identify the terminating string. Note, in\r\nmany situations the pattern is automatically based on the network device's prompt.\r\n2. Increase the read_timeout to a larger value.\r\n\r\nYou can also look at the Netmiko session_log or debug log for more information.\r\n```\r\n\r\nIn fact the commands are executed and committed correctly, but the error breaks the execution of the scripts, so only the first router in the list is processed. This is the log of the session:\r\n\r\n```\r\nRP/0/RSP0/CPU0:XR-6#terminal width 511\r\nFri May  6 18:04:48.679 CEST\r\nRP/0/RSP0/CPU0:XR-6#terminal length 0\r\nFri May  6 18:04:48.942 CEST\r\nRP/0/RSP0/CPU0:XR-6#\r\nRP/0/RSP0/CPU0:XR-6#\r\nRP/0/RSP0/CPU0:XR-6#\r\nRP/0/RSP0/CPU0:XR-6#configure terminal\r\nFri May  6 18:04:51.434 CEST\r\nRP/0/RSP0/CPU0:XR-6(config)#\r\nRP/0/RSP0/CPU0:XR-6(config)#no ipv4 access-list ACL\r\nRP/0/RSP0/CPU0:XR-6(config)#ipv4 access-list ACL\r\nRP/0/RSP0/CPU0:XR-6(config-ipv4-acl)#permit ipv4 10.0.0.0 0.0.0.255 any\r\nRP/0/RSP0/CPU0:XR-6(config-ipv4-acl)#\r\nRP/0/RSP0/CPU0:XR-6(config-ipv4-acl)#commit\r\nFri May  6 18:04:53.114 CEST\r\nThis could be a few minutes if your config is large. Confirm? [y/n][confirm]\r\nRP/0/RSP0/CPU0:XR-6(config-ipv4-acl)#\r\nRP/0/RSP0/CPU0:XR-6(config-ipv4-acl)#\r\n```\r\n\r\nWhen the script is executed on a router with IOS XR 7 everything is ok and no exception is thrown. The output is the same, with the difference of this line:\r\n\r\n```\r\nRP/0/RSP0/CPU0:XR-7(config-ipv4-acl)#commit\r\nFri May  6 18:31:52.654 CEST\r\n*** This could be a few minutes if your config is large. Confirm? [y/n][confirm] y ***\r\nRP/0/RSP0/CPU0:XR-7(config-ipv4-acl)#\r\n```\r\n\r\nSo it looks like the commit() function expects to see the \"y\" after the \"Confirm? [y/n][confirm]\", but on IOS 6.x the \"y\" is not printed (even if I write the command myself in the CLI). Looking at the source code it seems to me that the expected output is the hashtag \r\n```\r\nif \"onfirm\" in new_data:\r\n            output += new_data\r\n            new_data = self._send_command_str(\r\n                \"y\",\r\n                expect_string=r\"#\",\r\n                strip_prompt=False,\r\n                strip_command=False,\r\n                read_timeout=read_timeout,\r\n            )\r\n\r\n```\r\nbut the error message says otherwise.\r\n\r\nI am running the latest release of netmiko, 4.1.0, with Python 3.8.10\r\nAm I missing something? There are a lot of XR 6.x routers out there, I'd think that someone else would be noticing this, so probably I'm doing something wrong...", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2773/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2773/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2771", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2771/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2771/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2771/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2771", "id": 1220193747, "node_id": "I_kwDOAaBOds5Iuq3T", "number": 2771, "title": "Huawei and potentially HPE-Comware need a disconnect() method created", "user": {"login": "luweijun1992", "id": 58923704, "node_id": "MDQ6VXNlcjU4OTIzNzA0", "avatar_url": "https://avatars.githubusercontent.com/u/58923704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luweijun1992", "html_url": "https://github.com/luweijun1992", "followers_url": "https://api.github.com/users/luweijun1992/followers", "following_url": "https://api.github.com/users/luweijun1992/following{/other_user}", "gists_url": "https://api.github.com/users/luweijun1992/gists{/gist_id}", "starred_url": "https://api.github.com/users/luweijun1992/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luweijun1992/subscriptions", "organizations_url": "https://api.github.com/users/luweijun1992/orgs", "repos_url": "https://api.github.com/users/luweijun1992/repos", "events_url": "https://api.github.com/users/luweijun1992/events{/privacy}", "received_events_url": "https://api.github.com/users/luweijun1992/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-29T08:16:21Z", "updated_at": "2022-05-16T01:42:09Z", "closed_at": "2022-05-16T01:42:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Check log information and see that the last exit is \"exit\"\r\nBut Huawei \"quit\"\r\n\r\n![image](https://user-images.githubusercontent.com/58923704/165908275-e50630d4-97e1-41b9-98a5-18e2ba9415a4.png)\r\n\r\n![image](https://user-images.githubusercontent.com/58923704/165908488-5df5c7a2-22e7-4ed2-95c4-07d1f8568693.png)\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2771/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2771/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2749", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2749/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2749/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2749/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2749", "id": 1213281040, "node_id": "I_kwDOAaBOds5IUTMQ", "number": 2749, "title": "cisco_wlc_ssh fails to connect with netmiko4 but works with 3.3.3", "user": {"login": "yurividal", "id": 8555749, "node_id": "MDQ6VXNlcjg1NTU3NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/8555749?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yurividal", "html_url": "https://github.com/yurividal", "followers_url": "https://api.github.com/users/yurividal/followers", "following_url": "https://api.github.com/users/yurividal/following{/other_user}", "gists_url": "https://api.github.com/users/yurividal/gists{/gist_id}", "starred_url": "https://api.github.com/users/yurividal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yurividal/subscriptions", "organizations_url": "https://api.github.com/users/yurividal/orgs", "repos_url": "https://api.github.com/users/yurividal/repos", "events_url": "https://api.github.com/users/yurividal/events{/privacy}", "received_events_url": "https://api.github.com/users/yurividal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2022-04-23T11:51:19Z", "updated_at": "2022-09-21T13:10:17Z", "closed_at": "2022-07-06T17:10:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "When usign latest version (4.0) my script fails to connect to cisco wlc running version 8.10.162.0 of AIREOS. \r\nDowngrading to v3.3.3 makes the script work again.\r\nProblem seems to be on the prompt. v4 is waiting for # while wlc gives out >", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2749/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2749/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2739", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2739/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2739/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2739/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2739", "id": 1206882861, "node_id": "I_kwDOAaBOds5H75It", "number": 2739, "title": "Extreme ERS Netmiko 4 -  Pattern not detected: '[>#]' in output. ", "user": {"login": "mrkslm", "id": 65215231, "node_id": "MDQ6VXNlcjY1MjE1MjMx", "avatar_url": "https://avatars.githubusercontent.com/u/65215231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrkslm", "html_url": "https://github.com/mrkslm", "followers_url": "https://api.github.com/users/mrkslm/followers", "following_url": "https://api.github.com/users/mrkslm/following{/other_user}", "gists_url": "https://api.github.com/users/mrkslm/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrkslm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrkslm/subscriptions", "organizations_url": "https://api.github.com/users/mrkslm/orgs", "repos_url": "https://api.github.com/users/mrkslm/repos", "events_url": "https://api.github.com/users/mrkslm/events{/privacy}", "received_events_url": "https://api.github.com/users/mrkslm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2022-04-18T09:54:29Z", "updated_at": "2022-06-13T18:25:17Z", "closed_at": "2022-06-13T18:25:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\nI am using a simple script to configure SNMPv3 username and password. With Netmiko 3 it works perfectly but with Netmiko 4 I get an error:\r\n\r\nPattern not detected: '[>#]' in output.\r\n\r\n```\r\ndef connect_to_switch(ip, comms):\r\n    print(f\"Connecting to {ip}\")\r\n    switch = {\r\n        'device_type': 'extreme_ers',\r\n        'host': ip,\r\n        'username': 'USERNAME',\r\n        'password': 'PASSWORD',\r\n        \"global_delay_factor\": 2\r\n    }\r\n    net_connect = ConnectHandler(**switch)    \r\n    net_connect.special_login_handler()        \r\n     \r\n    for command in comms:\r\n        v = net_connect.send_command(command, expect_string=r'#')\r\n        print(v)\r\n    net_connect.disconnect()\r\n \r\n \r\nif __name__ == \"__main__\":\r\n    # Commands to sent\r\n    commands = ['configure terminal',\r\n                \"snmp-server user SNMPUSERNAME sha SECURE_PASS aes SECURE_PASS read-view snmpv1Objs\",\r\n                \"wr mem\",\r\n                ]\r\n \r\n     \r\n    connect_to_switch('10.10.10.10', commands)\r\n  \r\n```\r\n\r\nHere is the DEBUG log file. The \"host1#\" is there  and it should match the but somehow it does not understand the pattern.\r\n\r\n> \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:write_channel: b'\\n'\r\n> DEBUG:netmiko:read_channel: \r\n> \u001b[2J\u001b[0m\u001b[0;0f\u001b[1;1H\u001b[2;1H\u001b[3;1H\u001b[4;1H\u001b[5;1H\u001b[6;1H\u001b[7;1H\u001b[8;1H\u001b[9;1H\u001b[10;1H\u001b[11;1H\u001b[12;1H\u001b[13;1H\u001b[14;1H\u001b[15;1H\u001b[14;1HEnter Ctrl-Y to begin.\u001b[16;3H****************************************************************************\u001b[17;3H*** Ethernet Routing Switch 4926GTS-PWR+    \u001b[17;76H***\u001b[18;3H*** Copyright (C) 1996-2021 Extreme Networks.  All rights reserved.      ***\u001b[19;3H*** This product is protected by one or more US patents listed           ***\u001b[20;3H*** at http://www.extremenetworks.com/patents along with                 ***\u001b[21;3H*** their foreign counterparts.                                          ***\u001b[22;3H***                                                                      ***\u001b[23;3H*** HW:01       FW:7.5.0.4   SW:v7.8.4.013\u001b[23;76H***\u001b[24;3H****************************************************************************\u001b[?25l\u0007\r\n> DEBUG:netmiko:write_channel: b'\\x19'\r\n> DEBUG:netmiko:read_channel: \u001b[2J\u001b[18;1H\u001b[2K\u001b[19;1H\u001b[2K\u001b[20;1H\u001b[2K\u001b[2J\u001b[4;14HLast login: --\r\n> \u001b[5;14HFailed retries since last login:  0\r\n> \u001b[10;0HPress ENTER to continue\r\n> \u001b[24;1H\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:write_channel: b'\\n'\r\n> DEBUG:netmiko:read_channel: \u001b[2J\u001b[?25h\u001b[2J\u001b[23;1H\r\n> host1#\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:write_channel: b'\\n'\r\n> DEBUG:netmiko:read_channel: \r\n> host1#\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:write_channel: b'\\n'\r\n> DEBUG:netmiko:read_channel: \r\n> host1#\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:write_channel: b'\\n'\r\n> DEBUG:netmiko:read_channel: \r\n> host1#\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:write_channel: b'\\n'\r\n> DEBUG:netmiko:read_channel: \r\n> host1#\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n>  \r\n> DEBUG:netmiko:write_channel: b'\\n'\r\n> DEBUG:netmiko:read_channel: \r\n> \r\n> DEBUG:netmiko:read_channel: host1#\r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:read_channel: \r\n> DEBUG:netmiko:write_channel: b'exit\\n'\r\n> DEBUG:paramiko.transport:EOF in transport thread\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2739/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2739/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2723", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2723/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2723/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2723/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2723", "id": 1195998023, "node_id": "I_kwDOAaBOds5HSXtH", "number": 2723, "title": "Extreme EXOS read-only account", "user": {"login": "kingroudy", "id": 103190406, "node_id": "U_kgDOBiaPhg", "avatar_url": "https://avatars.githubusercontent.com/u/103190406?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingroudy", "html_url": "https://github.com/kingroudy", "followers_url": "https://api.github.com/users/kingroudy/followers", "following_url": "https://api.github.com/users/kingroudy/following{/other_user}", "gists_url": "https://api.github.com/users/kingroudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingroudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingroudy/subscriptions", "organizations_url": "https://api.github.com/users/kingroudy/orgs", "repos_url": "https://api.github.com/users/kingroudy/repos", "events_url": "https://api.github.com/users/kingroudy/events{/privacy}", "received_events_url": "https://api.github.com/users/kingroudy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-04-07T12:47:11Z", "updated_at": "2022-04-12T21:27:03Z", "closed_at": "2022-04-12T21:27:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nIt seems netmiko is unable to handle Extreme EXOS when logging in with read-only (user, non-administrative privilege) accounts. The difference be it that admin accounts end their prompt with '#' while read only accounts end their prompt with '>'\r\n\r\nexample:\r\n            testhost.1 >\r\n            testhost.2 >\r\n            testhost.3 >\r\n\r\nHaving searched the source code, it seems the '#' is hard coded in extreme_exos.py on line 18:\r\n        self._test_channel_read(pattern=r\"#\")\r\n\r\nI'm looking for a fix that allows either '#' or '>'\r\nOr a fix that allows specifying the pattern.\r\n\r\nHere's the full error:\r\n\r\n`Traceback (most recent call last):\r\n  File \"d:\\Git\\automation\\roudy\\netmiko-test.py\", line 7, in <module>\r\n    net_connect = ConnectHandler(**soleil11)\r\n  File \"C:\\Users\\relchammas\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\site-packages\\netmiko\\ssh_dispatcher.py\", line 344, in ConnectHandler \r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"C:\\Users\\relchammas\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\site-packages\\netmiko\\base_connection.py\", line 434, in __init__      \r\n    self._open()\r\n  File \"C:\\Users\\relchammas\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\site-packages\\netmiko\\base_connection.py\", line 440, in _open\r\n    self._try_session_preparation()\r\n  File \"C:\\Users\\relchammas\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\site-packages\\netmiko\\base_connection.py\", line 879, in _try_session_preparation\r\n    self.session_preparation()\r\n  File \"C:\\Users\\relchammas\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\site-packages\\netmiko\\extreme\\extreme_exos.py\", line 18, in session_preparation\r\n    self._test_channel_read(pattern=r\"#\")\r\n  File \"C:\\Users\\relchammas\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\site-packages\\netmiko\\base_connection.py\", line 1119, in _test_channel_read\r\n    return self.read_until_pattern(pattern=pattern, read_timeout=20)\r\n  File \"C:\\Users\\relchammas\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\site-packages\\netmiko\\base_connection.py\", line 651, in read_until_pattern\r\n    raise ReadTimeout(msg)\r\nnetmiko.exceptions.ReadTimeout:\r\n\r\nPattern not detected: '#' in output.\r\n\r\nThings you might try to fix this:\r\n2. Increase the read_timeout to a larger value.\r\n\r\nYou can also look at the Netmiko session_log or debug log for more information.`", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2723/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2723/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2718", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2718/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2718/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2718/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2718", "id": 1191007155, "node_id": "I_kwDOAaBOds5G_VOz", "number": 2718, "title": "cisco_ios - device hostname > 20 characters causes ReadTimeout exception", "user": {"login": "ghmj2417", "id": 18738647, "node_id": "MDQ6VXNlcjE4NzM4NjQ3", "avatar_url": "https://avatars.githubusercontent.com/u/18738647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghmj2417", "html_url": "https://github.com/ghmj2417", "followers_url": "https://api.github.com/users/ghmj2417/followers", "following_url": "https://api.github.com/users/ghmj2417/following{/other_user}", "gists_url": "https://api.github.com/users/ghmj2417/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghmj2417/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghmj2417/subscriptions", "organizations_url": "https://api.github.com/users/ghmj2417/orgs", "repos_url": "https://api.github.com/users/ghmj2417/repos", "events_url": "https://api.github.com/users/ghmj2417/events{/privacy}", "received_events_url": "https://api.github.com/users/ghmj2417/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-04-03T18:24:44Z", "updated_at": "2022-04-06T20:02:29Z", "closed_at": "2022-04-06T20:02:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using netmiko 4.0.0 (latest install from pip).  Did not experience this issue using 3.4.0.\r\n\r\nUsing type `cisco_ios`.  When I have a device with a hostname > 20 characters and try to run `send_config_set`.  I consistently receive an exception ReadTimeout\r\n```\r\nException has occurred: ReadTimeout\r\n\r\n\r\nPattern not detected: 'abc\\\\-defgh\\\\-52\\\\-52\\\\-52\\\\-52.*' in output.\r\n\r\nThings you might try to fix this:\r\n1. Adjust the regex pattern to better identify the terminating string. Note, in\r\nmany situations the pattern is automatically based on the network device's prompt.\r\n2. Increase the read_timeout to a larger value.\r\n```\r\nWhen I change the hostname to be 20 characters or less then the commands will be sent successfully. I also tested `send_command_timing` which does not produce an exception.\r\n\r\nI did as suggested and increased the read_timeout on the send_config_set but that didn't fix it.  Any ideas or workarounds that I can use (besides changing the device hostnames)?", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2718/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2718/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2711", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2711/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2711/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2711/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2711", "id": 1183055220, "node_id": "I_kwDOAaBOds5Gg_10", "number": 2711, "title": "Huawei special_login_handler is not logging in successfully", "user": {"login": "quinntwohao", "id": 63628672, "node_id": "MDQ6VXNlcjYzNjI4Njcy", "avatar_url": "https://avatars.githubusercontent.com/u/63628672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/quinntwohao", "html_url": "https://github.com/quinntwohao", "followers_url": "https://api.github.com/users/quinntwohao/followers", "following_url": "https://api.github.com/users/quinntwohao/following{/other_user}", "gists_url": "https://api.github.com/users/quinntwohao/gists{/gist_id}", "starred_url": "https://api.github.com/users/quinntwohao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/quinntwohao/subscriptions", "organizations_url": "https://api.github.com/users/quinntwohao/orgs", "repos_url": "https://api.github.com/users/quinntwohao/repos", "events_url": "https://api.github.com/users/quinntwohao/events{/privacy}", "received_events_url": "https://api.github.com/users/quinntwohao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 52, "created_at": "2022-03-28T08:09:11Z", "updated_at": "2022-09-16T21:07:33Z", "closed_at": "2022-09-16T21:05:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "The system information is as follows:\r\n1. netmiko version: 4.0\r\n2. python 3.10\r\n3. window 11\r\n\r\nerror_print:\r\n```shell\r\nTraceback (most recent call last):\r\n  File \"E:\\web_API\\test.py\", line 11, in <module>\r\n    app.net_ssh_proxy(switch_json = switch_json, commands=commands)\r\n  File \"E:\\web_API\\app.py\", line 25, in net_ssh_proxy\r\n    with ConnectHandler(**device_info, sock=sock) as net_connect:\r\n  File \"E:\\venv_02\\lib\\site-packages\\netmiko\\ssh_dispatcher.py\", line 344, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"E:\\venv_02\\lib\\site-packages\\netmiko\\base_connection.py\", line 434, in __init__\r\n    self._open()\r\n  File \"E:\\venv_02\\lib\\site-packages\\netmiko\\base_connection.py\", line 439, in _open\r\n    self.establish_connection()\r\n  File \"E:\\venv_02\\lib\\site-packages\\netmiko\\base_connection.py\", line 1092, in establish_connection\r\n    self.special_login_handler()\r\n  File \"E:\\venv_02\\lib\\site-packages\\netmiko\\huawei\\huawei.py\", line 105, in special_login_handler\r\n    output = self.read_until_pattern(password_change_prompt)\r\n  File \"E:\\venv_02\\lib\\site-packages\\netmiko\\base_connection.py\", line 631, in read_until_pattern\r\n    raise ReadException(msg)\r\nnetmiko.exceptions.ReadException: Unable to successfully split output based on pattern:\r\npattern=((Change now|Please choose))|([\\]>]\\s*$)\r\noutput='\\nInfo: The max number of VTY users is 21, the number of current VTY users online is 2, and total number of terminal users online is 2.\\n      The current login time is 2022-03-28 15:55:30+08:00.\\n<xxxx_hostname>'\r\nresults=['\\nInfo: The max number of VTY users is 21, the number of current VTY users online is 2, and total number of terminal users online is 2.\\n      The current login time is 2022-03-28 15:55:30+08:00.\\n<xxxx_hostname', None, None, '>', '']\r\n\r\n```\r\n\r\n\r\ntest instanse\r\n2. python 3.10\r\n3. window 11\r\n[Netmiko 3.4.0 Release](https://github.com/ktbyers/netmiko/releases/tag/v3.4.0)\r\n\r\nout_print\r\n\r\nno problem\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2711/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2711/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2694", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2694/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2694/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2694/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2694", "id": 1175290926, "node_id": "I_kwDOAaBOds5GDYQu", "number": 2694, "title": "Netmiko linux device_type exit_config_mode behavior", "user": {"login": "govindrathod1987", "id": 102032888, "node_id": "U_kgDOBhTl-A", "avatar_url": "https://avatars.githubusercontent.com/u/102032888?v=4", "gravatar_id": "", "url": "https://api.github.com/users/govindrathod1987", "html_url": "https://github.com/govindrathod1987", "followers_url": "https://api.github.com/users/govindrathod1987/followers", "following_url": "https://api.github.com/users/govindrathod1987/following{/other_user}", "gists_url": "https://api.github.com/users/govindrathod1987/gists{/gist_id}", "starred_url": "https://api.github.com/users/govindrathod1987/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/govindrathod1987/subscriptions", "organizations_url": "https://api.github.com/users/govindrathod1987/orgs", "repos_url": "https://api.github.com/users/govindrathod1987/repos", "events_url": "https://api.github.com/users/govindrathod1987/events{/privacy}", "received_events_url": "https://api.github.com/users/govindrathod1987/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2022-03-21T12:08:26Z", "updated_at": "2022-05-20T20:26:43Z", "closed_at": "2022-05-20T20:26:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "netmiko.ssh_exception.NetMikoTimeoutException seen while trying to execute send_config_set\r\n\r\nnetmiko version for windows: 2.30\r\n\r\n\r\ncode: \r\n\r\n```python\r\n    output = net_connect.send_command_timing(cmd0, delay_factor=5)\r\n    time.sleep(2)\r\n    prompt = net_connect.find_prompt(delay_factor=5)\r\n    print prompt\r\n    output = net_connect.enable() \r\n```\r\n\r\n**Output trace:**\r\nSSH connection established to 172.17.17.66:22\r\nInteractive SSH session established\r\n#\r\nTraceback (most recent call last):\r\n  File \"C:/Users/Administrator/PycharmProjects/NFC1.1/extras/Docker_container_tests_neto.py\", line 9025, in <module>\r\n    main()\r\n  File \"C:/Users/Administrator/PycharmProjects/NFC1.1/extras/Docker_container_tests_neto.py\", line 9021, in main\r\n    container_tests(dockers_json, test_type, report)\r\n  File \"C:/Users/Administrator/PycharmProjects/NFC1.1/extras/Docker_container_tests_neto.py\", line 8696, in container_tests\r\n    create_DD_NNS(dockers_json, report)\r\n  File \"C:/Users/Administrator/PycharmProjects/NFC1.1/extras/Docker_container_tests_neto.py\", line 6170, in create_DD_NNS\r\n    if create_dd_dockers(dockers_json, final, report):\r\n  File \"C:/Users/Administrator/PycharmProjects/NFC1.1/extras/Docker_container_tests_neto.py\", line 4393, in create_dd_dockers\r\n    if create_dd(vlan, vlan_host_members, vlan_tgt_members, dockers_json, total_portals, report):\r\n  File \"C:/Users/Administrator/PycharmProjects/NFC1.1/extras/Docker_container_tests_neto.py\", line 2382, in create_dd\r\n    output = net_connect.enable()\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\linux\\linux_ssh.py\", line 78, in enable\r\n    if not self.check_enable_mode():\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\linux\\linux_ssh.py\", line 60, in check_enable_mode\r\n    return super(LinuxSSH, self).check_enable_mode(check_string=check_string)\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 14, in check_enable_mode\r\n    return super(CiscoBaseConnection, self).check_enable_mode(check_string=check_string)\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\base_connection.py\", line 1272, in check_enable_mode\r\n    output = self.read_until_prompt()\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\base_connection.py\", line 538, in read_until_prompt\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"C:\\Python27\\lib\\site-packages\\netmiko\\base_connection.py\", line 478, in _read_channel_expect\r\n    raise NetMikoTimeoutException(\"Timed-out reading channel, data not available.\")\r\nnetmiko.ssh_exception.NetMikoTimeoutException: Timed-out reading channel, data not available.\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2694/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2694/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2659", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2659/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2659/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2659/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2659", "id": 1155538342, "node_id": "I_kwDOAaBOds5E4B2m", "number": 2659, "title": "Square brackets are being removed from SROS MDCLI ", "user": {"login": "svautour", "id": 14130517, "node_id": "MDQ6VXNlcjE0MTMwNTE3", "avatar_url": "https://avatars.githubusercontent.com/u/14130517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/svautour", "html_url": "https://github.com/svautour", "followers_url": "https://api.github.com/users/svautour/followers", "following_url": "https://api.github.com/users/svautour/following{/other_user}", "gists_url": "https://api.github.com/users/svautour/gists{/gist_id}", "starred_url": "https://api.github.com/users/svautour/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/svautour/subscriptions", "organizations_url": "https://api.github.com/users/svautour/orgs", "repos_url": "https://api.github.com/users/svautour/repos", "events_url": "https://api.github.com/users/svautour/events{/privacy}", "received_events_url": "https://api.github.com/users/svautour/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-03-01T16:20:07Z", "updated_at": "2022-04-13T21:27:34Z", "closed_at": "2022-04-13T21:27:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Nokia SROS MDCLI contains square brackets in the config. These are being stripped by netmiko. Example:\r\n\r\nA:admin@rr# admin show configuration |match area pre-lines 5 post-lines 5\r\n            ipv6-routing native\r\n            level-capability 2\r\n            router-id 10.1.0.15\r\n            system-id 0100.0100.0015\r\n            traffic-engineering true\r\n            area-address [49.0000]\r\n            segment-routing {\r\n                admin-state enable\r\n                prefix-sid-range {\r\n                    global\r\n                }\r\n\r\n(config-env) root@hyper10:/containerlab/config-env# python3 -V\r\nPython 3.8.10\r\n\r\n(config-env) root@hyper10:/containerlab/config-env# pip3 list|egrep netmiko\r\nnetmiko       3.4.0  \r\n\r\n\r\nSimple script to get the config:\r\n\r\nfrom netmiko import ConnectHandler\r\n\r\ndev = {\r\n    'device_type' : 'nokia_sros',\r\n    'host' : \"clab-c1-rr\",\r\n    'username' : \"xxx\",\r\n    'password' : \"xxx\"\r\n}\r\nrouter_conn = ConnectHandler(**dev)\r\nNokiaCMDOutput = router_conn.send_command('''admin show configuration''')\r\nprint (repr(NokiaCMDOutput))\r\nprint (NokiaCMDOutput)\r\nrouter_conn.disconnect()\r\n\r\n\r\nThe output:\r\n\r\n(config-env) root@hyper10:/containerlab/config-env# python3 test.py \r\n---snip---\r\n  isis 0 {\\n            admin-state enable\\n            advertise-passive-only true\\n            advertise-router-capability as\\n            ldp-sync false\\n            ignore-attached-bit true\\n            ipv6-routing native\\n            level-capability 2\\n            router-id 10.1.0.15\\n            system-id 0100.0100.0015\\n            traffic-engineering true\\n            area-address             segment-routing {\\n                admin-state enable\\n                prefix-sid-range {\\n                    global\\n                }\\n            }\\n            interface \"TO_TS11\" {\\n                interface-type point-to-point\\n                level-capability 2\\n            }\\n            interface \"TO_TS12\" {\\n                interface-type point-to-point\\n                level-capability 2\\n            }\\n            interface \"system\" {\\n                passive true\\n  \r\n---snip---\r\n       isis 0 {\r\n            admin-state enable\r\n            advertise-passive-only true\r\n            advertise-router-capability as\r\n            ldp-sync false\r\n            ignore-attached-bit true\r\n            ipv6-routing native\r\n            level-capability 2\r\n            router-id 10.1.0.15\r\n            system-id 0100.0100.0015\r\n            traffic-engineering true\r\n            area-address             segment-routing {\r\n                admin-state enable\r\n                prefix-sid-range {\r\n                    global\r\n                }\r\n            }\r\n\r\nThanks,\r\nSerge\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2659/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2628", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2628/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2628/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2628/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2628", "id": 1110652484, "node_id": "I_kwDOAaBOds5CMzZE", "number": 2628, "title": "Ubiquity Edge Switch is failing on save_config due to the wrong search pattern.", "user": {"login": "DarkPhily", "id": 14162738, "node_id": "MDQ6VXNlcjE0MTYyNzM4", "avatar_url": "https://avatars.githubusercontent.com/u/14162738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DarkPhily", "html_url": "https://github.com/DarkPhily", "followers_url": "https://api.github.com/users/DarkPhily/followers", "following_url": "https://api.github.com/users/DarkPhily/following{/other_user}", "gists_url": "https://api.github.com/users/DarkPhily/gists{/gist_id}", "starred_url": "https://api.github.com/users/DarkPhily/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DarkPhily/subscriptions", "organizations_url": "https://api.github.com/users/DarkPhily/orgs", "repos_url": "https://api.github.com/users/DarkPhily/repos", "events_url": "https://api.github.com/users/DarkPhily/events{/privacy}", "received_events_url": "https://api.github.com/users/DarkPhily/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-01-21T16:14:30Z", "updated_at": "2022-04-13T20:02:49Z", "closed_at": "2022-04-13T20:02:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the method save_config of the class `UbiquitiEdgeSSH` are you waiting for the wrong search pattern.\r\nAt the moment you are expecting `\\(UBNT\\ EdgeSwitch\\)\\ \\#`.\r\n\r\nAfter the command `write memory` the cli print following out:\r\n```\r\nThis operation may take a few minutes.\r\nManagement interfaces will not be available during this time.\r\n\r\nAre you sure you want to save? (y/n) \r\n```\r\n\r\nIt's expecting an additional input.\r\n\r\nThis is how i handle it, maybe you can do it the same way:\r\n```\r\n    def save_config(self):\r\n        try:\r\n            output = self.send_command(command_string=\"write memory\", expect_string=r\"(y/n)\", strip_command=False, strip_prompt=False)\r\n            output += self.send_command(command_string=\"y\", expect_string=r\"#\", strip_command=False, strip_prompt=False)\r\n            return output\r\n        except Exception as e:\r\n            raise e\r\n```", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2628/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2628/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2621", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2621/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2621/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2621/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2621", "id": 1091903048, "node_id": "I_kwDOAaBOds5BFR5I", "number": 2621, "title": "Netmiko code to enter Juniper CLI is not robust enough", "user": {"login": "onlineque", "id": 31256493, "node_id": "MDQ6VXNlcjMxMjU2NDkz", "avatar_url": "https://avatars.githubusercontent.com/u/31256493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/onlineque", "html_url": "https://github.com/onlineque", "followers_url": "https://api.github.com/users/onlineque/followers", "following_url": "https://api.github.com/users/onlineque/following{/other_user}", "gists_url": "https://api.github.com/users/onlineque/gists{/gist_id}", "starred_url": "https://api.github.com/users/onlineque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/onlineque/subscriptions", "organizations_url": "https://api.github.com/users/onlineque/orgs", "repos_url": "https://api.github.com/users/onlineque/repos", "events_url": "https://api.github.com/users/onlineque/events{/privacy}", "received_events_url": "https://api.github.com/users/onlineque/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-01-01T22:08:43Z", "updated_at": "2022-04-14T04:24:40Z", "closed_at": "2022-04-14T04:24:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI am trying to make Netmiko work with my Juniper EX4200-24P device, but I am always getting:\r\n\r\n```Traceback (most recent call last):\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/paramiko/channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/paramiko/buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/netmiko/base_connection.py\", line 573, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/paramiko/channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/tmp/test/pokus.py\", line 23, in <module>\r\n    ssh = ConnectHandler(**juniper)\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/netmiko/ssh_dispatcher.py\", line 326, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/netmiko/juniper/juniper.py\", line 20, in __init__\r\n    return super().__init__(*args, **kwargs)\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/netmiko/base_connection.py\", line 350, in __init__\r\n    self._open()\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/netmiko/base_connection.py\", line 356, in _open\r\n    self._try_session_preparation()\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/netmiko/base_connection.py\", line 792, in _try_session_preparation\r\n    self.session_preparation()\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/netmiko/juniper/juniper.py\", line 26, in session_preparation\r\n    self.set_terminal_width(command=cmd, pattern=r\"Screen width set to\")\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/netmiko/base_connection.py\", line 1131, in set_terminal_width\r\n    output = self.read_until_pattern(pattern=pattern)\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/netmiko/base_connection.py\", line 655, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"/tmp/test/venv/lib/python3.9/site-packages/netmiko/base_connection.py\", line 583, in _read_channel_expect\r\n    raise NetmikoTimeoutException(\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n```\r\nI've tried putting several values for delay_factor, turning off global_cmd_verify, setting max_loops to different values, nothing helped.\r\nI did try to turn on the Netmiko debugging, looks to me it never enters the CLI mode, but I don't understand why. I am perfectly able to run the very same command when I connect with the same user manually via SSH.\r\n\r\nThe code I am trying with:\r\n```\r\nfrom netmiko import ConnectHandler\r\n\r\nimport logging\r\nlogging.basicConfig(filename='test.log', level=logging.DEBUG)\r\nlogger = logging.getLogger(\"netmiko\")\r\n\r\njuniper = {\r\n    'device_type': 'juniper',\r\n    'host': '192.168.100.9',\r\n    'username': 'root',\r\n    'password': '<password here>',\r\n    'global_cmd_verify': False\r\n}\r\n\r\nssh = ConnectHandler(**juniper)\r\nresult = ssh.send_command('show system uptime', delay_factor=5)\r\nprint(result)\r\n\r\n```\r\n\r\nDebug log:\r\n```\r\nDEBUG:paramiko.transport:starting thread (client mode): 0x6c45a2e0\r\nDEBUG:paramiko.transport:Local version/idstring: SSH-2.0-paramiko_2.9.1\r\nDEBUG:paramiko.transport:Remote version/idstring: SSH-2.0-OpenSSH_6.9\r\nINFO:paramiko.transport:Connected (version 2.0, client OpenSSH_6.9)\r\nDEBUG:paramiko.transport:=== Key exchange possibilities ===\r\nDEBUG:paramiko.transport:kex algos: curve25519-sha256@libssh.org, ecdh-sha2-nistp256, ecdh-sha2-nistp384, ecdh-sha2-nistp521, diffie-hellman-group-exchange-sha256, diffie-hellman-group-exchange-sha1, diffie-hellman-group14-sha1, diffie-hellman-group1-sha1\r\nDEBUG:paramiko.transport:server key: ssh-rsa, ssh-dss, ecdsa-sha2-nistp256, ssh-ed25519\r\nDEBUG:paramiko.transport:client encrypt: chacha20-poly1305@openssh.com, aes128-ctr, aes192-ctr, aes256-ctr, aes128-gcm@openssh.com, aes256-gcm@openssh.com, arcfour256, arcfour128, aes128-cbc, 3des-cbc, blowfish-cbc, cast128-cbc, aes192-cbc, aes256-cbc, arcfour, rijndael-cbc@lysator.liu.se\r\nDEBUG:paramiko.transport:server encrypt: chacha20-poly1305@openssh.com, aes128-ctr, aes192-ctr, aes256-ctr, aes128-gcm@openssh.com, aes256-gcm@openssh.com, arcfour256, arcfour128, aes128-cbc, 3des-cbc, blowfish-cbc, cast128-cbc, aes192-cbc, aes256-cbc, arcfour, rijndael-cbc@lysator.liu.se\r\nDEBUG:paramiko.transport:client mac: umac-64-etm@openssh.com, umac-128-etm@openssh.com, hmac-sha2-256-etm@openssh.com, hmac-sha2-512-etm@openssh.com, hmac-sha1-etm@openssh.com, umac-64@openssh.com, umac-128@openssh.com, hmac-sha2-256, hmac-sha2-512, hmac-sha1, hmac-md5-etm@openssh.com, hmac-ripemd160-etm@openssh.com, hmac-sha1-96-etm@openssh.com, hmac-md5-96-etm@openssh.com, hmac-md5, hmac-ripemd160, hmac-ripemd160@openssh.com, hmac-sha1-96, hmac-md5-96\r\nDEBUG:paramiko.transport:server mac: umac-64-etm@openssh.com, umac-128-etm@openssh.com, hmac-sha2-256-etm@openssh.com, hmac-sha2-512-etm@openssh.com, hmac-sha1-etm@openssh.com, umac-64@openssh.com, umac-128@openssh.com, hmac-sha2-256, hmac-sha2-512, hmac-sha1, hmac-md5-etm@openssh.com, hmac-ripemd160-etm@openssh.com, hmac-sha1-96-etm@openssh.com, hmac-md5-96-etm@openssh.com, hmac-md5, hmac-ripemd160, hmac-ripemd160@openssh.com, hmac-sha1-96, hmac-md5-96\r\nDEBUG:paramiko.transport:client compress: none, zlib@openssh.com\r\nDEBUG:paramiko.transport:server compress: none, zlib@openssh.com\r\nDEBUG:paramiko.transport:client lang: <none>\r\nDEBUG:paramiko.transport:server lang: <none>\r\nDEBUG:paramiko.transport:kex follows: False\r\nDEBUG:paramiko.transport:=== Key exchange agreements ===\r\nDEBUG:paramiko.transport:Kex: curve25519-sha256@libssh.org\r\nDEBUG:paramiko.transport:HostKey: ssh-ed25519\r\nDEBUG:paramiko.transport:Cipher: aes128-ctr\r\nDEBUG:paramiko.transport:MAC: hmac-sha2-256\r\nDEBUG:paramiko.transport:Compression: none\r\nDEBUG:paramiko.transport:=== End of kex handshake ===\r\nDEBUG:paramiko.transport:kex engine KexCurve25519 specified hash_algo <built-in function openssl_sha256>\r\nDEBUG:paramiko.transport:Switch to new keys ...\r\nDEBUG:paramiko.transport:Adding ssh-ed25519 host key for 192.168.100.9: b'1c6aaca4a56f19df7bf1d5c00032a6a2'\r\nDEBUG:paramiko.transport:userauth is OK\r\nINFO:paramiko.transport:Authentication (password) successful!\r\nDEBUG:paramiko.transport:[chan 0] Max packet in: 32768 bytes\r\nDEBUG:paramiko.transport:Received global request \"hostkeys-00@openssh.com\"\r\nDEBUG:paramiko.transport:Rejecting \"hostkeys-00@openssh.com\" global request from server.\r\nDEBUG:paramiko.transport:[chan 0] Max packet out: 32768 bytes\r\nDEBUG:paramiko.transport:Secsh channel 0 opened.\r\nDEBUG:paramiko.transport:[chan 0] Sesch channel 0 request ok\r\nDEBUG:paramiko.transport:[chan 0] Sesch channel 0 request ok\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: Last login: Sat Jan  1 22:57:02 2022 from 192.168.100.27\r\n--- JUNOS 15.1R7.9 built 2018-09-11 05:42:39 UTC\r\n\r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: 00;9\r\nH\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: 65H\r\n\r\n\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: [1\r\n000;97H\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: 1H\r\n\r\n\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: [1\r\n000;153H\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: ;\r\n177H\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: 10\r\n00;233H\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: ;2\r\n57H\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\n\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: [10\r\n00;313H\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: 000\r\n;337H\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: 1H\r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: 417\r\nH\r\n\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: H\r\n\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: 00;\r\n473H\r\nEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: H\r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\nDEBUG:netmiko:write_channel: b'set cli screen-width 511\\n'\r\nDEBUG:netmiko:Pattern is: Screen width set to\r\nDEBUG:netmiko:_read_channel_expect read_data: set cli screen-width 511\r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: root@ex4200-24p:RE:0% \r\nDEBUG:netmiko:_read_channel_expect read_data: \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nDEBUG:netmiko:_read_channel_expect read_data: \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: root@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: root@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nDEBUG:netmiko:_read_channel_expect read_data: \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nDEBUG:netmiko:_read_channel_expect read_data: \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: root@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: root@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: root@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nroot@ex4200-24p:RE:0% \r\nDEBUG:netmiko:_read_channel_expect read_data: \r\nroot@ex4200-24p:RE:0% set cli screen-width 511\r\nset: Syntax Error.\r\nroot@ex4200-24p:RE:0% \r\nDEBUG:netmiko:write_channel: b'exit\\n'\r\nDEBUG:paramiko.transport:EOF in transport thread\r\n\r\n```\r\n\r\nThanks a lot for any hint !\r\nVladimir", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2621/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2556", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2556/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2556/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2556/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2556", "id": 1040524145, "node_id": "I_kwDOAaBOds4-BSNx", "number": 2556, "title": "Exception: Incompatible ssh peer (no acceptable host key)", "user": {"login": "luweijun1992", "id": 58923704, "node_id": "MDQ6VXNlcjU4OTIzNzA0", "avatar_url": "https://avatars.githubusercontent.com/u/58923704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luweijun1992", "html_url": "https://github.com/luweijun1992", "followers_url": "https://api.github.com/users/luweijun1992/followers", "following_url": "https://api.github.com/users/luweijun1992/following{/other_user}", "gists_url": "https://api.github.com/users/luweijun1992/gists{/gist_id}", "starred_url": "https://api.github.com/users/luweijun1992/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luweijun1992/subscriptions", "organizations_url": "https://api.github.com/users/luweijun1992/orgs", "repos_url": "https://api.github.com/users/luweijun1992/repos", "events_url": "https://api.github.com/users/luweijun1992/events{/privacy}", "received_events_url": "https://api.github.com/users/luweijun1992/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-10-31T16:47:48Z", "updated_at": "2022-10-07T22:26:19Z", "closed_at": "2022-10-07T22:26:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "netmiko            3.4.0\r\n\r\n@ktbyers Please help me see why I can't connect to the device\r\n---\r\nException: Incompatible ssh peer (no acceptable host key)\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Master\\AppData\\Roaming\\Python\\Python39\\site-packages\\paramiko\\transport.py\", line 2083, in run\r\n    self._handler_table[ptype](self, m)\r\n  File \"C:\\Users\\Master\\AppData\\Roaming\\Python\\Python39\\site-packages\\paramiko\\transport.py\", line 2198, in _negotiate_keys\r\n    self._parse_kex_init(m)\r\n  File \"C:\\Users\\Master\\AppData\\Roaming\\Python\\Python39\\site-packages\\paramiko\\transport.py\", line 2377, in _parse_kex_init\r\n    raise SSHException(\r\nparamiko.ssh_exception.SSHException: Incompatible ssh peer (no acceptable host key)", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2556/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2556/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2550", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2550/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2550/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2550/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2550", "id": 1036066140, "node_id": "I_kwDOAaBOds49wR1c", "number": 2550, "title": "Non-ASCII character in switch output causes script termination", "user": {"login": "luigirosa", "id": 1075822, "node_id": "MDQ6VXNlcjEwNzU4MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1075822?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luigirosa", "html_url": "https://github.com/luigirosa", "followers_url": "https://api.github.com/users/luigirosa/followers", "following_url": "https://api.github.com/users/luigirosa/following{/other_user}", "gists_url": "https://api.github.com/users/luigirosa/gists{/gist_id}", "starred_url": "https://api.github.com/users/luigirosa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luigirosa/subscriptions", "organizations_url": "https://api.github.com/users/luigirosa/orgs", "repos_url": "https://api.github.com/users/luigirosa/repos", "events_url": "https://api.github.com/users/luigirosa/events{/privacy}", "received_events_url": "https://api.github.com/users/luigirosa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-10-26T09:36:59Z", "updated_at": "2021-10-27T06:18:51Z", "closed_at": "2021-10-26T21:20:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Given this script:\r\n\r\n```\r\nnet_connect = ConnectHandler(device_type=\"aruba_os\",host=x,username=x,password=x,session_log=row\"file.txt\")\r\nnet_connect.send_command_timing(\"show tech\", strip_prompt=False, strip_command=False, delay_factor=20)\r\n```\r\n\r\nIf the output of sh tech contains this\r\n\r\n```\r\nW 10/19/21 13:23:21 00419 auth: ST2-CMDR: Invalid user name/password on CONSOLE\r\n            session User '\u00f9' is trying to login from 0.0.0.0\r\nI 10/19/21 13:23:27 03362 auth: ST2-CMDR: User 'unknown' logged in from 0.0.0.0\r\n\r\n```\r\n\r\nThe script stops with this error\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\x\\confdump.py\", line 14, in <module>\r\n    net_connect.send_command_timing(\"show tech\", strip_prompt=False, strip_command=False, delay_factor=20)\r\n  File \"C:\\x\\utilities.py\", line 500, in wrapper_decorator\r\n    return func(self, *args, **kwargs)\r\n  File \"C:\\x\\base_connection.py\", line 1318, in send_command_timing\r\n    output += self._read_channel_timing(\r\n  File \"C:\\x\\base_connection.py\", line 635, in _read_channel_timing\r\n    new_data = self.read_channel()\r\n  File \"C:\\x\\base_connection.py\", line 526, in read_channel\r\n    output = self._read_channel()\r\n  File \"C:\\x\\base_connection.py\", line 518, in _read_channel\r\n    self._write_session_log(output)\r\n  File \"C:\\x\\base_connection.py\", line 448, in _write_session_log\r\n    self.session_log.write(self.normalize_linefeeds(data))\r\nUnicodeEncodeError: 'ascii' codec can't encode character '\\xf9' in position 3455: ordinal not in range(128)\r\n```\r\n\r\nNeedless to say \\xf9 is the code of \u00f9\r\n\r\nPyton version: Python 3.9.7 (tags/v3.9.7:1016ef3, Aug 30 2021, 20:19:38) [MSC v.1929 64 bit (AMD64)]\r\nOS: Windows 2019\r\npip list:\r\n```\r\nPackage       Version\r\n------------- -------\r\nbcrypt        3.2.0\r\ncffi          1.15.0\r\ncryptography  35.0.0\r\nfuture        0.18.2\r\nnetmiko       3.4.0\r\nntc-templates 2.3.2\r\nparamiko      2.8.0\r\npip           21.3.1\r\npycparser     2.20\r\nPyNaCl        1.4.0\r\npyserial      3.5\r\nscp           0.14.1\r\nsetuptools    57.4.0\r\nsix           1.16.0\r\ntenacity      8.0.1\r\ntextfsm       1.1.2\r\n\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2550/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2550/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2479", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2479/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2479/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2479/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2479", "id": 993678796, "node_id": "MDU6SXNzdWU5OTM2Nzg3OTY=", "number": 2479, "title": "Huawei driver is sending an \"N\" regardless of whether password change prompt is present or not.", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-10T23:42:12Z", "updated_at": "2022-04-13T22:45:57Z", "closed_at": "2022-04-13T22:45:57Z", "author_association": "OWNER", "active_lock_reason": null, "body": null, "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2479/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2473", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2473/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2473/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2473/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2473", "id": 990166035, "node_id": "MDU6SXNzdWU5OTAxNjYwMzU=", "number": 2473, "title": "global_cmd_verify is not disabling cmd_verify in send_config_set", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-09-07T16:43:04Z", "updated_at": "2021-11-02T21:52:16Z", "closed_at": "2021-11-02T21:52:16Z", "author_association": "OWNER", "active_lock_reason": null, "body": null, "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2473/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2473/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2343", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2343/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2343/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2343/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2343", "id": 932022204, "node_id": "MDU6SXNzdWU5MzIwMjIyMDQ=", "number": 2343, "title": "IOS-XR performance issues in Netmiko 3.4.0 and later.", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-06-28T21:52:26Z", "updated_at": "2021-07-01T18:39:28Z", "closed_at": "2021-07-01T18:39:28Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2343/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2343/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2139", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2139/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2139/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2139/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2139", "id": 802357154, "node_id": "MDU6SXNzdWU4MDIzNTcxNTQ=", "number": 2139, "title": "Cisco ASA connect failure when device is already in enable mode after login", "user": {"login": "mrkcmo", "id": 32075075, "node_id": "MDQ6VXNlcjMyMDc1MDc1", "avatar_url": "https://avatars.githubusercontent.com/u/32075075?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrkcmo", "html_url": "https://github.com/mrkcmo", "followers_url": "https://api.github.com/users/mrkcmo/followers", "following_url": "https://api.github.com/users/mrkcmo/following{/other_user}", "gists_url": "https://api.github.com/users/mrkcmo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrkcmo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrkcmo/subscriptions", "organizations_url": "https://api.github.com/users/mrkcmo/orgs", "repos_url": "https://api.github.com/users/mrkcmo/repos", "events_url": "https://api.github.com/users/mrkcmo/events{/privacy}", "received_events_url": "https://api.github.com/users/mrkcmo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2021-02-05T17:48:41Z", "updated_at": "2021-03-16T21:50:45Z", "closed_at": "2021-03-16T21:50:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Works in version 3.1.0 and breaks in version 3.3.0.\r\n\r\nIf the device is not in enable mode at login then it works correctly and goes into enable mode allowing the script to continue.\r\n\r\nIf the device drops to enable mode at login (aaa authorization exec LOCAL auto-enable) then we get the below traceback at login using 3.3.0 but not with 3.1.0.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/paramiko/channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"/usr/local/lib/python3.6/site-packages/paramiko/buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py\", line 569, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"/usr/local/lib/python3.6/site-packages/paramiko/channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py\", line 1680, in enable\r\n    pattern=pattern, re_flags=re_flags\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py\", line 669, in read_until_prompt_or_pattern\r\n    return self._read_channel_expect(combined_pattern, re_flags=re_flags)\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py\", line 580, in _read_channel_expect\r\n    \"Timed-out reading channel, data not available.\"\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"vpn_stats.py\", line 313, in <module>\r\n    vpnstats()\r\n  File \"vpn_stats.py\", line 308, in vpnstats\r\n    vpn_sess_obj.updateVpnSessionStats()\r\n  File \"vpn_stats.py\", line 235, in updateVpnSessionStats\r\n    cmd_out = self.__ciscoSessions(fw[X].strip())\r\n  File \"vpn_stats.py\", line 138, in __ciscoSessions\r\n    secret=self.password)\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/ssh_dispatcher.py\", line 315, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/cisco/cisco_asa_ssh.py\", line 15, in __init__\r\n    return super().__init__(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py\", line 346, in __init__\r\n    self._open()\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py\", line 352, in _open\r\n    self._try_session_preparation()\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py\", line 788, in _try_session_preparation\r\n    self.session_preparation()\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/cisco/cisco_asa_ssh.py\", line 35, in session_preparation\r\n    self.enable()\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/cisco/cisco_asa_ssh.py\", line 28, in enable\r\n    cmd=cmd, pattern=pattern, enable_pattern=enable_pattern, re_flags=re_flags\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/cisco_base_connection.py\", line 25, in enable\r\n    cmd=cmd, pattern=pattern, enable_pattern=enable_pattern, re_flags=re_flags\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py\", line 1690, in enable\r\n    raise ValueError(msg)\r\nValueError: Failed to enter enable mode. Please ensure you pass the 'secret' argument to ConnectHandler.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2139/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2139/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2113", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2113/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2113/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2113/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2113", "id": 786001891, "node_id": "MDU6SXNzdWU3ODYwMDE4OTE=", "number": 2113, "title": "Cisco ios: do not send enable password if not required", "user": {"login": "icovada", "id": 796056, "node_id": "MDQ6VXNlcjc5NjA1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/796056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icovada", "html_url": "https://github.com/icovada", "followers_url": "https://api.github.com/users/icovada/followers", "following_url": "https://api.github.com/users/icovada/following{/other_user}", "gists_url": "https://api.github.com/users/icovada/gists{/gist_id}", "starred_url": "https://api.github.com/users/icovada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icovada/subscriptions", "organizations_url": "https://api.github.com/users/icovada/orgs", "repos_url": "https://api.github.com/users/icovada/repos", "events_url": "https://api.github.com/users/icovada/events{/privacy}", "received_events_url": "https://api.github.com/users/icovada/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-01-14T13:46:51Z", "updated_at": "2021-02-21T14:22:07Z", "closed_at": "2021-02-21T14:22:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Netmiko sends the enable password right after sending the \"enable\" command without verifying if the password is actually needed. Without `no ip domain-lookup` the timeout expires and the command fails\r\n\r\nDebug logs:\r\n\r\n```\r\nworker_1  | DEBUG:netmiko:Pattern found: Switch \r\nworker_1  | Switch>\r\nworker_1  | DEBUG:netmiko:write_channel: b'enable\\r\\n'\r\nworker_1  | DEBUG:netmiko:Pattern is: (Switch|ssword)\r\nworker_1  | DEBUG:netmiko:read_channel: \r\nworker_1  | DEBUG:netmiko:read_channel: enable\r\nworker_1  | Switch#\r\nworker_1  | DEBUG:netmiko:Pattern found: (Switch|ssword) enable\r\nworker_1  | Switch#\r\nworker_1  | DEBUG:netmiko:write_channel: b'cisco\\r\\n'\r\nworker_1  | DEBUG:netmiko:Pattern is: Switch\r\nworker_1  | DEBUG:netmiko:read_channel: \r\nworker_1  | DEBUG:netmiko:read_channel: cisco\r\nworker_1  | Translating \"cisco\"...domain server (255.255.255.255)\r\nworker_1  | DEBUG:netmiko:read_channel: \r\n```", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2113/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2113/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2048", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2048/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2048/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2048/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2048", "id": 747369884, "node_id": "MDU6SXNzdWU3NDczNjk4ODQ=", "number": 2048, "title": "python 3.9 fails on check for pip installed ntc-templates due to incorrect use of importlib.resources", "user": {"login": "Ivanjin-king", "id": 57515369, "node_id": "MDQ6VXNlcjU3NTE1MzY5", "avatar_url": "https://avatars.githubusercontent.com/u/57515369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ivanjin-king", "html_url": "https://github.com/Ivanjin-king", "followers_url": "https://api.github.com/users/Ivanjin-king/followers", "following_url": "https://api.github.com/users/Ivanjin-king/following{/other_user}", "gists_url": "https://api.github.com/users/Ivanjin-king/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ivanjin-king/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ivanjin-king/subscriptions", "organizations_url": "https://api.github.com/users/Ivanjin-king/orgs", "repos_url": "https://api.github.com/users/Ivanjin-king/repos", "events_url": "https://api.github.com/users/Ivanjin-king/events{/privacy}", "received_events_url": "https://api.github.com/users/Ivanjin-king/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-11-20T10:23:46Z", "updated_at": "2021-06-19T17:47:43Z", "closed_at": "2021-06-19T17:47:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "I got stuck with textfsm when having a new python3.9 IDE environment. Everything is working fine with python 3.8 env. It's working fine when deleting 'use_textfsm = True'. Did I miss something? Note that the environment variable was set correctly.\r\nexport NET_TEXTFSM=/home/ntc-templates/templates/, the ntc-templates is installed at home directory.\r\nThe following is the output message.\r\n#################################\r\nTraceback (most recent call last):\r\n  File \"/root/PycharmProjects/Network-Automation/01-Function/Cisco_connectHandler.py\", line 21, in <module>\r\n    ios_device_tracking = net_connect.send_command(\"show cdp neigh\", **use_textfsm=True**)\r\n  File \"/root/PycharmProjects/Cisco-UCS-Monitoring/env/lib/python3.9/site-packages/netmiko/utilities.py\", line 429, in wrapper_decorator\r\n    return func(self, *args, **kwargs)\r\n  File \"/root/PycharmProjects/Cisco-UCS-Monitoring/env/lib/python3.9/site-packages/netmiko/base_connection.py\", line 1538, in send_command\r\n    structured_output = get_structured_data(\r\n  File \"/root/PycharmProjects/Cisco-UCS-Monitoring/env/lib/python3.9/site-packages/netmiko/utilities.py\", line 340, in get_structured_data\r\n    template_dir = get_template_dir()\r\n  File \"/root/PycharmProjects/Cisco-UCS-Monitoring/env/lib/python3.9/site-packages/netmiko/utilities.py\", line 277, in get_template_dir\r\n    with importresources_path(\r\n  File \"/opt/python39/lib/python3.9/contextlib.py\", line 117, in __enter__\r\n    return next(self.gen)\r\n  File \"/opt/python39/lib/python3.9/importlib/resources.py\", line 175, in _path_from_reader\r\n    opener_reader = reader.open_resource(norm_resource)\r\n  File \"<frozen importlib._bootstrap_external>\", line 995, in open_resource\r\n**IsADirectoryError: [Errno 21] Is a directory: '/root/PycharmProjects/Cisco-UCS-Monitoring/env/lib/python3.9/site-packages/ntc_templates/templates'**\r\n\r\nProcess finished with exit code 1", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2048/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2048/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2014", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2014/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2014/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2014/events", "html_url": "https://github.com/ktbyers/netmiko/issues/2014", "id": 725830132, "node_id": "MDU6SXNzdWU3MjU4MzAxMzI=", "number": 2014, "title": "Dell os10 switch fails ssh autodetect", "user": {"login": "sregister", "id": 1515124, "node_id": "MDQ6VXNlcjE1MTUxMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1515124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sregister", "html_url": "https://github.com/sregister", "followers_url": "https://api.github.com/users/sregister/followers", "following_url": "https://api.github.com/users/sregister/following{/other_user}", "gists_url": "https://api.github.com/users/sregister/gists{/gist_id}", "starred_url": "https://api.github.com/users/sregister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sregister/subscriptions", "organizations_url": "https://api.github.com/users/sregister/orgs", "repos_url": "https://api.github.com/users/sregister/repos", "events_url": "https://api.github.com/users/sregister/events{/privacy}", "received_events_url": "https://api.github.com/users/sregister/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-10-20T18:16:01Z", "updated_at": "2020-11-07T04:58:10Z", "closed_at": "2020-11-07T04:58:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi--I'm seeing an issue with SSHDetect.autodetect() on a few dell os10 switches.\r\n\r\nExample code: \r\n```#!/usr/bin/env python\r\nfrom netmiko import SSHDetect, ConnectHandler\r\nfrom getpass import getpass\r\n\r\ndevice = {\r\n    \"device_type\": \"autodetect\",\r\n    \"host\": \"switch_ip\",\r\n    \"username\": \"admin\",\r\n    \"password\": getpass(),\r\n}\r\n\r\nguesser = SSHDetect(**device)\r\nbest_match = guesser.autodetect()\r\nprint(best_match)  # Name of the best device_type to use further\r\n```\r\n\r\nIf switch_ip is an os9 switch best_match is `dell_os9`; if its an os10 switch I get `None`. Here is a the full `show version` output I see when I manually ssh into the os10 switch:\r\n```switch1# show version\r\nDell EMC Networking OS10 Enterprise\r\nCopyright (c) 1999-2019 by Dell Inc. All Rights Reserved.\r\nOS Version: 10.5.0.0P1\r\nBuild Version: 10.5.0.0P1.342\r\nBuild Time: 2019-08-12T22:06:43+0000\r\nSystem Type: Z9332F-ON\r\nArchitecture: x86_64\r\nUp Time: 5 weeks 5 days 20:55:31\r\n```\r\n\r\nI'm not sure exactly at which level this is breaking; I'll update if I find out anything more. ", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/2014/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/2014/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1987", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1987/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1987/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1987/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1987", "id": 713945002, "node_id": "MDU6SXNzdWU3MTM5NDUwMDI=", "number": 1987, "title": "cryptography 3.1 library breaks tplink drivers", "user": {"login": "melewitz", "id": 14969286, "node_id": "MDQ6VXNlcjE0OTY5Mjg2", "avatar_url": "https://avatars.githubusercontent.com/u/14969286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/melewitz", "html_url": "https://github.com/melewitz", "followers_url": "https://api.github.com/users/melewitz/followers", "following_url": "https://api.github.com/users/melewitz/following{/other_user}", "gists_url": "https://api.github.com/users/melewitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/melewitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/melewitz/subscriptions", "organizations_url": "https://api.github.com/users/melewitz/orgs", "repos_url": "https://api.github.com/users/melewitz/repos", "events_url": "https://api.github.com/users/melewitz/events{/privacy}", "received_events_url": "https://api.github.com/users/melewitz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-10-02T23:05:05Z", "updated_at": "2020-11-17T14:43:13Z", "closed_at": "2020-11-17T14:43:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've just updated to netmiko 3.3.2 from 3.3.0, and paramiko 2.7.2 before and after the netmiko upgrade.  My custom ssh driver worked fine with netmiko 3.3.0. The stack trace is interesting for a couple reasons:\r\n\r\nThe actual error \"AttributeError: module 'cryptography.utils' has no attribute 'bit_length'\".  Looking back through the stack trace, there's a \"raise e\" from paramiko/transport.py line 660 in start_client().  The reported error is the actual exception raised at that point.\r\n\r\nI don't get how the code goes from raising that exception and ends up in the new tplink driver.\r\n\r\nI think I've installed all the latest module versions using pip to recreate the environment.\r\n\r\nDebugging ideas are much appreciated!\r\n\r\n```\r\nTraceback (most recent call last):\r\n(...deleted portion of stack trace...)\r\n\u00a0File \"/usr/local/lib/python3.6/site-packages/netmiko/ssh_dispatcher.py, line 324, in ConnectHandler\r\n\u00a0\u00a0 return ConnectionClass(*args, **kwargs)\r\n\u00a0File \"/usr/local/lib/python3.6/site-packages/netmiko/<vendor>/<driverfile>, line 189, in __init__\r\n\u00a0\u00a0 self.client.connect(self.host, port=22, username=self.username, password=self.password, look_for_keys=False, timeout=self.timeout)\r\n\u00a0File \"/usr/local/lib/python3.6/site-packages/paramiko/client.py, line 406, in connect\r\n\u00a0\u00a0 t.start_client(timeout=timeout)\r\n\u00a0File \"/usr/local/lib/python3.6/site-packages/paramiko/transport.py, line 660, in start_client\r\n\u00a0\u00a0 raise e\r\n\u00a0File \"/usr/local/lib/python3.6/site-packages/paramiko/transport.py, line 2075, in run\r\n\u00a0\u00a0 self.kex_engine.parse_next(ptype, m)\r\n\u00a0File \"/usr/local/lib/python3.6/site-packages/paramiko/kex_group1.py line 75, in parse_next\r\n\u00a0\u00a0 return self._parse_kexdh_reply(m)\r\n\u00a0File \"/usr/local/lib/python3.6/site-packages/paramiko/kex_group1.py line 120, in _parse_kexdh_reply\r\n\u00a0\u00a0 self.transport._verify_key(host_key, sig)\r\n\u00a0File \"/usr/local/lib/python3.6/site-packages/paramiko/transport.py, line 1886, in _verify_key\r\n\u00a0\u00a0 if not key.verify_ssh_sig(self.H, Message(sig)):\r\n\u00a0File \"/usr/local/lib/python3.6/site-packages/paramiko/dsskey.py, line 153, in verify_ssh_sig\r\n\u00a0\u00a0 ).public_key(backend=default_backend())\r\n\u00a0File \"/usr/local/lib64/python3.6/site-packages/cryptography/hazmat/primitives/asymmetric/dsa.py, line 212, in public_key\r\n\u00a0\u00a0 return backend.load_dsa_public_numbers(self)\r\n\u00a0File \"/usr/local/lib64/python3.6/site-packages/cryptography/hazmat/backends/openssl/backend.py, line 873, in load_dsa_public_numbers\r\n\u00a0\u00a0 dsa._check_dsa_parameters(numbers.parameter_numbers)\r\n\u00a0File \"/usr/local/lib/python3.6/site-packages/netmiko/tplink/tplink_jetstream.py, line 145, in _override_check_dsa_parameters\r\n\u00a0\u00a0 if crypto_utils.bit_length(parameters.q) not in [160, 256]:\r\nAttributeError: module 'cryptography.utils' has no attribute 'bit_length'\r\n```", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1987/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1987/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1956", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1956/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1956/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1956/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1956", "id": 707370442, "node_id": "MDU6SXNzdWU3MDczNzA0NDI=", "number": 1956, "title": "mikrotik_routeros incomplete output", "user": {"login": "tverhoef", "id": 17884095, "node_id": "MDQ6VXNlcjE3ODg0MDk1", "avatar_url": "https://avatars.githubusercontent.com/u/17884095?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tverhoef", "html_url": "https://github.com/tverhoef", "followers_url": "https://api.github.com/users/tverhoef/followers", "following_url": "https://api.github.com/users/tverhoef/following{/other_user}", "gists_url": "https://api.github.com/users/tverhoef/gists{/gist_id}", "starred_url": "https://api.github.com/users/tverhoef/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tverhoef/subscriptions", "organizations_url": "https://api.github.com/users/tverhoef/orgs", "repos_url": "https://api.github.com/users/tverhoef/repos", "events_url": "https://api.github.com/users/tverhoef/events{/privacy}", "received_events_url": "https://api.github.com/users/tverhoef/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2020-09-23T13:32:13Z", "updated_at": "2021-07-09T02:42:11Z", "closed_at": "2021-07-09T02:42:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I'm working on automating a mixture of devices and ran into issues. Using a minimal testscript I found the mikrotik to behave differently. I tried:\r\n\r\n```\r\ndef testcmd(ipaddr, devicetype, MyCmd):\r\n   DeviceInfo = {\r\n            'device_type': devicetype,\r\n            'host':       ipaddr,\r\n            'username':   \"admin\",\r\n            'password':   \"admin\",\r\n            'global_cmd_verify':False\r\n    }         \r\n    net_connect = ConnectHandler(**DeviceInfo)\r\n    output = net_connect.send_command(MyCmd)\r\n    net_connect.disconnect()\r\n    print(\"{\" + output + \"}\\n\")\r\n\r\n\r\ntestcmd(\"192.168.73.20\", \"mikrotik_routeros\", \"export\")\r\ntestcmd(\"192.168.37.30\", \"hp_procurve\",       \"sh run\")\r\n\r\n```\r\nwhich gave an incomplete result for routeros (yes, tried against multiple devices)\r\n\r\n> {port\r\n> \r\n> \\# sep/23/2020 15:12:36 by RouterOS 6.46.7\r\n> \\#\r\n> \\# model = RB750Gr3\r\n> /interface wireless security-profiles\r\n> set [ find default=yes ] supplicant-identity=MikroTik\r\n> /ip hotspot profile\r\n> set [ find default=yes ] html-directory=flash/hotspot\r\n> }\r\n> \r\n> {\r\n> Running configuration:\r\n> \r\n> ; J9019B Configuration Editor; Created on release #Q.11.74\r\n> \r\n> hostname \"ProCurve Switch 2510B-24\" \r\n> snmp-server contact \"helpdesk\" \r\n> snmp-server location \"Lab\" \r\n> trunk 23-24 Trk1 LACP \r\n> vlan 1 \r\n>    name \"DEFAULT_VLAN\" \r\n>    untagged 1-22,25-26,Trk1 \r\n>    ip address dhcp-bootp \r\n>    exit \r\n> ip authorized-managers 192.168.1.0 255.255.255.0 \r\n> aaa authentication login privilege-mode \r\n> aaa authentication console login radius local \r\n> aaa authentication telnet login radius local \r\n> aaa authentication telnet enable radius local \r\n> aaa authentication web login radius local \r\n> aaa authentication ssh login radius local \r\n> aaa authentication ssh enable radius local \r\n> radius-server timeout 2\r\n> spanning-tree\r\n> spanning-tree Trk1 priority 4\r\n> ip ssh\r\n> password manager\r\n> password operator\r\n> }\r\n> \r\n\r\nNext step I tried:\r\n\r\n```\r\ndef testcmd(ipaddr, devicetype, MyCmd):\r\n   DeviceInfo = {\r\n            'device_type': devicetype,\r\n            'host':       ipaddr,\r\n            'username':   \"admin\",\r\n            'password':   \"admin\",\r\n            'global_cmd_verify':False\r\n    }         \r\n    net_connect = ConnectHandler(**DeviceInfo)\r\n    if devicetype == \"mikrotik_routeros\":    \r\n        output = net_connect.send_command_timing(MyCmd)\r\n    else:\r\n        output = net_connect.send_command(MyCmd)\r\n    net_connect.disconnect()\r\n    print(\"{\" + output + \"}\\n\")\r\n\r\n\r\ntestcmd(\"192.168.73.20\", \"mikrotik_routeros\", \"export\")\r\ntestcmd(\"192.168.37.30\", \"hp_procurve\",       \"sh run\")\r\n```\r\nwhich gave the result I expected in the first place\r\n\r\n> {\\# sep/23/2020 15:13:33 by RouterOS 6.46.7\r\n> \\#\r\n> \\# model = RB750Gr3\r\n> /interface wireless security-profiles\r\n> set [ find default=yes ] supplicant-identity=MikroTik\r\n> /ip hotspot profile\r\n> set [ find default=yes ] html-directory=flash/hotspot\r\n> /ip neighbor discovery-settings\r\n> set discover-interface-list=!dynamic\r\n> /ip dhcp-client\r\n> add disabled=no interface=ether5\r\n> /ip service\r\n> set telnet disabled=yes\r\n> set ftp disabled=yes\r\n> set api disabled=yes\r\n> set api-ssl disabled=yes\r\n> /ip ssh\r\n> set forwarding-enabled=remote strong-crypto=yes\r\n> /snmp\r\n> set enabled=yes\r\n> /system clock\r\n> set time-zone-name=Europe/Stockholm\r\n> /system logging\r\n> add action=remote topics=critical\r\n> add action=remote topics=error\r\n> add action=remote topics=info\r\n> add action=remote topics=warning\r\n> /system routerboard settings\r\n> set silent-boot=yes\r\n> /tool graphing interface\r\n> add\r\n> /tool graphing queue\r\n> add\r\n> /tool graphing resource\r\n> add\r\n> /tool romon\r\n> set enabled=yes\r\n> /user aaa\r\n> set use-radius=yes\r\n> \r\n> \r\n> \r\n> }\r\n> \r\n> {\r\n> Running configuration:\r\n> \r\n> ; J9019B Configuration Editor; Created on release #Q.11.74\r\n> \r\n> hostname \"ProCurve Switch 2510B-24\" \r\n> snmp-server contact \"helpdesk\" \r\n> snmp-server location \"Lab\" \r\n> trunk 23-24 Trk1 LACP \r\n> vlan 1 \r\n>    name \"DEFAULT_VLAN\" \r\n>    untagged 1-22,25-26,Trk1 \r\n>    ip address dhcp-bootp \r\n>    exit \r\n> ip authorized-managers 192.168.1.0 255.255.255.0 \r\n> aaa authentication login privilege-mode \r\n> aaa authentication console login radius local \r\n> aaa authentication telnet login radius local \r\n> aaa authentication telnet enable radius local \r\n> aaa authentication web login radius local \r\n> aaa authentication ssh login radius local \r\n> aaa authentication ssh enable radius local \r\n> radius-server timeout 2\r\n> spanning-tree\r\n> spanning-tree Trk1 priority 4\r\n> ip ssh\r\n> password manager\r\n> password operator\r\n> }\r\n\r\nIs this expected? a bug? programmer error? \r\nAny suggestions or ideas?\r\n\r\n//Tonny", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1956/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1956/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1931", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1931/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1931/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1931/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1931", "id": 697364339, "node_id": "MDU6SXNzdWU2OTczNjQzMzk=", "number": 1931, "title": "UnicodeEncodeError write error in session_log (when unicode data is read in and then written to the session_log)", "user": {"login": "rb3123", "id": 70209085, "node_id": "MDQ6VXNlcjcwMjA5MDg1", "avatar_url": "https://avatars.githubusercontent.com/u/70209085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rb3123", "html_url": "https://github.com/rb3123", "followers_url": "https://api.github.com/users/rb3123/followers", "following_url": "https://api.github.com/users/rb3123/following{/other_user}", "gists_url": "https://api.github.com/users/rb3123/gists{/gist_id}", "starred_url": "https://api.github.com/users/rb3123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rb3123/subscriptions", "organizations_url": "https://api.github.com/users/rb3123/orgs", "repos_url": "https://api.github.com/users/rb3123/repos", "events_url": "https://api.github.com/users/rb3123/events{/privacy}", "received_events_url": "https://api.github.com/users/rb3123/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-09-10T03:11:38Z", "updated_at": "2020-12-04T14:02:27Z", "closed_at": "2020-09-12T05:45:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi @ktbyers \r\n\r\nNot sure why but some or my older scripts are running into UnicodeEncodeError : \"'ascii' codec can't encode character '\\xe3' in position 45774: ordinal not in range(128)\". Snippet of code below\r\n\r\n`deviceinfo = {'device_type': 'cisco_wlc', 'ip': wlcipadd, 'username': username, 'password': password, 'banner_timeout': 16, 'global_delay_factor': 4, 'session_log':filename}\r\n\r\ndevice = netmiko.ConnectHandler(**deviceinfo)\r\n\r\nop = device.send_command_timing(\"show ap summary\", use_textfsm=False)`", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1931/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1771", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1771/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1771/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1771/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1771", "id": 629827155, "node_id": "MDU6SXNzdWU2Mjk4MjcxNTU=", "number": 1771, "title": "default terminal height too high", "user": {"login": "roku6000", "id": 66356267, "node_id": "MDQ6VXNlcjY2MzU2MjY3", "avatar_url": "https://avatars.githubusercontent.com/u/66356267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roku6000", "html_url": "https://github.com/roku6000", "followers_url": "https://api.github.com/users/roku6000/followers", "following_url": "https://api.github.com/users/roku6000/following{/other_user}", "gists_url": "https://api.github.com/users/roku6000/gists{/gist_id}", "starred_url": "https://api.github.com/users/roku6000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roku6000/subscriptions", "organizations_url": "https://api.github.com/users/roku6000/orgs", "repos_url": "https://api.github.com/users/roku6000/repos", "events_url": "https://api.github.com/users/roku6000/events{/privacy}", "received_events_url": "https://api.github.com/users/roku6000/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-03T09:06:11Z", "updated_at": "2021-01-30T14:14:47Z", "closed_at": "2021-01-30T14:09:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Since netmiko 3.1.1, the default terminal width and height are set. ([c205dce](https://github.com/ktbyers/netmiko/commit/c205dce6f4aaf10ac68023f705528fc745a48c76))\r\n(width: 511, height: 1000)\r\n\r\nI think the default terminal height should be set to 511.\r\nIOS/IOS-XR supports terminal height up to 512. (NX-OS: 511)\r\n<pre>\r\nRP/0/RP0/CPU0:TEST-XR#terminal length ?\r\n  <0-512>  Number of lines on screen (0 for no pausing).\r\n</pre>\r\nIf the terminal height is set to 513 or higher in IOS-XR, the following log will be output.\r\n<pre>\r\nSSHD_[68086]: %SECURITY-SSHD-3-ERR_ERRNO : Failed to set window size: %s 'tty-infra' detected the 'fatal' condition 'An invalid operation has been requested'\r\n</pre>\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1771/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1771/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1708", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1708/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1708/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1708/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1708", "id": 609784611, "node_id": "MDU6SXNzdWU2MDk3ODQ2MTE=", "number": 1708, "title": "send_config_set not working with IOS XR due to abbreviated \"config term\" command on IOS-XR 7.0 code", "user": {"login": "fadisaqal", "id": 27928938, "node_id": "MDQ6VXNlcjI3OTI4OTM4", "avatar_url": "https://avatars.githubusercontent.com/u/27928938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fadisaqal", "html_url": "https://github.com/fadisaqal", "followers_url": "https://api.github.com/users/fadisaqal/followers", "following_url": "https://api.github.com/users/fadisaqal/following{/other_user}", "gists_url": "https://api.github.com/users/fadisaqal/gists{/gist_id}", "starred_url": "https://api.github.com/users/fadisaqal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fadisaqal/subscriptions", "organizations_url": "https://api.github.com/users/fadisaqal/orgs", "repos_url": "https://api.github.com/users/fadisaqal/repos", "events_url": "https://api.github.com/users/fadisaqal/events{/privacy}", "received_events_url": "https://api.github.com/users/fadisaqal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 34, "created_at": "2020-04-30T10:08:09Z", "updated_at": "2021-12-30T21:53:24Z", "closed_at": "2020-05-21T17:45:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nsend_config_set is not working when dealing with IOS XR (7.0.1) send_command is working but the send_config_set is timing out.\r\n\r\ndevice_type is set to 'cisco_xr'\r\n\r\noutput: \r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 550, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\paramiko\\channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"myUserDirectory\\PycharmProjects\\untitled\\NetmikoIOS.py\", line 26, in <module>\r\n    output = net_connect.send_config_set(config_commands)\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\cisco\\cisco_xr.py\", line 19, in send_config_set\r\n    return super().send_config_set(\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1728, in send_config_set\r\n    output += self.config_mode(*cfg_mode_args)\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 40, in config_mode\r\n    return super().config_mode(config_command=config_command, pattern=pattern)\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 1621, in config_mode\r\n    output += self.read_until_pattern(pattern=re.escape(config_command.strip()))\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 627, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"myUserDirectory\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\netmiko\\base_connection.py\", line 560, in _read_channel_expect\r\n    raise NetmikoTimeoutException(\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n\r\nProcess finished with exit code 1\r\n\r\n```\r\n\r\nThanks", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1708/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1708/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1667", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1667/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1667/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1667/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1667", "id": 600354435, "node_id": "MDU6SXNzdWU2MDAzNTQ0MzU=", "number": 1667, "title": "Changing hostname on juniper devices fails on commit", "user": {"login": "alistairmackenzie", "id": 6127298, "node_id": "MDQ6VXNlcjYxMjcyOTg=", "avatar_url": "https://avatars.githubusercontent.com/u/6127298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alistairmackenzie", "html_url": "https://github.com/alistairmackenzie", "followers_url": "https://api.github.com/users/alistairmackenzie/followers", "following_url": "https://api.github.com/users/alistairmackenzie/following{/other_user}", "gists_url": "https://api.github.com/users/alistairmackenzie/gists{/gist_id}", "starred_url": "https://api.github.com/users/alistairmackenzie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alistairmackenzie/subscriptions", "organizations_url": "https://api.github.com/users/alistairmackenzie/orgs", "repos_url": "https://api.github.com/users/alistairmackenzie/repos", "events_url": "https://api.github.com/users/alistairmackenzie/events{/privacy}", "received_events_url": "https://api.github.com/users/alistairmackenzie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-15T14:46:38Z", "updated_at": "2023-04-27T03:26:34Z", "closed_at": "2023-04-27T03:26:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Relevant code:\r\n\r\n```\r\njconn = ConnectHandler(**juniper_junos)\r\n\r\nprint ('Logged into {} ------------'.format(juniper_junos['ip']))\r\n\r\ncmds = ['set system host-name sw01-lon.example.com']\r\n\r\noutput = jconn.send_config_set(cmds, exit_config_mode=False)\r\nprint(output)\r\n\r\noutput = jconn.commit(and_quit=True)\r\nprint(output)\r\n```\r\n\r\nOutput:\r\n\r\n```\r\nLogged into 172.20.5.10 ------------\r\nconfigureset system host-name sw01-lon.example.com \r\n\r\n{master:0}[edit]\r\nalistair@test2# \r\n\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"change-host.py\", line 35, in <module>\r\n    output = jconn.commit(and_quit=True)\r\n  File \"/usr/local/lib/python3.7/dist-packages/netmiko/juniper/juniper.py\", line 183, in commit\r\n    delay_factor=delay_factor,\r\n  File \"/usr/local/lib/python3.7/dist-packages/netmiko/base_connection.py\", line 1470, in send_command_expect\r\n    return self.send_command(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/dist-packages/netmiko/utilities.py\", line 347, in wrapper_decorator\r\n    return func(self, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/dist-packages/netmiko/base_connection.py\", line 1430, in send_command\r\n    search_pattern\r\nOSError: Search pattern never detected in send_command_expect: alistair@test2\r\n```\r\n\r\nDebug log output:\r\n\r\n```\r\nDEBUG:paramiko.transport:starting thread (client mode): 0xfb3399b0\r\nDEBUG:paramiko.transport:Local version/idstring: SSH-2.0-paramiko_2.7.1\r\nDEBUG:paramiko.transport:Remote version/idstring: SSH-2.0-OpenSSH_6.0\r\nINFO:paramiko.transport:Connected (version 2.0, client OpenSSH_6.0)\r\nDEBUG:paramiko.transport:kex algos:['ecdh-sha2-nistp256', 'ecdh-sha2-nistp384', 'ecdh-sha2-nistp521', 'diffie-hellman-group-exchange-sha256', 'diffie-hellman-group-exchange-sha1', 'diffie-hellman-group14-sha1', 'diffie-hellman-group1-sha1'] server key:['ssh-rsa', 'ssh-dss', 'ecdsa-sha2-nistp256'] client encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'arcfour256', 'arcfour128', 'aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'aes192-cbc', 'aes256-cbc', 'arcfour', 'rijndael-cbc@lysator.liu.se'] server encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'arcfour256', 'arcfour128', 'aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'aes192-cbc', 'aes256-cbc', 'arcfour', 'rijndael-cbc@lysator.liu.se'] client mac:['hmac-md5', 'hmac-sha1', 'umac-64@openssh.com', 'hmac-sha2-256', 'hmac-sha2-256-96', 'hmac-sha2-512', 'hmac-sha2-512-96', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] server mac:['hmac-md5', 'hmac-sha1', 'umac-64@openssh.com', 'hmac-sha2-256', 'hmac-sha2-256-96', 'hmac-sha2-512', 'hmac-sha2-512-96', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] client compress:['none', 'zlib@openssh.com'] server compress:['none', 'zlib@openssh.com'] client lang:[''] server lang:[''] kex follows?False\r\nDEBUG:paramiko.transport:Kex agreed: ecdh-sha2-nistp256\r\nDEBUG:paramiko.transport:HostKey agreed: ecdsa-sha2-nistp256\r\nDEBUG:paramiko.transport:Cipher agreed: aes128-ctr\r\nDEBUG:paramiko.transport:MAC agreed: hmac-sha2-256\r\nDEBUG:paramiko.transport:Compression agreed: none\r\nDEBUG:paramiko.transport:kex engine KexNistp256 specified hash_algo <built-in function openssl_sha256>\r\nDEBUG:paramiko.transport:Switch to new keys ...\r\nDEBUG:paramiko.transport:Adding ecdsa-sha2-nistp256 host key for 172.20.5.10: b'0587fff71c0fd96a4c0dadc09ff705c6'\r\nDEBUG:paramiko.transport:userauth is OK\r\nINFO:paramiko.transport:Authentication (password) successful!\r\nDEBUG:paramiko.transport:[chan 0] Max packet in: 32768 bytes\r\nDEBUG:paramiko.transport:[chan 0] Max packet out: 32768 bytes\r\nDEBUG:paramiko.transport:Secsh channel 0 opened.\r\nDEBUG:paramiko.transport:[chan 0] Sesch channel 0 request ok\r\nDEBUG:paramiko.transport:[chan 0] Sesch channel 0 request ok\r\nDEBUG:netmiko:read_channel: --- JUNOS 12.3R12-S12 built 2018-12-28 12:54:45 UTC\r\n{master:0}\r\nalistair@test2> \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\n{master:0}\r\nalistair@test2> \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\n{master:0}\r\nalistair@test2> \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:[find_prompt()]: prompt is alistair@test2>\r\nDEBUG:netmiko:write_channel: b'set cli complete-on-space off\\n'\r\nDEBUG:netmiko:read_channel: set cli complete-on-space off \r\nDisabling complete-on-space\r\n\r\n{master:0}\r\nalistair@test2> \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:In disable_paging\r\nDEBUG:netmiko:Command: set cli screen-length 0\r\n\r\nDEBUG:netmiko:write_channel: b'set cli screen-length 0\\n'\r\nDEBUG:netmiko:Pattern is: set\\ cli\\ screen\\-length\\ 0\r\nDEBUG:netmiko:_read_channel_expect read_data: set\r\nDEBUG:netmiko:_read_channel_expect read_data:  cli screen-length 0 \r\nScreen length set to 0\r\n\r\n{master:0}\r\nalistair@test2> \r\nDEBUG:netmiko:Pattern found: set\\ cli\\ screen\\-length\\ 0 set cli screen-length 0 \r\nScreen length set to 0\r\n\r\n{master:0}\r\nalistair@test2> \r\nDEBUG:netmiko:set cli screen-length 0 \r\nScreen length set to 0\r\n\r\n{master:0}\r\nalistair@test2> \r\nDEBUG:netmiko:Exiting disable_paging\r\nDEBUG:netmiko:write_channel: b'set cli screen-width 511\\n'\r\nDEBUG:netmiko:Pattern is: set\\ cli\\ screen\\-width\\ 511\r\nDEBUG:netmiko:_read_channel_expect read_data: set\r\nDEBUG:netmiko:_read_channel_expect read_data:  cli screen-width 511 \r\nScreen width set to 511\r\n\r\n{master:0}\r\nalistair@test2> \r\nDEBUG:netmiko:Pattern found: set\\ cli\\ screen\\-width\\ 511 set cli screen-width 511 \r\nScreen width set to 511\r\n\r\n{master:0}\r\nalistair@test2> \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\n{master:0}\r\nalistair@test2> \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'configure\\n'\r\nDEBUG:netmiko:Pattern is: configure\r\nDEBUG:netmiko:_read_channel_expect read_data: configure\r\nDEBUG:netmiko:Pattern found: configure configure\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel:  \r\n\r\nEntering configuration mode\r\n\r\n{master:0}[edit]\r\nalistair@test2# \r\n\r\n{master:0}[edit]\r\nalistair@test2# \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'set system host-name sw01-lon.example.com \\n'\r\nDEBUG:netmiko:Pattern is: set\\ system\\ host\\-name\\ sw01\\-lon\\.example\\.com \r\nDEBUG:netmiko:_read_channel_expect read_data: set\r\nDEBUG:netmiko:_read_channel_expect read_data:  system host-name sw01-lon.example.com  \r\n\r\n{master:0}[edit]\r\nalistair@test2# \r\nDEBUG:netmiko:Pattern found: set\\ system\\ host\\-name\\ sw01\\-lon\\.example\\.com  set system host-name sw01-lon.example.com  \r\n\r\n{master:0}[edit]\r\nalistair@test2# \r\nDEBUG:netmiko:configureset system host-name sw01-lon.example.com  \r\n\r\n{master:0}[edit]\r\nalistair@test2# \r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel: \r\n\r\n{master:0}[edit]\r\nalistair@test2# \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:write_channel: b'commit and-quit\\n'\r\nDEBUG:netmiko:Pattern is: commit\\ and\\-quit\r\nDEBUG:netmiko:_read_channel_expect read_data: c\r\nDEBUG:netmiko:_read_channel_expect read_data: ommit and-quit \r\n\r\nDEBUG:netmiko:Pattern found: commit\\ and\\-quit commit and-quit \r\n\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: configuration check succeeds\r\n\r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: commit complete\r\nExiting configuration mode\r\n\r\nDEBUG:netmiko:read_channel: \r\n{master:0}\r\nalistair@sw01-lon.example.com > \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\nDEBUG:netmiko:read_channel: \r\n```", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1667/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1667/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1603", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1603/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1603/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1603/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1603", "id": 576069221, "node_id": "MDU6SXNzdWU1NzYwNjkyMjE=", "number": 1603, "title": "Huawei has ANSI escape codes in the output that need stripped (on long commands)", "user": {"login": "stvnkem", "id": 61822499, "node_id": "MDQ6VXNlcjYxODIyNDk5", "avatar_url": "https://avatars.githubusercontent.com/u/61822499?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stvnkem", "html_url": "https://github.com/stvnkem", "followers_url": "https://api.github.com/users/stvnkem/followers", "following_url": "https://api.github.com/users/stvnkem/following{/other_user}", "gists_url": "https://api.github.com/users/stvnkem/gists{/gist_id}", "starred_url": "https://api.github.com/users/stvnkem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stvnkem/subscriptions", "organizations_url": "https://api.github.com/users/stvnkem/orgs", "repos_url": "https://api.github.com/users/stvnkem/repos", "events_url": "https://api.github.com/users/stvnkem/events{/privacy}", "received_events_url": "https://api.github.com/users/stvnkem/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 28, "created_at": "2020-03-05T08:14:30Z", "updated_at": "2020-03-18T19:35:02Z", "closed_at": "2020-03-18T19:35:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dears,\r\n\r\nI use threading to check 50-500 devices at the same time. I had a lot of exception when the returned output was only the timestamp or only the (expected)prompt which should be ommitted by default.\r\n\r\nI have added some extra check to my function to send commands on a very reliable way.\r\nIt seems that checking whether the returned output type is List, when TextFSM is turned on.\r\n\r\nHowever, I have met 1 exception that I do not know why it happened.\r\nThe returned output was a list, but only with 1 line (expected 3) and the key values were all empty.\r\nRunning the script again returns the expected output. Probably, I could add another check, if the output is list, I could check if the keys are not empty, but sometimes an empty key is a valid output.\r\n\r\nHow do I know why TextFSM(or Netmiko) failed in this particular case. I have not tried to reproduce it. The check ran for 2280 devices, only this case returned a partially empty output, but in the correct List structure.\r\n\r\nWARNING :: 2020-03-04 17:38:23,477 :: 197 :: Thread-2854 ::  def_send_single_cmd_txtfsm :: Sending \"display isis peer verbose | exclude Eth-Trunk10\" command to masked_device_name.\r\nWARNING :: 2020-03-04 17:38:25,402 :: 235 :: Thread-2854 ::  def_send_single_cmd_txtfsm :: Recording the output: display isis peer verbose | exclude Eth-Trunk10 | masked_device_name | [{'isisinterface': 'Vlanif4060', 'isisuptimeh': '', 'isisuptimem': ''}]\r\nCRITICAL :: 2020-03-04 17:38:26,891 :: 24 :: Thread-2854 ::  _Def_Log_Exceptions :: Unhandled exception: Traceback (most recent call last):\r\n  File \"hcheck_tre.py\", line 42, in run\r\n    run_old(*args, **kwargs)\r\n  File \"/opt/rh/rh-python36/root/usr/lib64/python3.6/threading.py\", line 864, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"hcheck_tre.py\", line 1625, in ssh_session\r\n    ztpL2AL_list): PIMNeiCount, ISISNeiCount, ISISUpTimeStatus = def_pim_n_isis_nei_count_nal(ssh_session, hostname)\r\n  File \"hcheck_tre.py\", line 708, in def_pim_n_isis_nei_count_nal\r\n    if def_isis_peer_uptime(line, ISIS_Peer_Uptime_Hours):\r\n  File \"hcheck_tre.py\", line 312, in def_isis_peer_uptime\r\n    if int(line['isisuptimeh']) > minisisuptimeh:\r\nValueError: invalid literal for int() with base 10: ''\r\n\r\nThe correct output is:\r\n[{'isisinterface': 'Vlanif4060', 'isisuptimeh': '5573', 'isisuptimem': '40'},\r\n{'isisinterface': 'Eth-Trunk1', 'isisuptimeh': '5573', 'isisuptimem': '40'},\r\n{'isisinterface': 'Eth-Trunk3', 'isisuptimeh': '5574', 'isisuptimem': '03'}]\r\n\r\nThanks!\r\n\r\nPS:\r\nIn General I could check if the keys are empty, but sometimes it is a valid output, so I would need to check per command basis.\r\n\r\nHowever, the number of expected lines can vary per device (EG: if one of the peer is missing due to failure, there will never be 3 lines).", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1603/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1531", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1531/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1531/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1531/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1531", "id": 555312779, "node_id": "MDU6SXNzdWU1NTUzMTI3Nzk=", "number": 1531, "title": "Banner and Cisco IOS fail when cmd_verify=True", "user": {"login": "chriseizus", "id": 32366398, "node_id": "MDQ6VXNlcjMyMzY2Mzk4", "avatar_url": "https://avatars.githubusercontent.com/u/32366398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chriseizus", "html_url": "https://github.com/chriseizus", "followers_url": "https://api.github.com/users/chriseizus/followers", "following_url": "https://api.github.com/users/chriseizus/following{/other_user}", "gists_url": "https://api.github.com/users/chriseizus/gists{/gist_id}", "starred_url": "https://api.github.com/users/chriseizus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chriseizus/subscriptions", "organizations_url": "https://api.github.com/users/chriseizus/orgs", "repos_url": "https://api.github.com/users/chriseizus/repos", "events_url": "https://api.github.com/users/chriseizus/events{/privacy}", "received_events_url": "https://api.github.com/users/chriseizus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-01-27T00:36:26Z", "updated_at": "2021-11-02T21:53:02Z", "closed_at": "2021-11-02T21:53:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm having following code to push cisco ios banner to the device.\r\nAfter upgrade to 3.0, it no longer works. It works fine when switch back to 2.4.2\r\n\r\nException: <class 'netmiko.ssh_exception.NetmikoTimeoutException'>: Timed-out reading channel, data not available.\r\n\r\nI guess it is due to the new expect mechanism in send_config_set since when configuring multi line banner, the device_name# won't be returned yet until the last line of the banner applied.\r\n\r\nHere is the code, please advise any solution.\r\n\r\n\r\nios_device = {\r\n    'device_type': 'cisco_ios',\r\n    'ip': \"192.168.0.1\",\r\n    'username': \"admin\",\r\n    'password': \"cisco\",\r\n    'secret': \"cisco\"\r\n}\r\n\r\nnet_connect = None\r\n\r\nnet_connect = ConnectHandler(**ios_device)\r\n\r\nbanner = [\r\n    \"banner login ^\",\r\n    \"This is login banner\",\r\n    \"^\"\r\n]\r\n\r\nnet_connect.enable()    # I'm using priviledge level 15 so enable is not really an issue\r\nnet_connect.send_config_set(banner)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1531/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1531/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1530", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1530/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1530/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1530/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1530", "id": 554063044, "node_id": "MDU6SXNzdWU1NTQwNjMwNDQ=", "number": 1530, "title": "Huawei repaints line twice for long lines breaking command echo verification in Netmiko 3.0", "user": {"login": "thatguyjoshua", "id": 43115778, "node_id": "MDQ6VXNlcjQzMTE1Nzc4", "avatar_url": "https://avatars.githubusercontent.com/u/43115778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thatguyjoshua", "html_url": "https://github.com/thatguyjoshua", "followers_url": "https://api.github.com/users/thatguyjoshua/followers", "following_url": "https://api.github.com/users/thatguyjoshua/following{/other_user}", "gists_url": "https://api.github.com/users/thatguyjoshua/gists{/gist_id}", "starred_url": "https://api.github.com/users/thatguyjoshua/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thatguyjoshua/subscriptions", "organizations_url": "https://api.github.com/users/thatguyjoshua/orgs", "repos_url": "https://api.github.com/users/thatguyjoshua/repos", "events_url": "https://api.github.com/users/thatguyjoshua/events{/privacy}", "received_events_url": "https://api.github.com/users/thatguyjoshua/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-01-23T10:17:59Z", "updated_at": "2022-05-23T22:41:53Z", "closed_at": "2022-05-23T22:41:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Netmiko is hanging despite the data it's expecting being present. Debug and Traceback below. The device type is huawei\r\n\r\n```\r\n<Huawei>\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel:\r\n<Huawei>\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:write_channel: b'system-view\\n'\r\nDEBUG:netmiko:Pattern is: system\\-view\r\nDEBUG:netmiko:_read_channel_expect read_data: system-view\r\nEnter system view, return user view with Ctrl+Z.\r\n[Huawei]\r\nDEBUG:netmiko:Pattern found: system\\-view system-view\r\nEnter system view, return user view with Ctrl+Z.\r\n[Huawei]\r\nDEBUG:netmiko:write_channel: b'\\n'\r\nDEBUG:netmiko:read_channel:\r\n[Huawei]\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:read_channel:\r\nDEBUG:netmiko:write_channel: b'ip route-static 0.0.0.0 0.0.0.0 10.161.206.148 permanent\\n'\r\nDEBUG:netmiko:Pattern is: ip\\ route\\-static\\ 0\\.0\\.0\\.0\\ 0\\.0\\.0\\.0\\ 10\\.161\\.206\\.148\\ permanent\r\nDEBUG:netmiko:_read_channel_expect read_data: ip route-static 0.0.0.0 0.0.0.0 10.161.206.148 permanent\r\nDEBUG:netmiko:Pattern found: ip\\ route\\-static\\ 0\\.0\\.0\\.0\\ 0\\.0\\.0\\.0\\ 10\\.161\\.206\\.148\\ permanent ip route-static 0.0.0.0 0.0.0.0 10.161.206.148 permanent\r\nDEBUG:netmiko:Pattern is: (?:Huawei|#)\r\nDEBUG:netmiko:_read_channel_expect read_data:\r\n[Huawei]\r\nDEBUG:netmiko:Pattern found: (?:Huawei|#)\r\n[Huawei]\r\nDEBUG:netmiko:write_channel: b'interface Vlanif1\\n'\r\nDEBUG:netmiko:Pattern is: interface\\ Vlanif1\r\nDEBUG:netmiko:_read_channel_expect read_data: interface Vlanif\r\nJan 23 2020 06:09:58+00:00 Huawei %%01RM/4/IPV4_DEFT_RT_CHG(l)[0]:IPV4 default Rou\r\nDEBUG:netmiko:_read_channel_expect read_data: te is changed. (ChangeType=Add, InstanceId=0, Protocol=Static, ExitIf=NULL0, Nexthop=0.0.0.0, Neighb\r\nDEBUG:netmiko:_read_channel_expect read_data: our=0.0.0.0, Preference=60, Label=NULL, Metric=0)\r\n[Huawei]interface Vlanif1\r\n[Huawei-Vlanif1]\r\nDEBUG:netmiko:Pattern found: interface\\ Vlanif1 interface Vlanif\r\nJan 23 2020 06:09:58+00:00 Huawei %%01RM/4/IPV4_DEFT_RT_CHG(l)[0]:IPV4 default Route is changed. (ChangeType=Add, InstanceId=0, Protocol=Static, ExitIf=NULL0, Nexthop=0.0.0.0, Neighbour=0.0.0.0, Preference=60, Label=NULL, Metric=0)\r\n[Huawei]interface Vlanif1\r\n[Huawei-Vlanif1]\r\nDEBUG:netmiko:write_channel: b'ip address 10.161.206.149 255.255.255.111\\n'\r\nDEBUG:netmiko:Pattern is: ip\\ address\\ 10\\.161\\.206\\.149\\ 255\\.255\\.255\\.111\r\nDEBUG:netmiko:_read_channel_expect read_data: ip address 10.161.206.149 255.255.255.111\r\nDEBUG:netmiko:Pattern found: ip\\ address\\ 10\\.161\\.206\\.149\\ 255\\.255\\.255\\.111 ip address 10.161.206.149 255.255.255.111\r\nDEBUG:netmiko:Pattern is: (?:Huawei|#)\r\nDEBUG:netmiko:_read_channel_expect read_data:\r\nInfo: IP pool on this interface has been deleted.\r\nDEBUG:netmiko:_read_channel_expect read_data:\r\nWarning: Please be cautious when using the IP address with 31-bit mask on non-P2P interfaces.\r\n[Hu\r\nDEBUG:netmiko:_read_channel_expect read_data: awei-Vlanif1]\r\n\r\nAssert at File: adp_ipv4_arp_io.c, Line: 2268. CallStack:\r\n <-- 0x2fa78d8(0x2fa78d8\r\nDEBUG:netmiko:Pattern found: (?:Huawei|#)\r\nInfo: IP pool on this interface has been deleted.\r\nWarning: Please be cautious when using the IP address with 31-bit mask on non-P2P interfaces.\r\n[Huawei-Vlanif1]\r\n\r\nAssert at File: adp_ipv4_arp_io.c, Line: 2268. CallStack:\r\n <-- 0x2fa78d8(0x2fa78d8\r\nDEBUG:netmiko:write_channel: b'interface range GigabitEthernet0/0/0 to GigabitEthernet0/0/3\\n'\r\nDEBUG:netmiko:Pattern is: interface\\ range\\ GigabitEthernet0/0/0\\ to\\ GigabitEthernet0/0/3\r\nDEBUG:netmiko:_read_channel_expect read_data: ) <-- 0x5dcde18(0x5dcde18)\r\n <-- 0x5d1b9c4(0x5d1b9c4) <-- 0x5d1bb3c(0x5d1bb3c)\r\n <-- 0x5d1be68(0x5d1\r\nDEBUG:netmiko:_read_channel_expect read_data: be68) <-- 0x5d2b660(0x5d2b660)\r\n <-- 0x301eab4(0x301eab4) <-- 0x2fa4604(0x2fa4604)\r\n <-- 0xb465fdbc(\r\nDEBUG:netmiko:_read_channel_expect read_data: 0xb465fdbc) <-- 0xb4643080(0xb4643080)\r\n <-- 0xa6d1b644(0xa6d1b644) <-- 0xb30ac320(0xb30ac320)\r\n<Tas\r\nDEBUG:netmiko:_read_channel_expect read_data: kID: 88> [2020.01.23 06:09:58.975]\r\n\r\n\r\nAssert at File: adp_ipv4_fib_mb.c, Line: 3349. CallStack:\r\n\r\nDEBUG:netmiko:_read_channel_expect read_data: <-- 0x2fa78d8(0x2fa78d8) <-- 0x5d1ba00(0x5d1ba00)\r\n <-- 0x5d1bb3c(0x5d1bb3c) <-- 0x5d1be68(0x5d1be68\r\nDEBUG:netmiko:_read_channel_expect read_data: )\r\n <-- 0x5d2b660(0x5d2b660) <-- 0x301eab4(0x301eab4)\r\n <-- 0x2fa4604(0x2fa4604) <-- 0xb465fdbc(0xb4\r\nDEBUG:netmiko:_read_channel_expect read_data: 65fdbc)\r\n <-- 0xb4643080(0xb4643080) <-- 0xa6d1b644(0xa6d1b644)\r\n <-- 0xb30ac320(0xb30ac320)\r\n<TaskI\r\nDEBUG:netmiko:_read_channel_expect read_data: D: 88> [2020.01.23 06:09:58.975]\r\n\r\n\r\nAssert at File: adp_ipv4_fib_mb.c, Line: 3406. CallStack:\r\n <-\r\nDEBUG:netmiko:_read_channel_expect read_data: - 0x2fa78d8(0x2fa78d8) <-- 0x5d1bb58(0x5d1bb58)\r\n <-- 0x5d1be68(0x5d1be68) <-- 0x5d2b660(0x5d2b660)\r\nDEBUG:netmiko:_read_channel_expect read_data:\r\n <-- 0x301eab4(0x301eab4) <-- 0x2fa4604(0x2fa4604)\r\n <-- 0xb465fdbc(0xb465fdbc) <-- 0xb4643080(0xb4\r\nDEBUG:netmiko:_read_channel_expect read_data: 643080)\r\n <-- 0xa6d1b644(0xa6d1b644) <-- 0xb30ac320(0xb30ac320)\r\n<TaskID: 88> [2020.01.23 06:09:58.9\r\nDEBUG:netmiko:_read_channel_expect read_data: 75]\r\n\r\nJan 23 2020 06:09:58+00:00 Huawei %%01RM/4/ROUTERID_CHANGE(l)[1]:The router ID is 0.0.0.0. (I\r\nDEBUG:netmiko:_read_channel_expect read_data: nstanceID=0)\r\n[Huawei-Vlanif1]interface range GigabitEthernet0\r\nJan 23 2020 06:09:58+00:00 Huawei %\r\nDEBUG:netmiko:_read_channel_expect read_data: %01RM/4/ROUTERID_CHANGE(l)[2]:The router ID is 10.161.206.149. (InstanceID=0)\r\n[Huawei-Vlanif1]inte\r\nDEBUG:netmiko:_read_channel_expect read_data: rface range GigabitEthernet0/0/0 to GigabitEthernet0/0/3\r\n[Huawei-port-group]\r\nDEBUG:netmiko:Pattern found: interface\\ range\\ GigabitEthernet0/0/0\\ to\\ GigabitEthernet0/0/3 ) <-- 0x5dcde18(0x5dcde18)\r\n <-- 0x5d1b9c4(0x5d1b9c4) <-- 0x5d1bb3c(0x5d1bb3c)\r\n <-- 0x5d1be68(0x5d1be68) <-- 0x5d2b660(0x5d2b660)\r\n <-- 0x301eab4(0x301eab4) <-- 0x2fa4604(0x2fa4604)\r\n <-- 0xb465fdbc(0xb465fdbc) <-- 0xb4643080(0xb4643080)\r\n <-- 0xa6d1b644(0xa6d1b644) <-- 0xb30ac320(0xb30ac320)\r\n<TaskID: 88> [2020.01.23 06:09:58.975]\r\n\r\n\r\nAssert at File: adp_ipv4_fib_mb.c, Line: 3349. CallStack:\r\n <-- 0x2fa78d8(0x2fa78d8) <-- 0x5d1ba00(0x5d1ba00)\r\n <-- 0x5d1bb3c(0x5d1bb3c) <-- 0x5d1be68(0x5d1be68)\r\n <-- 0x5d2b660(0x5d2b660) <-- 0x301eab4(0x301eab4)\r\n <-- 0x2fa4604(0x2fa4604) <-- 0xb465fdbc(0xb465fdbc)\r\n <-- 0xb4643080(0xb4643080) <-- 0xa6d1b644(0xa6d1b644)\r\n <-- 0xb30ac320(0xb30ac320)\r\n<TaskID: 88> [2020.01.23 06:09:58.975]\r\n\r\n\r\nAssert at File: adp_ipv4_fib_mb.c, Line: 3406. CallStack:\r\n <-- 0x2fa78d8(0x2fa78d8) <-- 0x5d1bb58(0x5d1bb58)\r\n <-- 0x5d1be68(0x5d1be68) <-- 0x5d2b660(0x5d2b660)\r\n <-- 0x301eab4(0x301eab4) <-- 0x2fa4604(0x2fa4604)\r\n <-- 0xb465fdbc(0xb465fdbc) <-- 0xb4643080(0xb4643080)\r\n <-- 0xa6d1b644(0xa6d1b644) <-- 0xb30ac320(0xb30ac320)\r\n<TaskID: 88> [2020.01.23 06:09:58.975]\r\n\r\nJan 23 2020 06:09:58+00:00 Huawei %%01RM/4/ROUTERID_CHANGE(l)[1]:The router ID is 0.0.0.0. (InstanceID=0)\r\n[Huawei-Vlanif1]interface range GigabitEthernet0\r\nJan 23 2020 06:09:58+00:00 Huawei %%01RM/4/ROUTERID_CHANGE(l)[2]:The router ID is 10.161.206.149. (InstanceID=0)\r\n[Huawei-Vlanif1]interface range GigabitEthernet0/0/0 to GigabitEthernet0/0/3\r\n[Huawei-port-group]\r\nDEBUG:netmiko:write_channel: b'port link-type access\\n'\r\nDEBUG:netmiko:Pattern is: port\\ link\\-type\\ access\r\nDEBUG:netmiko:_read_channel_expect read_data: port link-type access\r\n[Huawei-GigabitEthernet0/0/0]port link-type access\r\nDEBUG:netmiko:Pattern found: port\\ link\\-type\\ access port link-type access\r\n[Huawei-GigabitEthernet0/0/0]port link-type access\r\nDEBUG:netmiko:write_channel: b'port default vlan 1\\n'\r\nDEBUG:netmiko:Pattern is: port\\ default\\ vlan\\ 1\r\nDEBUG:netmiko:_read_channel_expect read_data:\r\n[Huawei-GigabitEthernet0/0/1]port link-type access\r\n[Huawei-GigabitEthernet0/0/2]port link-type ac\r\nDEBUG:netmiko:_read_channel_expect read_data: cess\r\n[Huawei-GigabitEthernet0/0/3]port link-type access\r\n[Huawei-port-group]port default vlan 1\r\n[H\r\nDEBUG:netmiko:Pattern found: port\\ default\\ vlan\\ 1\r\n[Huawei-GigabitEthernet0/0/1]port link-type access\r\n[Huawei-GigabitEthernet0/0/2]port link-type access\r\n[Huawei-GigabitEthernet0/0/3]port link-type access\r\n[Huawei-port-group]port default vlan 1\r\n[H\r\nDEBUG:netmiko:write_channel: b'quit\\n'\r\nDEBUG:netmiko:Pattern is: quit\r\nDEBUG:netmiko:_read_channel_expect read_data: uawei-GigabitEthernet0/0/0]port default vlan 1\r\n[Huawei-GigabitEthernet0/0/1]port default vlan 1\r\n[H\r\nDEBUG:netmiko:_read_channel_expect read_data: uawei-GigabitEthernet0/0/2]port default vlan 1\r\n[Huawei-GigabitEthernet0/0/3]port default vlan 1\r\n[H\r\nDEBUG:netmiko:_read_channel_expect read_data: uawei-port-group]quit\r\n[Huawei]\r\n[Huawei]\r\nDEBUG:netmiko:Pattern found: quit uawei-GigabitEthernet0/0/0]port default vlan 1\r\n[Huawei-GigabitEthernet0/0/1]port default vlan 1\r\n[Huawei-GigabitEthernet0/0/2]port default vlan 1\r\n[Huawei-GigabitEthernet0/0/3]port default vlan 1\r\n[Huawei-port-group]quit\r\n[Huawei]\r\n[Huawei]\r\nDEBUG:netmiko:write_channel: b'hwtacacs-server template company\\n'\r\nDEBUG:netmiko:Pattern is: hwtacacs\\-server\\ template\\ company\r\nDEBUG:netmiko:_read_channel_expect read_data: hwtacacs-server template company\r\nDEBUG:netmiko:Pattern found: hwtacacs\\-server\\ template\\ company hwtacacs-server template company\r\nDEBUG:netmiko:Pattern is: (?:Huawei|#)\r\nDEBUG:netmiko:_read_channel_expect read_data:\r\nInfo: Create a new HWTACACS-server template.\r\n[Huawei-hwtacacs-company]\r\nDEBUG:netmiko:Pattern found: (?:Huawei|#)\r\nInfo: Create a new HWTACACS-server template.\r\n[Huawei-hwtacacs-company]\r\nDEBUG:netmiko:write_channel: b'hwtacacs-server authentication 10.111.111.112\\n'\r\nDEBUG:netmiko:Pattern is: hwtacacs\\-server\\ authentication\\ 10\\.111\\.111\\.112\r\nDEBUG:netmiko:_read_channel_expect read_data: hwtacacs-server authentication 10.111.111.112\r\nDEBUG:netmiko:Pattern found: hwtacacs\\-server\\ authentication\\ 10\\.111\\.111\\.112 hwtacacs-server authentication 10.111.111.112\r\nDEBUG:netmiko:Pattern is: (?:Huawei|#)\r\nDEBUG:netmiko:_read_channel_expect read_data:\r\n[Huawei-hwtacacs-company]\r\nDEBUG:netmiko:Pattern found: (?:Huawei|#)\r\n[Huawei-hwtacacs-company]\r\nDEBUG:netmiko:write_channel: b'hwtacacs-server authentication 10.111.128.112 secondary\\n'\r\nDEBUG:netmiko:Pattern is: hwtacacs\\-server\\ authentication\\ 10\\.111\\.128\\.112\\ secondary\r\nDEBUG:netmiko:_read_channel_expect read_data: hwtacacs-server authentication 10.111.128.112 secondary\r\n[Huawei-hwtacacs-company]\r\n`\r\n\r\n\r\n`Traceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/site-packages/paramiko/channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"/usr/local/lib/python3.8/site-packages/paramiko/buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/site-packages/netmiko/base_connection.py\", line 541, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"/usr/local/lib/python3.8/site-packages/paramiko/channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"router_build_loop.py\", line 124, in <module>\r\n    main(terminal_server_ip, terminal_server_line, db_output)\r\n  File \"/root/building_devices/enable_mgmnt.py\", line 476, in main\r\n    huawei_enable_mgmnt(net_connect, db_output)\r\n  File \"/root/building_devices/enable_mgmnt.py\", line 111, in huawei_enable_mgmnt\r\n    net_connect.send_config_set(config_commands=command_list)\r\n  File \"/usr/local/lib/python3.8/site-packages/netmiko/base_connection.py\", line 1726, in send_config_set\r\n    new_output = self.read_until_pattern(pattern=re.escape(cmd.strip()))\r\n  File \"/usr/local/lib/python3.8/site-packages/netmiko/base_connection.py\", line 618, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/netmiko/base_connection.py\", line 551, in _read_channel_expect\r\n    raise NetmikoTimeoutException(\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n```", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1530/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1530/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1509", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1509/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1509/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1509/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1509", "id": 547870740, "node_id": "MDU6SXNzdWU1NDc4NzA3NDA=", "number": 1509, "title": "aruba_ssh devices inconsistent use of space in check_config_mode", "user": {"login": "Giri-ctrl", "id": 59720650, "node_id": "MDQ6VXNlcjU5NzIwNjUw", "avatar_url": "https://avatars.githubusercontent.com/u/59720650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Giri-ctrl", "html_url": "https://github.com/Giri-ctrl", "followers_url": "https://api.github.com/users/Giri-ctrl/followers", "following_url": "https://api.github.com/users/Giri-ctrl/following{/other_user}", "gists_url": "https://api.github.com/users/Giri-ctrl/gists{/gist_id}", "starred_url": "https://api.github.com/users/Giri-ctrl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Giri-ctrl/subscriptions", "organizations_url": "https://api.github.com/users/Giri-ctrl/orgs", "repos_url": "https://api.github.com/users/Giri-ctrl/repos", "events_url": "https://api.github.com/users/Giri-ctrl/events{/privacy}", "received_events_url": "https://api.github.com/users/Giri-ctrl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-01-10T05:17:00Z", "updated_at": "2021-10-26T21:42:19Z", "closed_at": "2021-10-26T21:42:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "please find the code below\r\n#! /usr/bin/env python\r\nfrom netmiko import ConnectHandler\r\nimport getpass,sys,time,os\r\nimport logging\r\nlogging.basicConfig(filename='test.log', level=logging.DEBUG)\r\nlogger = logging.getLogger(\"netmiko\")\r\n\r\ndevice = {\r\n'device_type': 'aruba_os',\r\n'ip': '11.1.1.2',\r\n'username': 'admin',\r\n'password': '',\r\n}\r\n\r\nprint(\"Script for SSH to device\")\r\nconfigfile_shut = open(\"configfile.txt\")\r\nconfigset = configfile_shut.read()\r\nconfigfile_shut.close()\r\nconfigfile_noshut = open(\"configfile_noshut.txt\")\r\nconfigset1 = configfile_noshut.read()\r\nconfigfile_noshut.close()\r\nprint(\"\\n\\nConnecting Device \")\r\nnet_connect = ConnectHandler(**device)\r\ntime.sleep(2)\r\nfor i in range(1,40):\r\n        print(\"Passing configuration set, shutting down the lag interface\\n\")\r\n        net_connect.enable()\r\n        net_connect.send_config_set(configset)\r\n        print(\"Sleeping for 120 seconds\")\r\n        time.sleep(float(120))\r\n        print(\"Passing configuration set, bringing up the lag interface\\n\")\r\n        net_connect.send_config_set(configset1)\r\n        print(\"Completed lag shut down cycle: %d\" %i)\r\nprint(\"Complted lag shut and no shut saga\")\r\n\r\nconfig_file is output is as shown below:\r\nconfigure terminal\r\ninterface lag 2\r\nshut\r\nend\r\n\r\nAs suggested in another thread, the problem is solved by adding net_connect.enable  before config operation but its not working with this node.\r\n\r\nPlease do the needful\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1509/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1509/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1485", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1485/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1485/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1485/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1485", "id": 537344442, "node_id": "MDU6SXNzdWU1MzczNDQ0NDI=", "number": 1485, "title": "Netmiko 3.0 failing on cmd echo verification for F5 LTM", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-13T04:38:23Z", "updated_at": "2023-04-17T17:47:38Z", "closed_at": "2023-04-17T17:47:38Z", "author_association": "OWNER", "active_lock_reason": null, "body": "```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/ccaro/nornir/venv/lib64/python3.6/site-packages/netmiko/ssh_dispatcher.py\", line 248, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"/home/ccaro/nornir/venv/lib64/python3.6/site-packages/netmiko/base_connection.py\", line 312, in __init__\r\n    self._open()\r\n  File \"/home/ccaro/nornir/venv/lib64/python3.6/site-packages/netmiko/base_connection.py\", line 318, in _open\r\n    self._try_session_preparation()\r\n  File \"/home/ccaro/nornir/venv/lib64/python3.6/site-packages/netmiko/base_connection.py\", line 741, in _try_session_preparation\r\n    self.session_preparation()\r\n  File \"/home/ccaro/nornir/venv/lib64/python3.6/site-packages/netmiko/f5/f5_tmsh_ssh.py\", line 13, in session_preparation\r\n    command=\"modify cli preference pager disabled display-threshold 0\"\r\n  File \"/home/ccaro/nornir/venv/lib64/python3.6/site-packages/netmiko/base_connection.py\", line 1015, in disable_paging\r\n    output = self.read_until_pattern(pattern=re.escape(command.strip()))\r\n  File \"/home/ccaro/nornir/venv/lib64/python3.6/site-packages/netmiko/base_connection.py\", line 612, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"/home/ccaro/nornir/venv/lib64/python3.6/site-packages/netmiko/base_connection.py\", line 546, in _read_channel_expect\r\n    \"Timed-out reading channel, data not available.\"\r\nnetmiko.ssh_exception.NetmikoTimeoutException: Timed-out reading channel, data not available.\r\n```", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1485/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1485/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1328", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1328/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1328/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1328/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1328", "id": 482482341, "node_id": "MDU6SXNzdWU0ODI0ODIzNDE=", "number": 1328, "title": "Juniper driver strip_context_items() suggested change", "user": {"login": "shorton3", "id": 28508112, "node_id": "MDQ6VXNlcjI4NTA4MTEy", "avatar_url": "https://avatars.githubusercontent.com/u/28508112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shorton3", "html_url": "https://github.com/shorton3", "followers_url": "https://api.github.com/users/shorton3/followers", "following_url": "https://api.github.com/users/shorton3/following{/other_user}", "gists_url": "https://api.github.com/users/shorton3/gists{/gist_id}", "starred_url": "https://api.github.com/users/shorton3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shorton3/subscriptions", "organizations_url": "https://api.github.com/users/shorton3/orgs", "repos_url": "https://api.github.com/users/shorton3/repos", "events_url": "https://api.github.com/users/shorton3/events{/privacy}", "received_events_url": "https://api.github.com/users/shorton3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-08-19T19:18:43Z", "updated_at": "2022-05-18T04:17:44Z", "closed_at": "2022-05-18T04:17:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "On Juniper MX2020, the extra CLI output is just {master} or {backup}. Recommend changing:\r\nnetmiko/netmiko/juniper/juniper.py  L205-206 (in your develop branch):\r\n\r\n            r\"\\{master:.*\\}\",\r\n            r\"\\{backup:.*\\}\",\r\nto:\r\n            r\"\\{master:?.*\\}\",\r\n            r\"\\{backup:?.*\\}\",\r\n\r\nthank you\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1328/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1328/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1324", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1324/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1324/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1324/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1324", "id": 481754135, "node_id": "MDU6SXNzdWU0ODE3NTQxMzU=", "number": 1324, "title": "Netmiko session_log not capturing all telnet and serial data", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-16T19:31:56Z", "updated_at": "2022-08-08T22:25:32Z", "closed_at": "2022-08-08T22:25:32Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://github.com/ktbyers/netmiko/blob/develop/netmiko/base_connection.py#L535\r\n\r\nOnly doing SSH here.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1324/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1324/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1268", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1268/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1268/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1268/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1268", "id": 462879278, "node_id": "MDU6SXNzdWU0NjI4NzkyNzg=", "number": 1268, "title": "Cisco ASA SCP broken", "user": {"login": "edurguti", "id": 19334167, "node_id": "MDQ6VXNlcjE5MzM0MTY3", "avatar_url": "https://avatars.githubusercontent.com/u/19334167?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edurguti", "html_url": "https://github.com/edurguti", "followers_url": "https://api.github.com/users/edurguti/followers", "following_url": "https://api.github.com/users/edurguti/following{/other_user}", "gists_url": "https://api.github.com/users/edurguti/gists{/gist_id}", "starred_url": "https://api.github.com/users/edurguti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edurguti/subscriptions", "organizations_url": "https://api.github.com/users/edurguti/orgs", "repos_url": "https://api.github.com/users/edurguti/repos", "events_url": "https://api.github.com/users/edurguti/events{/privacy}", "received_events_url": "https://api.github.com/users/edurguti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-07-01T19:43:01Z", "updated_at": "2023-04-17T17:39:38Z", "closed_at": "2023-04-17T17:39:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Trying to scp an image to asa and encountering an issue, the image is being uploaded successfully but netmiko throws an error, I'm guessing due to the new lfbff image doing additional checks.\r\nThe lfbff and SPA indicates it has FirePower IPS included in the image and this image is digitally signed which makes it tamper resistant, below is an output of a successful file transfer and it's output:\r\n\r\n`.....[removed]asa992-32-lfbff-k8.SPA...!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n***************\r\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nVerifying file disk0:/asa992-32-lfbff-k8.SPA...\r\nComputed Hash   SHA2: d9b83d16cd493a213def1ec238f8e699\r\n                      c908a0b4383e86fd09228635fe545f5a\r\n                      76f8098392a0618e54e5724aa09ceb97\r\n                      da5d46679d75784d7e785e5659e73d64\r\n                      \r\nEmbedded Hash   SHA2: d9b83d16cd493a213def1ec238f8e699\r\n                      c908a0b4383e86fd09228635fe545f5a\r\n                      76f8098392a0618e54e5724aa09ceb97\r\n                      da5d46679d75784d7e785e5659e73d64\r\n                      \r\n\r\nDigital signature successfully validated\r\n\r\nWriting file disk0:/asa992-32-lfbff-k8.SPA...\r\n\r\n111505136 bytes copied in 391.310 secs (285179 bytes/sec)`\r\n\r\nNetmiko throws below error after successfully uploading the file:\r\n\r\n`Copying: asa992-32-lfbff-k8.SPA to: MUCAZ-ASA5516-01: 100%|##########| 112M/112M [48:15<00:00, 48.8kb/s]   \r\nTraceback (most recent call last):\r\n  File \"asa.py\", line 332, in <module>\r\n    device.upgrade()\r\n  File \"asa.py\", line 310, in upgrade\r\n    self.copy_with_progress()\r\n  File \"asa.py\", line 242, in copy_with_progress\r\n    self.ft.scp_client.put(source, dest)\r\n  File \"/Library/Python/2.7/site-packages/scp.py\", line 154, in put\r\n    self._send_files(files)\r\n  File \"/Library/Python/2.7/site-packages/scp.py\", line 250, in _send_files\r\n    self._send_file(fl, name, mode, size)\r\n  File \"/Library/Python/2.7/site-packages/scp.py\", line 276, in _send_file\r\n    self._recv_confirm()\r\n  File \"/Library/Python/2.7/site-packages/scp.py\", line 349, in _recv_confirm\r\n    raise SCPException('Invalid response from server', msg)\r\nscp.SCPException: ('Invalid response from server', 'Computed Hash   SHA2: d9b83d16cd493a213def1ec238f8e699\\r\\n                      c908a0b4383e86fd09228635fe545f5a\\r\\n                      76f8098392a0618e54e5724aa09ceb97\\r\\n                      da5d46679d75784d7e785e5659e73d64\\r\\n                      \\r\\nEmbedded Hash   SHA2: d9b83d16cd493a213def1ec238f8e699\\r\\n                      c908a0b4383e86fd09228635fe545f5a\\r\\n                      76f8098392a0618e54e5724aa09ceb97\\r\\n                      da5d46679d75784d7e785e5659e73d64\\r\\n                      \\r\\n\\r\\nDigital signat')`\r\n\r\n\r\nI'm guessing the output is not expected in netmiko logic.", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1268/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1268/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1254", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1254/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1254/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1254/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1254", "id": 459394798, "node_id": "MDU6SXNzdWU0NTkzOTQ3OTg=", "number": 1254, "title": "SCP.py times out too quickly on Secure Copy of large files", "user": {"login": "eakikel", "id": 47486104, "node_id": "MDQ6VXNlcjQ3NDg2MTA0", "avatar_url": "https://avatars.githubusercontent.com/u/47486104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eakikel", "html_url": "https://github.com/eakikel", "followers_url": "https://api.github.com/users/eakikel/followers", "following_url": "https://api.github.com/users/eakikel/following{/other_user}", "gists_url": "https://api.github.com/users/eakikel/gists{/gist_id}", "starred_url": "https://api.github.com/users/eakikel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eakikel/subscriptions", "organizations_url": "https://api.github.com/users/eakikel/orgs", "repos_url": "https://api.github.com/users/eakikel/repos", "events_url": "https://api.github.com/users/eakikel/events{/privacy}", "received_events_url": "https://api.github.com/users/eakikel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2019-06-21T22:33:19Z", "updated_at": "2019-10-11T17:50:33Z", "closed_at": "2019-10-10T20:04:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using the scp scp_transfer.transfer_file() function.\r\nWhen running against older versions of EOS like 4.15 thru 4.19, the file transfer works smoothly\r\n\r\nWhen it runs against EOS-4.20.11M the file transfers but errors out\r\nException in thread Thread-3:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/paramiko/channel.py\", line 699, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"/usr/local/lib/python3.6/site-packages/paramiko/buffered_pipe.py\", line 164, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/scp.py\", line 335, in _recv_confirm\r\n    msg = self.channel.recv(512)\r\n  File \"/usr/local/lib/python3.6/site-packages/paramiko/channel.py\", line 701, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/threading.py\", line 916, in _bootstrap_inner\r\n    self.run()\r\n  File \"/usr/local/lib/python3.6/threading.py\", line 864, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"./copyarista.py\", line 137, in copycode\r\n    scp_transfer.transfer_file()\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/scp_handler.py\", line 304, in transfer_file\r\n    self.put_file()\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/scp_handler.py\", line 317, in put_file\r\n    self.scp_conn.scp_transfer_file(self.source_file, destination)\r\n  File \"/usr/local/lib/python3.6/site-packages/netmiko/scp_handler.py\", line 40, in scp_transfer_file\r\n    self.scp_client.put(source_file, dest_file)\r\n  File \"/usr/local/lib/python3.6/site-packages/scp.py\", line 154, in put\r\n    self._send_files(files)\r\n  File \"/usr/local/lib/python3.6/site-packages/scp.py\", line 250, in _send_files\r\n    self._send_file(fl, name, mode, size)\r\n  File \"/usr/local/lib/python3.6/site-packages/scp.py\", line 276, in _send_file\r\n    self._recv_confirm()\r\n  File \"/usr/local/lib/python3.6/site-packages/scp.py\", line 337, in _recv_confirm\r\n    raise SCPException('Timeout waiting for scp response')\r\nscp.SCPException: Timeout waiting for scp response\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1254/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1236", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1236/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1236/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1236/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1236", "id": 454930915, "node_id": "MDU6SXNzdWU0NTQ5MzA5MTU=", "number": 1236, "title": "Netmiko should strip whitespace from host and IP fields", "user": {"login": "rome22", "id": 42706642, "node_id": "MDQ6VXNlcjQyNzA2NjQy", "avatar_url": "https://avatars.githubusercontent.com/u/42706642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rome22", "html_url": "https://github.com/rome22", "followers_url": "https://api.github.com/users/rome22/followers", "following_url": "https://api.github.com/users/rome22/following{/other_user}", "gists_url": "https://api.github.com/users/rome22/gists{/gist_id}", "starred_url": "https://api.github.com/users/rome22/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rome22/subscriptions", "organizations_url": "https://api.github.com/users/rome22/orgs", "repos_url": "https://api.github.com/users/rome22/repos", "events_url": "https://api.github.com/users/rome22/events{/privacy}", "received_events_url": "https://api.github.com/users/rome22/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-06-11T22:27:12Z", "updated_at": "2019-06-12T19:26:11Z", "closed_at": "2019-06-12T19:26:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am fairly new in programming and I am getting an error on my script. My list of ips are 10.xx.xx.149 and 10.xx.xx.150 saved on file name \"devices\", but when i just have 1 ip on the \"devices\" file like 10.xx.xx.149, it will connect and run the script successfully. Having more than 1 ip on the \"devices\" the script is getting error. I can both ssh to both devices. Appreciate the help on this. \r\n\r\n=================================\r\n\r\n```\r\nimport netmiko\r\nfrom netmiko import ConnectHandler\r\nimport getpass\r\nfrom getpass import getpass\r\n\r\nip_list = open('devices')\r\nfor IP in ip_list:\r\n    SW = {\r\n    'device_type': 'cisco_ios', \r\n    'ip':    IP,\r\n    'username': 'admin',\r\n    'password': 'admin',\r\n    }\r\n    \r\n    print('Connecting to the device ' + IP)\r\n    net_connect = ConnectHandler(**SW)\r\n\r\n    output = net_connect.send_config_from_file(config_file='config')\r\n    print(output)\r\n    output = net_connect.send_command('show ip int brief')\r\n    print(output)\r\n```\r\n\r\n================================\r\nERROR below\r\n\r\nConnecting to the device 10.xx.xx.149\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\rome\\Anaconda3\\lib\\site-packages\\netmiko-2.3.3-py3.7.egg\\netmiko\\base_connection.py\", line 860, in establish_connection\r\n  File \"C:\\Users\\rome\\Anaconda3\\lib\\site-packages\\paramiko\\client.py\", line 334, in connect\r\n    to_try = list(self._families_and_addresses(hostname, port))\r\n  File \"C:\\Users\\rome\\Anaconda3\\lib\\site-packages\\paramiko\\client.py\", line 204, in _families_and_addresses\r\n    hostname, port, socket.AF_UNSPEC, socket.SOCK_STREAM\r\n  File \"C:\\Users\\rome\\Anaconda3\\lib\\socket.py\", line 748, in getaddrinfo\r\n    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):\r\nsocket.gaierror: [Errno 11001] getaddrinfo failed\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"test11.py\", line 16, in <module>\r\n    net_connect = ConnectHandler(**SW)\r\n  File \"C:\\Users\\rome\\Anaconda3\\lib\\site-packages\\netmiko-2.3.3-py3.7.egg\\netmiko\\ssh_dispatcher.py\", line 238, in ConnectHandler\r\n  File \"C:\\Users\\rome\\Anaconda3\\lib\\site-packages\\netmiko-2.3.3-py3.7.egg\\netmiko\\base_connection.py\", line 314, in __init__\r\n  File \"C:\\Users\\rome\\Anaconda3\\lib\\site-packages\\netmiko-2.3.3-py3.7.egg\\netmiko\\base_connection.py\", line 866, in establish_connection\r\nnetmiko.ssh_exception.NetMikoTimeoutException: Connection to device timed-out: cisco_ios 10.xx.xx.149\r\n:22", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1236/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1236/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1098", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1098/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1098/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1098/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1098", "id": 411003316, "node_id": "MDU6SXNzdWU0MTEwMDMzMTY=", "number": 1098, "title": "Test channel read and pattern behavior not expected", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-16T00:42:59Z", "updated_at": "2019-02-22T18:55:42Z", "closed_at": "2019-02-22T18:55:42Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://github.com/ktbyers/netmiko/blob/develop/netmiko/base_connection.py#L919\r\n\r\nThis looks like a bug:\r\n\r\n```\r\n        while i <= count:\r\n            new_data += self._read_channel_timing()\r\n            if new_data and pattern:\r\n                if re.search(pattern, new_data):\r\n                    break\r\n            elif new_data:\r\n                break\r\n```\r\n\r\nIf you have pattern set you break when pattern is detected, but then you break if there is any new_data whatsoever.", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1098/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1098/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1049", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1049/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1049/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1049/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1049", "id": 395695221, "node_id": "MDU6SXNzdWUzOTU2OTUyMjE=", "number": 1049, "title": "Output split across two reads so send_command pattern never detected", "user": {"login": "m1009d", "id": 18160888, "node_id": "MDQ6VXNlcjE4MTYwODg4", "avatar_url": "https://avatars.githubusercontent.com/u/18160888?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m1009d", "html_url": "https://github.com/m1009d", "followers_url": "https://api.github.com/users/m1009d/followers", "following_url": "https://api.github.com/users/m1009d/following{/other_user}", "gists_url": "https://api.github.com/users/m1009d/gists{/gist_id}", "starred_url": "https://api.github.com/users/m1009d/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m1009d/subscriptions", "organizations_url": "https://api.github.com/users/m1009d/orgs", "repos_url": "https://api.github.com/users/m1009d/repos", "events_url": "https://api.github.com/users/m1009d/events{/privacy}", "received_events_url": "https://api.github.com/users/m1009d/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-03T19:25:35Z", "updated_at": "2019-01-08T19:00:22Z", "closed_at": "2019-01-08T19:00:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi folks, \r\nI have a strange problem with the build-in `send_command()` method and I am not able to find a good solution to it.\r\nI have a script which connects to several Cisco IOS-XR routers and issue some commands. In most cases it is working just fine, but sometimes there is this error message: `Search pattern never detected in send_command_expect`.\r\n\r\nHere is my simplified code:\r\n```\r\nrouter_params = {\r\n                    \"host\": router_hostname,\r\n                    \"username\": username,\r\n                    \"password\": password,\r\n                    \"device_type\": 'cisco_xr',\r\n                    \"ssh_config_file\": ssh_config_file\r\n                }\r\n                \r\nrouter = ConnectHandler(**router_params)\r\nrouter.send_command('show int description | e down | i R2-R2,', delay_factor=2)\r\nrouter.send_command('show ipv4 int brief | e down | e Loop | e unassigned | i default', delay_factor=2)\r\n```\r\n\r\nWhen I tried to debug it I noticed strange behavior in the `self.read_channel()` method so I put some additional print() statements into the `send_command()` method as follow:\r\n```\r\n....\r\n# Keep reading data until search_pattern is found or until max_loops is reached.\r\nwhile i <= max_loops:\r\n    print(f'Searching for prompt: {search_pattern}')          <---- MY DEBUG LINE\r\n    new_data = self.read_channel()\r\n    print(f'new_data: {new_data}')                            <---- MY DEBUG LINE\r\n.....\r\n```\r\n\r\nAnd here is the output when the `Search pattern never detected in send_command_expect` is raised:\r\n\r\n```\r\nInteractive SSH session established\r\nSearching for prompt: RP/0/RP0/CPU0:fra\\-xxxx\\-yyyy\\#\r\nnew_data: \r\nSearching for prompt: RP/0/RP0/CPU0:fra\\-xxxx\\-yyyy\\#\r\nnew_data: show int description | e down | i R2-R2,\r\nThu Jan  3 19:15:49.283 CET\r\n\r\nSearching for prompt: RP/0/RP0/CPU0:fra\\-xxxx\\-yyyy\\#\r\nnew_data: \r\nSearching for prompt: RP/0/RP0/CPU0:fra\\-xxxx\\-yyyy\\#\r\nnew_data: Te0/0/0/0          up          up          R2-R2,abcde\r\nRP/0/RP0/CPU0:fra-xxxx-yyyy#\r\nSearching for prompt: RP/0/RP0/CPU0:fra\\-xxxx\\-yyyy\\#\r\nnew_data: \r\nSearching for prompt: RP/0/RP0/CPU0:fra\\-xxxx\\-yyyy\\#\r\nnew_data: \r\nSearching for prompt: RP/0/RP0/CPU0:fra\\-xxxx\\-yyyy\\#\r\nnew_data: show ipv4 int brief | e down | e Loop | e unassigned | i default\r\nThu Jan  3 19:15:50.564 CET\r\nTenGigE0/0/0/0                 10.1.1.1    Up              Up       default \r\nTenGigE0/0/0/18                10.1.2.1   Up              Up       default \r\nTenGigE0/1/0/18                10.1.3.1   Up              Up       default \r\nRP/0/RP0/C\r\nSearching for prompt: RP/0/RP0/CPU0:fra\\-xxxx\\-yyyy\\#\r\nnew_data: PU0:fra-xxxx-yyyy#\r\nSearching for prompt: RP/0/RP0/CPU0:fra\\-xxxx\\-yyyy\\#\r\nnew_data: \r\nSearching for prompt: RP/0/RP0/CPU0:fra\\-xxxx\\-yyyy\\#\r\nnew_data: \r\n.......\r\nSearch pattern never detected in send_command_expect: RP/0/RP0/CPU0:fra\\-xxxx\\-yyyy\\#\r\n```\r\n\r\nIf you take a closer look especially into this line:\r\n```\r\nRP/0/RP0/C\r\nSearching for prompt: RP/0/RP0/CPU0:fra\\-xxxx\\-yyyy\\#\r\nnew_data: PU0:fra-xxxx-yyyy#\r\n```\r\nyou will see the router prompt `RP/0/RP0/CPU0:fra-xxxx-yyyy#` is split to 2 outputs from the `self.read_channel()` and that is the reason why the prompt is never found and the error `Search pattern never detected in send_command_expect` is issued.\r\n\r\nI suspect some delay problem with this but I also think the behavior of the `self.read_channel()` method could be improved as it reads in the middle of the output which could cause problems like this. \r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1049/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1049/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1001", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1001/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1001/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1001/events", "html_url": "https://github.com/ktbyers/netmiko/issues/1001", "id": 380004152, "node_id": "MDU6SXNzdWUzODAwMDQxNTI=", "number": 1001, "title": "SSH to paloalto_panos with pre-login interactive banner enabled", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-11-13T00:15:28Z", "updated_at": "2021-08-19T21:38:28Z", "closed_at": "2021-08-19T21:38:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "When a pre-login interactive banner is enabled on a Palo Alto device ssh connections with Netmiko fail. An example of the pre-login banner can be seen below:\r\n\r\n`ba@deverv:~/scripts$ ssh user@ip\r\nThis is the consent banner that will force the administrator to answer yes or no before they are prompted for the password.\r\nDo you accept and acknowledge the statement above ? (yes/no) :`", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/1001/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/1001/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/958", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/958/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/958/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/958/events", "html_url": "https://github.com/ktbyers/netmiko/issues/958", "id": 362444904, "node_id": "MDU6SXNzdWUzNjI0NDQ5MDQ=", "number": 958, "title": "Huawei vrpv8 commit fails to complete successfully", "user": {"login": "wayneshow", "id": 24647716, "node_id": "MDQ6VXNlcjI0NjQ3NzE2", "avatar_url": "https://avatars.githubusercontent.com/u/24647716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wayneshow", "html_url": "https://github.com/wayneshow", "followers_url": "https://api.github.com/users/wayneshow/followers", "following_url": "https://api.github.com/users/wayneshow/following{/other_user}", "gists_url": "https://api.github.com/users/wayneshow/gists{/gist_id}", "starred_url": "https://api.github.com/users/wayneshow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wayneshow/subscriptions", "organizations_url": "https://api.github.com/users/wayneshow/orgs", "repos_url": "https://api.github.com/users/wayneshow/repos", "events_url": "https://api.github.com/users/wayneshow/events{/privacy}", "received_events_url": "https://api.github.com/users/wayneshow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2018-09-21T03:41:36Z", "updated_at": "2020-04-15T17:17:44Z", "closed_at": "2019-06-13T22:53:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "script :\r\n```\r\nfrom netmiko import ConnectHandler\r\nhuawei = {'device_type': 'huawei_vrpv8', 'ip': 'x.x.x.x', 'username': 'guaziadmin', 'password': 'password'}\r\nnet_connect = ConnectHandler(**huawei)\r\n\r\ncommands = ['vlan 10']\r\n\r\noutput1 = net_connect.send_config_set(commands)\r\nprint(output1)\r\n```\r\n\r\nerror:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/Cellar/python3/3.6.2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/paramiko/channel.py\", line 683, in recv\r\n    out = self.in_buffer.read(nbytes, self.timeout)\r\n  File \"/usr/local/Cellar/python3/3.6.2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/paramiko/buffered_pipe.py\", line 160, in read\r\n    raise PipeTimeout()\r\nparamiko.buffered_pipe.PipeTimeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/Cellar/python3/3.6.2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/netmiko/base_connection.py\", line 448, in _read_channel_expect\r\n    new_data = self.remote_conn.recv(MAX_BUFFER)\r\n  File \"/usr/local/Cellar/python3/3.6.2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/paramiko/channel.py\", line 685, in recv\r\n    raise socket.timeout()\r\nsocket.timeout\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/sunshouwen/PycharmProjects/test1/netssh_test.py\", line 7, in <module>\r\n    output1 = net_connect.send_config_set(commands)\r\n  File \"/usr/local/Cellar/python3/3.6.2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/netmiko/base_connection.py\", line 1402, in send_config_set\r\n    output += self.exit_config_mode()\r\n  File \"/usr/local/Cellar/python3/3.6.2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/netmiko/huawei/huawei_ssh.py\", line 26, in exit_config_mode\r\n    return super(HuaweiSSH, self).exit_config_mode(exit_config=exit_config)\r\n  File \"/usr/local/Cellar/python3/3.6.2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/netmiko/cisco_base_connection.py\", line 47, in exit_config_mode\r\n    pattern=pattern)\r\n  File \"/usr/local/Cellar/python3/3.6.2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/netmiko/base_connection.py\", line 1324, in exit_config_mode\r\n    output = self.read_until_pattern(pattern=pattern)\r\n  File \"/usr/local/Cellar/python3/3.6.2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/netmiko/base_connection.py\", line 520, in read_until_pattern\r\n    return self._read_channel_expect(*args, **kwargs)\r\n  File \"/usr/local/Cellar/python3/3.6.2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/netmiko/base_connection.py\", line 456, in _read_channel_expect\r\n    raise NetMikoTimeoutException(\"Timed-out reading channel, data not available.\")\r\nnetmiko.ssh_exception.NetMikoTimeoutException: Timed-out reading channel, data not available.\r\n```", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/958/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/890", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/890/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/890/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/890/events", "html_url": "https://github.com/ktbyers/netmiko/issues/890", "id": 344642330, "node_id": "MDU6SXNzdWUzNDQ2NDIzMzA=", "number": 890, "title": "change default_enter behavior for Aruba driver", "user": {"login": "MikeJurecki", "id": 33522757, "node_id": "MDQ6VXNlcjMzNTIyNzU3", "avatar_url": "https://avatars.githubusercontent.com/u/33522757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MikeJurecki", "html_url": "https://github.com/MikeJurecki", "followers_url": "https://api.github.com/users/MikeJurecki/followers", "following_url": "https://api.github.com/users/MikeJurecki/following{/other_user}", "gists_url": "https://api.github.com/users/MikeJurecki/gists{/gist_id}", "starred_url": "https://api.github.com/users/MikeJurecki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MikeJurecki/subscriptions", "organizations_url": "https://api.github.com/users/MikeJurecki/orgs", "repos_url": "https://api.github.com/users/MikeJurecki/repos", "events_url": "https://api.github.com/users/MikeJurecki/events{/privacy}", "received_events_url": "https://api.github.com/users/MikeJurecki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2018-07-25T23:29:15Z", "updated_at": "2021-10-01T06:47:30Z", "closed_at": "2018-08-09T02:26:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "In reference to \"how to hit enter after a send_command #330\" you offered a solution to respond to a router prompt.  I am having an issue in changing a password, when manually performing this it prompts for a Password: and for you to re-enter the password as seen below.  The solution that you offered did not work for me and after looking at the logs it looks to be sending the first password successfully but it it not reading the prompt for the second password.  \r\n\r\nAny code examples or solutions that you can provide would be amazing.\r\n\r\n**Manual Example:**\r\n```\r\n(exampledevice1) (config) #mgmt-user admin root              \r\nPassword:********\r\nRe-Type password:********\r\n```\r\n**My Python Code:**\r\n\r\n```python\r\nnet_connect.config_mode()\r\n\r\ncommand = 'mgmt-user admin root'\r\naruba_pass = 'examplepassword'\r\n\r\nconfigure4 = net_connect.send_command_timing(command)\r\n        if 'Password:' in configure4:\r\n            configure4 += net_connect.send_command_timing(aruba_pass)\r\n        if 'password:' in configure4:\r\n            configure4 += net_connect.send_command_timing(aruba_pass)\r\n\r\nnet_connect.exit_config_mode()\r\n\r\noutput2 = net_connect.save_config()\r\n```\r\n\r\nI have tried several different ways and it still wont work, any help would be greatly appreciated.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/890/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/890/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/785", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/785/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/785/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/785/events", "html_url": "https://github.com/ktbyers/netmiko/issues/785", "id": 313756216, "node_id": "MDU6SXNzdWUzMTM3NTYyMTY=", "number": 785, "title": "Send Config from file error for Ciena", "user": {"login": "Jajao555", "id": 37662536, "node_id": "MDQ6VXNlcjM3NjYyNTM2", "avatar_url": "https://avatars.githubusercontent.com/u/37662536?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jajao555", "html_url": "https://github.com/Jajao555", "followers_url": "https://api.github.com/users/Jajao555/followers", "following_url": "https://api.github.com/users/Jajao555/following{/other_user}", "gists_url": "https://api.github.com/users/Jajao555/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jajao555/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jajao555/subscriptions", "organizations_url": "https://api.github.com/users/Jajao555/orgs", "repos_url": "https://api.github.com/users/Jajao555/repos", "events_url": "https://api.github.com/users/Jajao555/events{/privacy}", "received_events_url": "https://api.github.com/users/Jajao555/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-04-12T14:38:14Z", "updated_at": "2019-05-30T16:40:09Z", "closed_at": "2019-05-30T16:40:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have script that runs a \"config search string\" command and from that output parses out the ports I want and creates and file with the ports concatenated into new configuration commands to do the change I want. Getting the search output and parsing it and saving to a file all seem to work fine.\r\n\r\nI'm getting an error when I try to use send_config_from_file saying failed to enter configuration mode. Ciena doesn't require you to enter config mode to do config changes there is a configuration prompt but it's only a hierarchy for changes to the \"configuration\" section if that makes sense. Also this is on 6.11 SAOS code so that may have changed they are up to 6.17 now.\r\n\r\nError I'm getting:\r\n`(<type 'exceptions.ValueError'>, ValueError(u'Failed to enter configuration mode.',), <traceback object at 0x7fa7602836c8>)`\r\n\r\nParts of script:\r\n```python\r\n    port_list = ['port 1', 'port 2', 'port 3', 'port 4', 'port 1.20', 'port 1.21', 'port 1.23', 'port 1.3',]\r\n\r\n    session = netmiko.ConnectHandler( device_type='ciena_saos', ip=node['ip'], username=username, password=password, global_delay_factor=1)\r\n\r\n    try:\r\n        output = session.find_prompt()\r\n        output += session.send_command('config search string \"virtual-switch ethernet add\"')\r\n        matches = {x for x in port_list if x in output}\r\n        matches_list = list(matches)\r\n        print(matches_list)\r\n        parsing_file_name = './python_work/zlldp_' + node['name'] + '_' + node['ip'] + '.txt'\r\n        print ('Writing output to file', parsing_file_name)\r\n        with open(parsing_file_name,'w') as f:\r\n            for item in matches_list:\r\n                f.write('lldp set port ' + item + ' mode tx-rx notification off' + '\\n')\r\n        output += session.find_prompt()\r\n        output += session.send_config_from_file(parsing_file_name)\r\n        output += session.send_command('config save')\r\n        session.disconnect()\r\n\r\n```\r\nOutput:\r\n```\r\n20180412_10:17:08:976704 - Logged into Ciena LAB-5150-MES1.NMD - 172.x.x.x\r\n\r\n['port 1.21', 'port 1.20', 'port 1.23', 'port 1']\r\n('Writing output to file', './python_work/zlldp_LAB-5150-MES1.NMD_172.x.x.x.txt')\r\n20180412_10:17:08:976704 - Unexpected error: LAB-5150-MES1.NMD - (<type 'exceptions.ValueError'>, ValueError(u'Failed to enter configuration mode.',), <traceback object at 0x7f697842b6c8>) \r\n\r\nRun Finished...\r\n\r\n```\r\n\r\nCommands I parse to get and read from the /python_work/zlldp_LAB-5150-MES1.NMD_172.x.x.x.txt' file:\r\n```\r\nlldp set port port 1.21 mode tx-rx notification off\r\nlldp set port port 1.20 mode tx-rx notification off\r\nlldp set port port 1.23 mode tx-rx notification off\r\n```", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/785/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/785/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/774", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/774/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/774/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/774/events", "html_url": "https://github.com/ktbyers/netmiko/issues/774", "id": 311627016, "node_id": "MDU6SXNzdWUzMTE2MjcwMTY=", "number": 774, "title": "save_config on Cisco WLC no longer working", "user": {"login": "rehlers", "id": 14813324, "node_id": "MDQ6VXNlcjE0ODEzMzI0", "avatar_url": "https://avatars.githubusercontent.com/u/14813324?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rehlers", "html_url": "https://github.com/rehlers", "followers_url": "https://api.github.com/users/rehlers/followers", "following_url": "https://api.github.com/users/rehlers/following{/other_user}", "gists_url": "https://api.github.com/users/rehlers/gists{/gist_id}", "starred_url": "https://api.github.com/users/rehlers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rehlers/subscriptions", "organizations_url": "https://api.github.com/users/rehlers/orgs", "repos_url": "https://api.github.com/users/rehlers/repos", "events_url": "https://api.github.com/users/rehlers/events{/privacy}", "received_events_url": "https://api.github.com/users/rehlers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-04-05T14:11:08Z", "updated_at": "2018-05-17T23:13:46Z", "closed_at": "2018-05-17T23:13:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, it looks like a couple of months back, an update was done on the save_config function to make a more generic save_config method in the CiscoBaseConnection class and have each subclass just pass in the correct parameters.\r\n\r\nThe generic save_config was added to CiscoBaseConnection, but the cisco_wlc_ssh.py file with the CiscoWlcSSH class is a subclass of BaseConnection (not CiscoBaseConnection). BaseConnection does not have the generic save_config implemented, so now calling save_config on Cisco WLC devices raises a Not Implemented exception.\r\n\r\nI don't know what the right solution here is, as the Cisco WLC interface is really nothing like anything else Cisco makes. \r\nMoving the generic save_config from CiscoBaseConnection to BaseConnection? \r\nAdding a CiscoWlcBaseConnection subclass of BaseConnection in cisco_base_connection.py that just has the save_config?\r\nMaking CiscoWlcSSH a subclass of CiscoSSHConnection instead?", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/774/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/774/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/675", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/675/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/675/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/675/events", "html_url": "https://github.com/ktbyers/netmiko/issues/675", "id": 287622516, "node_id": "MDU6SXNzdWUyODc2MjI1MTY=", "number": 675, "title": "PAN-OS devices have a banner acknowledgement feature", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-11T00:17:13Z", "updated_at": "2019-07-02T15:37:52Z", "closed_at": "2019-07-02T15:37:52Z", "author_association": "OWNER", "active_lock_reason": null, "body": "```\r\nlogin as: admin\r\n\r\nDevice in use. Please check with the current user before making any changes\r\n\r\nUsing keyboard-interactive authentication.\r\n\r\nDo you accept and acknowledge the statement above ? (yes/no) : yes\r\n\r\nUsing keyboard-interactive authentication.\r\n\r\nPassword:\r\n\r\nLast login: Sat Jan  6 13:40:15 2018 from 10.a.b.c\r\n\r\nNumber of failed attempts since last successful login: 0\r\n\r\nWarning: Your device is still configured with the default admin account credentials. Please change your password prior to deployment.\r\n\r\nadmin@PA-5220-100(active-primary)>\r\n```", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/675/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/661", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/661/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/661/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/661/events", "html_url": "https://github.com/ktbyers/netmiko/issues/661", "id": 282906726, "node_id": "MDU6SXNzdWUyODI5MDY3MjY=", "number": 661, "title": "SCP File Transfer - Unsupported device type 'cisco_xe'", "user": {"login": "ghmj2417", "id": 18738647, "node_id": "MDQ6VXNlcjE4NzM4NjQ3", "avatar_url": "https://avatars.githubusercontent.com/u/18738647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghmj2417", "html_url": "https://github.com/ghmj2417", "followers_url": "https://api.github.com/users/ghmj2417/followers", "following_url": "https://api.github.com/users/ghmj2417/following{/other_user}", "gists_url": "https://api.github.com/users/ghmj2417/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghmj2417/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghmj2417/subscriptions", "organizations_url": "https://api.github.com/users/ghmj2417/orgs", "repos_url": "https://api.github.com/users/ghmj2417/repos", "events_url": "https://api.github.com/users/ghmj2417/events{/privacy}", "received_events_url": "https://api.github.com/users/ghmj2417/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-12-18T14:58:08Z", "updated_at": "2017-12-20T18:40:26Z", "closed_at": "2017-12-20T18:40:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Previously, device type 'cisco_xe' was supported for SCP file transfers.  Now I receive 'Unsupported device type: currently supported platforms are:'.  The funny thing, my device type is listed in the output and I am pretty sure I know why.\r\n\r\nThe FileTransfer function checks for any device types in here:\r\nFILE_TRANSFER_MAP = {\r\n    'arista_eos': AristaFileTransfer,\r\n    'cisco_asa': CiscoAsaFileTransfer,\r\n    'cisco_ios': CiscoIosFileTransfer,\r\n    'cisco_nxos': CiscoNxosFileTransfer,\r\n    'juniper_junos': JuniperFileTransfer,\r\n}\r\nThen it appears you create additional keys with _ssh appended and assign the new_mapper dict to the FILE_TRANSFER_MAP keys.\r\nnew_mapper = {}\r\nfor k, v in FILE_TRANSFER_MAP.items():\r\n    new_mapper[k] = v\r\n    alt_key = k + u\"_ssh\"\r\n    new_mapper[alt_key] = v\r\nFILE_TRANSFER_MAP = new_mapper\r\n\r\nYou then assign the following variables which will be used to check for the device type in your FileTransfer function:\r\nscp_platforms = list(FILE_TRANSFER_MAP.keys())\r\nscp_platforms.sort()\r\nscp_platforms_str = \"\\n\".join(platforms_base)\r\nscp_platforms_str = \"\\n\" + platforms_str\r\n\r\nAnd here is the check:\r\nif device_type not in scp_platforms:\r\n        raise ValueError('Unsupported SCP device_type: '\r\n                         'currently supported platforms are: {}'.format(scp_platforms_str))\r\n\r\nBased on the code above, I can see why my device type 'cisco_xe' is not working anymore.  However, your supported platforms list says it should be supported.  The reason being is because scp_platforms_str is getting its values from platforms_base which is getting its values from CLASS_MAPPER_BASE which has all types.\r\n\r\nTwo things: First, since XE is a train of IOS and the CLI commands are almost identical, would you be against adding it as a supported file transfer type?  Second, you may want to change the scp_platforms_str string to show the actually supported types not all class types.", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/661/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/661/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/643", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/643/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/643/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/643/events", "html_url": "https://github.com/ktbyers/netmiko/issues/643", "id": 278197744, "node_id": "MDU6SXNzdWUyNzgxOTc3NDQ=", "number": 643, "title": "Juniper - ValueError: Router prompt not found: '%'", "user": {"login": "Zalek-Git", "id": 34137119, "node_id": "MDQ6VXNlcjM0MTM3MTE5", "avatar_url": "https://avatars.githubusercontent.com/u/34137119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zalek-Git", "html_url": "https://github.com/Zalek-Git", "followers_url": "https://api.github.com/users/Zalek-Git/followers", "following_url": "https://api.github.com/users/Zalek-Git/following{/other_user}", "gists_url": "https://api.github.com/users/Zalek-Git/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zalek-Git/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zalek-Git/subscriptions", "organizations_url": "https://api.github.com/users/Zalek-Git/orgs", "repos_url": "https://api.github.com/users/Zalek-Git/repos", "events_url": "https://api.github.com/users/Zalek-Git/events{/privacy}", "received_events_url": "https://api.github.com/users/Zalek-Git/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 35, "created_at": "2017-11-30T17:05:52Z", "updated_at": "2019-03-14T16:08:11Z", "closed_at": "2017-12-20T18:19:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to use netmiko on a Juniper SRX but I am hitting Router prompt not found: error. Any help is appreciated.\r\n\r\nBelow is the exact error\r\n\r\n```\r\n  File \"/home/user/eclipse-workspace/PyEZ/NetMiko-2.py\", line 17, in <module>\r\n    net_connect = ConnectHandler(**a_device)\r\n  File \"/usr/local/lib/python3.6/dist-packages/netmiko/ssh_dispatcher.py\", line 131, in ConnectHandler\r\n    return ConnectionClass(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/netmiko/base_connection.py\", line 152, in __init__\r\n    self.session_preparation()\r\n  File \"/usr/local/lib/python3.6/dist-packages/netmiko/juniper/juniper_ssh.py\", line 25, in session_preparation\r\n    self.set_base_prompt()\r\n  File \"/usr/local/lib/python3.6/dist-packages/netmiko/base_connection.py\", line 672, in set_base_prompt\r\n    raise ValueError(\"Router prompt not found: {0}\".format(repr(prompt)))\r\nValueError: Router prompt not found: '%'\r\n```\r\n\r\n\r\nBelow is my code\r\n\r\n\r\n```\r\nfrom netmiko import ConnectHandler\r\nfrom datetime import datetime\r\n\r\njuniper_srx = {\r\n    'device_type': 'juniper',\r\n    'ip':   '10.1.34.130',\r\n    'username': 'root',\r\n    'password': 'Password',\r\n    'port': 22,               # there is a firewall performing NAT in front of this device\r\n    'verbose': False,\r\n    } \r\n\r\nall_devices = [juniper_srx]\r\n\r\nstart_time = datetime.now()\r\nfor a_device in all_devices:\r\n    net_connect = ConnectHandler(**a_device)\r\n    print (\"1\")\r\n    output = net_connect.send_command(\"show interfaces terse\")\r\n    print (\"\\n\\n>>>>>>>>> Device {0} <<<<<<<<<\").format(a_device['device_type'])\r\n    print (output)\r\n    print (\">>>>>>>>> End <<<<<<<<<\") \r\n    \r\nend_time = datetime.now()\r\n\r\ntotal_time = end_time - start_time \r\nprint (total_time)\r\n```", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/643/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/643/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/556", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/556/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/556/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/556/events", "html_url": "https://github.com/ktbyers/netmiko/issues/556", "id": 251445222, "node_id": "MDU6SXNzdWUyNTE0NDUyMjI=", "number": 556, "title": "Cisco IOS-XR repainting line multiple times: unable to get desired output", "user": {"login": "kaushikrp", "id": 31167048, "node_id": "MDQ6VXNlcjMxMTY3MDQ4", "avatar_url": "https://avatars.githubusercontent.com/u/31167048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaushikrp", "html_url": "https://github.com/kaushikrp", "followers_url": "https://api.github.com/users/kaushikrp/followers", "following_url": "https://api.github.com/users/kaushikrp/following{/other_user}", "gists_url": "https://api.github.com/users/kaushikrp/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaushikrp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaushikrp/subscriptions", "organizations_url": "https://api.github.com/users/kaushikrp/orgs", "repos_url": "https://api.github.com/users/kaushikrp/repos", "events_url": "https://api.github.com/users/kaushikrp/events{/privacy}", "received_events_url": "https://api.github.com/users/kaushikrp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-08-19T19:29:52Z", "updated_at": "2019-06-21T21:38:18Z", "closed_at": "2019-06-21T21:38:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I am getting below output for the code executed\r\nSun Aug 20 00:29:39.358 ist\r\ndrop paks: 26493,  drop_bytes: 13144301\r\ndrop paks: 0,  drop_bytes: 0\r\ndrop paks: 0,  drop_bytes: 0\r\ndrop paks: 0,  drop_bytes: 0\r\ndrop paks: 8199371,  drop_bytes: 8194252327\r\ndrop paks: 0,  drop_bytes: 0\r\ndrop paks: 0,  drop_bytes: 0\r\ndrop paks: 12796452,  drop_bytes: 12766476682\r\n##############################################################\r\n\r\n\r\nSun Aug 20 00:29:39.962 ist\r\ndrop paks: 1159794364,  drop_bytes: 157333372363\r\n##############################################################\r\n\r\n\r\nSun Aug 20 00:29:40.595 ist\r\ndrop paks: 0,  drop_bytes: 0\r\ndrop paks: 4,  drop_bytes: 445\r\ndrop paks: 0,  drop_bytes: 0\r\ndrop paks: 0,  drop_bytes: 0\r\ndrop paks: 13112434,  drop_bytes: 13126035635\r\ndrop paks: 0,  drop_bytes: 0\r\ndrop paks: 9112287,  drop_bytes: 8760532104\r\ndrop paks: 0,  drop_bytes: 0\r\n##############################################################\r\n\r\n4#show controllers np\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/0/CPU0\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/0/CPU0 |\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/0/CPU0 | include\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/0/CPU0 | include \"drop\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/0/CPU0 | include \"drop paks\"\r\n\r\nSun Aug 20 00:29:46.695 ist\r\n\r\n##############################################################\r\n\r\n4#show controllers np\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/1/CPU0\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/1/CPU0 |\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/1/CPU0 | include\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/1/CPU0 | include \"drop\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/1/CPU0 | include \"drop paks\"\r\n\r\nSun Aug 20 00:29:47.302 ist\r\n\r\n##############################################################\r\n\r\n#show controllers np\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/10/CPU0\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/10/CPU0 |\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/10/CPU0 | include\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/10/CPU0 | include \"drop\r\nRP/0/RP0/CPU0:MHPUNVGANCR04#show controllers np tm counters all location 0/10/CPU0 | include \"drop paks\"\r\n\r\n\r\n\r\nCODE:\r\n\r\nfrom __future__ import print_function\r\nfrom netmiko import ConnectHandler\r\nimport sys\r\nimport time\r\nimport select\r\nimport paramiko\r\nimport re\r\n\r\nfd = open(r'C:\\NewdayTest.txt','w')\r\nold_stdout = sys.stdout   \r\nsys.stdout = fd \r\nplatform = 'cisco_xr'\r\nusername = 'kaushik' \r\npassword = 'kaushik20'\r\n\r\nip_add_file = open(r'C:\\IPAddressList.txt','r')\r\n\r\nfor host in ip_add_file:\r\n    host = host.strip()\r\n    device = ConnectHandler(device_type=platform, ip=host, username=username, password=password)\r\n    output = device.send_command('terminal length 0')\r\n    output = device.send_command('show controllers np tm counters all location 0/0/CPU0 | include \"drop paks\"')\r\n    print(output)\r\n    print('##############################################################\\n')\r\n    output = device.send_command('show controllers np tm counters all location 0/1/CPU0 | include \"drop paks\"')\r\n    print(output)\r\n    print('##############################################################\\n')\r\n    output = device.send_command('show controllers np tm counters all location 0/10/CPU0 | include \"drop paks\"')\r\n    print(output) \r\n    print('##############################################################\\n')\r\n\r\nfd.close()", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/556/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/556/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/488", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/488/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/488/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/488/events", "html_url": "https://github.com/ktbyers/netmiko/issues/488", "id": 234079303, "node_id": "MDU6SXNzdWUyMzQwNzkzMDM=", "number": 488, "title": "How can I connect to host use pem file with ssh\uff1f", "user": {"login": "kingcmy", "id": 14053475, "node_id": "MDQ6VXNlcjE0MDUzNDc1", "avatar_url": "https://avatars.githubusercontent.com/u/14053475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingcmy", "html_url": "https://github.com/kingcmy", "followers_url": "https://api.github.com/users/kingcmy/followers", "following_url": "https://api.github.com/users/kingcmy/following{/other_user}", "gists_url": "https://api.github.com/users/kingcmy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingcmy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingcmy/subscriptions", "organizations_url": "https://api.github.com/users/kingcmy/orgs", "repos_url": "https://api.github.com/users/kingcmy/repos", "events_url": "https://api.github.com/users/kingcmy/events{/privacy}", "received_events_url": "https://api.github.com/users/kingcmy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-06-07T03:02:55Z", "updated_at": "2018-08-09T03:33:13Z", "closed_at": "2018-08-09T03:33:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "How can I connect to host use pem file with ssh\uff1fplease display a example, thanks!", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/488/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/488/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/348", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/348/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/348/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/348/events", "html_url": "https://github.com/ktbyers/netmiko/issues/348", "id": 198464791, "node_id": "MDU6SXNzdWUxOTg0NjQ3OTE=", "number": 348, "title": "Linux - error when disconnecting", "user": {"login": "bulyhome", "id": 24893177, "node_id": "MDQ6VXNlcjI0ODkzMTc3", "avatar_url": "https://avatars.githubusercontent.com/u/24893177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bulyhome", "html_url": "https://github.com/bulyhome", "followers_url": "https://api.github.com/users/bulyhome/followers", "following_url": "https://api.github.com/users/bulyhome/following{/other_user}", "gists_url": "https://api.github.com/users/bulyhome/gists{/gist_id}", "starred_url": "https://api.github.com/users/bulyhome/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bulyhome/subscriptions", "organizations_url": "https://api.github.com/users/bulyhome/orgs", "repos_url": "https://api.github.com/users/bulyhome/repos", "events_url": "https://api.github.com/users/bulyhome/events{/privacy}", "received_events_url": "https://api.github.com/users/bulyhome/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-01-03T12:29:04Z", "updated_at": "2018-12-13T05:20:28Z", "closed_at": "2018-12-13T05:20:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using Windows 7 (64 bit) and Python 3.5 (64 bit) with Paramiko 2.1.1 and Netmiko 1.1.0\r\nI need to connect to multiple Linux hosts using ssh, run several commands there and then disconnect.\r\nWhen trying to disconnect, I get error:\r\n\r\nTraceback (most recent call last):\r\n  File \"script_v5.py\", line 17, in <module>\r\n    device.disconnect()\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\netmiko\\base_connection.py\", line 885, in disconnect\r\n    self.cleanup()\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\netmiko\\cisco_base_connection.py\", line 52, in cleanup\r\n    self.exit_config_mode()\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\netmiko\\linux\\linux_ssh.py\", line 40, in exit_config_mode\r\n    return self.exit_enable_mode(exit_command=exit_config)\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\netmiko\\linux\\linux_ssh.py\", line 53, in exit_enable_mode\r\n    self.set_base_prompt()\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\netmiko\\linux\\linux_ssh.py\", line 21, in set_base_prompt\r\n    delay_factor=delay_factor)\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\netmiko\\base_connection.py\", line 504, in set_base_prompt\r\n    prompt = self.find_prompt(delay_factor=delay_factor)\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\netmiko\\base_connection.py\", line 516, in find_prompt\r\n    self.write_channel(\"\\n\")\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\netmiko\\base_connection.py\", line 99, in write_channel\r\n    self.remote_conn.sendall(write_bytes(out_data))\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\paramiko\\channel.py\", line 813, in sendall\r\n    sent = self.send(s)\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\paramiko\\channel.py\", line 767, in send\r\n    return self._send(s, m)\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\paramiko\\channel.py\", line 1133, in _send\r\n    raise socket.error('Socket is closed')\r\nOSError: Socket is closed\r\n\r\n\r\nHere is my code:\r\n\r\nfrom netmiko import ConnectHandler\r\n\r\nplatform = 'linux'\r\nhost='***'\r\nusername='root'\r\npassword='***'\r\n\r\ndevice = ConnectHandler(device_type=platform, ip=host, username=username, password=password)\r\ncommand = \"pwd\"\r\noutput = device.send_command(command)\r\nprint(output)\r\ndevice.disconnect()\r\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/348/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/348/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/346", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/346/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/346/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/346/events", "html_url": "https://github.com/ktbyers/netmiko/issues/346", "id": 198091862, "node_id": "MDU6SXNzdWUxOTgwOTE4NjI=", "number": 346, "title": "HP Procurve Logout Process Incomplete", "user": {"login": "tyler-8", "id": 17618971, "node_id": "MDQ6VXNlcjE3NjE4OTcx", "avatar_url": "https://avatars.githubusercontent.com/u/17618971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tyler-8", "html_url": "https://github.com/tyler-8", "followers_url": "https://api.github.com/users/tyler-8/followers", "following_url": "https://api.github.com/users/tyler-8/following{/other_user}", "gists_url": "https://api.github.com/users/tyler-8/gists{/gist_id}", "starred_url": "https://api.github.com/users/tyler-8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tyler-8/subscriptions", "organizations_url": "https://api.github.com/users/tyler-8/orgs", "repos_url": "https://api.github.com/users/tyler-8/repos", "events_url": "https://api.github.com/users/tyler-8/events{/privacy}", "received_events_url": "https://api.github.com/users/tyler-8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-12-30T01:21:52Z", "updated_at": "2017-02-14T20:12:59Z", "closed_at": "2017-02-14T20:12:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The HP Procurve logout process looks like\r\n\r\n    switch# exit\r\n    switch> exit\r\n    Do you want to log out (y/n)? y\r\nHowever netmiko currently only does one `exit` before closing SSH connection. This results in the following syslog message:\r\n`ssh: AM1: read error Connection reset by peer, session aborted`", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/346/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/346/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/290", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/290/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/290/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/290/events", "html_url": "https://github.com/ktbyers/netmiko/issues/290", "id": 181759418, "node_id": "MDU6SXNzdWUxODE3NTk0MTg=", "number": 290, "title": "output missing from send_config_set", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-10-07T20:21:36Z", "updated_at": "2016-10-25T19:12:20Z", "closed_at": "2016-10-25T19:12:20Z", "author_association": "OWNER", "active_lock_reason": null, "body": "missing 'conf t'\nmissing initial router prompt for first config command.\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/290/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/290/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/281", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/281/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/281/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/281/events", "html_url": "https://github.com/ktbyers/netmiko/issues/281", "id": 179004622, "node_id": "MDU6SXNzdWUxNzkwMDQ2MjI=", "number": 281, "title": "Line wrapping behavior on ASA (still happening)", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-09-24T01:59:37Z", "updated_at": "2018-08-09T00:11:25Z", "closed_at": "2018-08-09T00:11:25Z", "author_association": "OWNER", "active_lock_reason": null, "body": "###### \n\nobject-group network PYCLASS\ntwb-dc-fw1(config-network-object-group)# no network-object object pylab7a.twb-$\ntwb-dc-fw1(config-network-object-group)# no object network pylab7a.twb-tech.com\ntwb-dc-fw1(config)# end\ntwb-dc-fw1# \n###### \n\nNetmiko 1.0.0\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/281/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/281/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/263", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/263/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/263/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/263/events", "html_url": "https://github.com/ktbyers/netmiko/issues/263", "id": 173906379, "node_id": "MDU6SXNzdWUxNzM5MDYzNzk=", "number": 263, "title": "Cisco WLC config mode and related methods", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 417085654, "node_id": "MDU6TGFiZWw0MTcwODU2NTQ=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/Netmiko%201_0", "name": "Netmiko 1_0", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-08-30T00:55:02Z", "updated_at": "2016-09-07T14:03:14Z", "closed_at": "2016-09-07T14:03:14Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Need to either implement or cause to be noop (or explicit exception).\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/263/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/256", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/256/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/256/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/256/events", "html_url": "https://github.com/ktbyers/netmiko/issues/256", "id": 172800383, "node_id": "MDU6SXNzdWUxNzI4MDAzODM=", "number": 256, "title": "scp transfer issue--disconnects and possible slow transfer speeds", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 417085654, "node_id": "MDU6TGFiZWw0MTcwODU2NTQ=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/Netmiko%201_0", "name": "Netmiko 1_0", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-08-23T20:36:46Z", "updated_at": "2016-09-05T23:53:37Z", "closed_at": "2016-09-05T23:53:37Z", "author_association": "OWNER", "active_lock_reason": null, "body": "It has been reported that netmiko is slow to tranfer and possible causes disconnects.\n\ncisco IOS \nmodel 2900\n\n100MB file size\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/256/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/249", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/249/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/249/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/249/events", "html_url": "https://github.com/ktbyers/netmiko/issues/249", "id": 169013700, "node_id": "MDU6SXNzdWUxNjkwMTM3MDA=", "number": 249, "title": "send_command_expect() is not wired in for global_delay_factor()", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 417085654, "node_id": "MDU6TGFiZWw0MTcwODU2NTQ=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/Netmiko%201_0", "name": "Netmiko 1_0", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-08-02T23:35:09Z", "updated_at": "2016-08-26T02:04:01Z", "closed_at": "2016-08-26T02:04:01Z", "author_association": "OWNER", "active_lock_reason": null, "body": "This causes NAPALM to not be able to adjust this timing.\n\nOriginal problem report from @jedelman8 \n\n```\nhey @ktbyers  have you seen this much  `(\"Timed out waiting for recv_ready\")`?  currently seeing it on\nevery push for a given device using napalm.  tried making timeout 180 and global_delay_factor 5 and\nno dice.  Running the `config replace` command manually completes just fine on the CLI in about \n25-30 seconds.\n```\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/249/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/218", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/218/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/218/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/218/events", "html_url": "https://github.com/ktbyers/netmiko/issues/218", "id": 156682593, "node_id": "MDU6SXNzdWUxNTY2ODI1OTM=", "number": 218, "title": "Ansi escape codes not being escaped on send_config_set", "user": {"login": "fefa2k", "id": 7238026, "node_id": "MDQ6VXNlcjcyMzgwMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/7238026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fefa2k", "html_url": "https://github.com/fefa2k", "followers_url": "https://api.github.com/users/fefa2k/followers", "following_url": "https://api.github.com/users/fefa2k/following{/other_user}", "gists_url": "https://api.github.com/users/fefa2k/gists{/gist_id}", "starred_url": "https://api.github.com/users/fefa2k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fefa2k/subscriptions", "organizations_url": "https://api.github.com/users/fefa2k/orgs", "repos_url": "https://api.github.com/users/fefa2k/repos", "events_url": "https://api.github.com/users/fefa2k/events{/privacy}", "received_events_url": "https://api.github.com/users/fefa2k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-05-25T07:38:09Z", "updated_at": "2016-06-10T19:19:07Z", "closed_at": "2016-06-10T19:19:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "On base_connection.py, the send_command function outputs no ansi escape codes but send_config_set does. I checked the code and I think these lines are missing on the send_config_set. After adding them it worked properly but I only managed to test it on HP ProCurve switches.\n\n```\n        # Some platforms have ansi_escape codes\n        if self.ansi_escape_codes:\n            output = self.strip_ansi_escape_codes(output)\n        output = self.normalize_linefeeds(output)\n        if strip_command:\n            output = self.strip_command(command_string, output)\n        if strip_prompt:\n            output = self.strip_prompt(output)\n```\n\nThe whole function would be like this:\n\n```\n    def send_config_set(self, config_commands=None, exit_config_mode=True, delay_factor=.1,\n                        max_loops=150, strip_prompt=False, strip_command=False):\n        \"\"\"\n        Send configuration commands down the SSH channel.\n\n        config_commands is an iterable containing all of the configuration commands.\n        The commands will be executed one after the other.\n\n        Automatically exits/enters configuration mode.\n        \"\"\"\n        debug = False\n\n        if config_commands is None:\n            return ''\n        if not hasattr(config_commands, '__iter__'):\n            raise ValueError(\"Invalid argument passed into send_config_set\")\n\n        # Send config commands\n        output = self.config_mode()\n        for cmd in config_commands:\n            self.remote_conn.sendall(self.normalize_cmd(cmd))\n            time.sleep(delay_factor / 2.0)\n\n        # Gather output\n        for tmp_output in self.receive_data_generator(delay_factor=delay_factor,\n                                                      max_loops=max_loops):\n            output += tmp_output\n        if exit_config_mode:\n            output += self.exit_config_mode()\n        # Some platforms have ansi_escape codes\n        if self.ansi_escape_codes:\n            output = self.strip_ansi_escape_codes(output)\n        output = self.normalize_linefeeds(output)\n        if strip_command:\n            output = self.strip_command(command_string, output)\n        if strip_prompt:\n            output = self.strip_prompt(output)\n        if debug:\n            print(output)\n        return output\n```\n\nCould you please look into it? Thanks!\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/218/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/206", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/206/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/206/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/206/events", "html_url": "https://github.com/ktbyers/netmiko/issues/206", "id": 154624323, "node_id": "MDU6SXNzdWUxNTQ2MjQzMjM=", "number": 206, "title": "Juniper disable complete-on-space", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 437728358, "node_id": "MDU6TGFiZWw0Mzc3MjgzNTg=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/Netmiko%201_1", "name": "Netmiko 1_1", "color": "1d76db", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-05-13T03:03:47Z", "updated_at": "2017-11-23T17:33:43Z", "closed_at": "2017-11-23T17:33:43Z", "author_association": "OWNER", "active_lock_reason": null, "body": "set cli complete-on-space off \nDisabling complete-on-space\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/206/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/206/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/78", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/78/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/78/events", "html_url": "https://github.com/ktbyers/netmiko/issues/78", "id": 60970887, "node_id": "MDU6SXNzdWU2MDk3MDg4Nw==", "number": 78, "title": "send_command_expect() is not behaving correctly", "user": {"login": "ktbyers", "id": 899716, "node_id": "MDQ6VXNlcjg5OTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/899716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktbyers", "html_url": "https://github.com/ktbyers", "followers_url": "https://api.github.com/users/ktbyers/followers", "following_url": "https://api.github.com/users/ktbyers/following{/other_user}", "gists_url": "https://api.github.com/users/ktbyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktbyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktbyers/subscriptions", "organizations_url": "https://api.github.com/users/ktbyers/orgs", "repos_url": "https://api.github.com/users/ktbyers/repos", "events_url": "https://api.github.com/users/ktbyers/events{/privacy}", "received_events_url": "https://api.github.com/users/ktbyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-03-13T03:13:18Z", "updated_at": "2016-07-25T18:14:30Z", "closed_at": "2016-07-25T18:14:30Z", "author_association": "OWNER", "active_lock_reason": null, "body": "send_command_expect() should stop at the expect_string() and return only up to the end of the expect_string.\n\nstrip_prompt parameter should be renamed to give you the option of stripping the expect_string which is normally the prompt.\n\nIt currently stops on the expect_string, but catches all the data in the output buffer including after the expect_string.\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/78/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/78/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/62", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/62/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/62/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/62/events", "html_url": "https://github.com/ktbyers/netmiko/issues/62", "id": 60226794, "node_id": "MDU6SXNzdWU2MDIyNjc5NA==", "number": 62, "title": "Strip Additional Juniper Prompts", "user": {"login": "supertylerc", "id": 4076147, "node_id": "MDQ6VXNlcjQwNzYxNDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4076147?v=4", "gravatar_id": "", "url": "https://api.github.com/users/supertylerc", "html_url": "https://github.com/supertylerc", "followers_url": "https://api.github.com/users/supertylerc/followers", "following_url": "https://api.github.com/users/supertylerc/following{/other_user}", "gists_url": "https://api.github.com/users/supertylerc/gists{/gist_id}", "starred_url": "https://api.github.com/users/supertylerc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/supertylerc/subscriptions", "organizations_url": "https://api.github.com/users/supertylerc/orgs", "repos_url": "https://api.github.com/users/supertylerc/repos", "events_url": "https://api.github.com/users/supertylerc/events{/privacy}", "received_events_url": "https://api.github.com/users/supertylerc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-03-07T22:02:04Z", "updated_at": "2016-11-03T00:04:03Z", "closed_at": "2016-03-05T19:07:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There are Juniper prompts that are currently not stripped from output.  See below.\n\n```\n \u276f ssh 10.10.1.1\n--- JUNOS 12.1X44-D25.5 built 2013-10-24 20:59:21 UTC\nNo alarms currently active\n\n{primary:node0}\ntyler@fw1.example.com> start shell\n% rlogin -T node1\n\ufffd\n--- JUNOS 12.1X44-D25.5 built 2013-10-24 20:59:21 UTC\n\nNo alarms currently active\n\n{secondary:node1}\ntyler@fw1.example.com>\n```\n\nThe method `strip_context_items()` does not currently strip these from output.  I will submit a PR for this.\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/62/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/62/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/34", "repository_url": "https://api.github.com/repos/ktbyers/netmiko", "labels_url": "https://api.github.com/repos/ktbyers/netmiko/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/ktbyers/netmiko/issues/34/comments", "events_url": "https://api.github.com/repos/ktbyers/netmiko/issues/34/events", "html_url": "https://github.com/ktbyers/netmiko/issues/34", "id": 56288071, "node_id": "MDU6SXNzdWU1NjI4ODA3MQ==", "number": 34, "title": "Problem ending IOX XR config mode without commit command", "user": {"login": "ravenblue12", "id": 10694541, "node_id": "MDQ6VXNlcjEwNjk0NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/10694541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravenblue12", "html_url": "https://github.com/ravenblue12", "followers_url": "https://api.github.com/users/ravenblue12/followers", "following_url": "https://api.github.com/users/ravenblue12/following{/other_user}", "gists_url": "https://api.github.com/users/ravenblue12/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravenblue12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravenblue12/subscriptions", "organizations_url": "https://api.github.com/users/ravenblue12/orgs", "repos_url": "https://api.github.com/users/ravenblue12/repos", "events_url": "https://api.github.com/users/ravenblue12/events{/privacy}", "received_events_url": "https://api.github.com/users/ravenblue12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152357530, "node_id": "MDU6TGFiZWwxNTIzNTc1MzA=", "url": "https://api.github.com/repos/ktbyers/netmiko/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2015-02-02T20:24:16Z", "updated_at": "2015-05-21T23:37:48Z", "closed_at": "2015-05-21T23:37:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following question will occur when you end the config mode at IOS XR without commit:\n\nRP/0/0/CPU0:ios-xrv(config)#end\nUncommitted changes found, commit them before exiting(yes/no/cancel)? [cancel]:\n", "reactions": {"url": "https://api.github.com/repos/ktbyers/netmiko/issues/34/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ktbyers/netmiko/issues/34/timeline", "performed_via_github_app": null, "state_reason": "completed"}]