[{"url": "https://api.github.com/repos/aws/chalice/issues/1971", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1971/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1971/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1971/events", "html_url": "https://github.com/aws/chalice/issues/1971", "id": 1358459913, "node_id": "I_kwDOA5GEZs5Q-HQJ", "number": 1971, "title": "update does not change version", "user": {"login": "muto-riho", "id": 67942946, "node_id": "MDQ6VXNlcjY3OTQyOTQ2", "avatar_url": "https://avatars.githubusercontent.com/u/67942946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muto-riho", "html_url": "https://github.com/muto-riho", "followers_url": "https://api.github.com/users/muto-riho/followers", "following_url": "https://api.github.com/users/muto-riho/following{/other_user}", "gists_url": "https://api.github.com/users/muto-riho/gists{/gist_id}", "starred_url": "https://api.github.com/users/muto-riho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muto-riho/subscriptions", "organizations_url": "https://api.github.com/users/muto-riho/orgs", "repos_url": "https://api.github.com/users/muto-riho/repos", "events_url": "https://api.github.com/users/muto-riho/events{/privacy}", "received_events_url": "https://api.github.com/users/muto-riho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-01T08:29:45Z", "updated_at": "2022-09-01T18:12:55Z", "closed_at": "2022-09-01T18:12:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I updated to chalice1.27.2, but when I run \"chalice --version\" it says \"chalice 1.27.1\".\r\nWhen I was checking the update status, I found that the 25th line below in app.py, which was rewritten in version 1.27.1, was chalice 1.27.1.Is it related?\r\nhttps://github.com/aws/chalice/blob/d0faf162a09dfc7f5ffd2e9902cd685345f2e5fa/chalice/app.py#L25", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1971/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1971/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1967", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1967/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1967/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1967/events", "html_url": "https://github.com/aws/chalice/issues/1967", "id": 1356014413, "node_id": "I_kwDOA5GEZs5Q0yNN", "number": 1967, "title": "@app.schedule No longer supports Rate/Cron object expression", "user": {"login": "dhay", "id": 569419, "node_id": "MDQ6VXNlcjU2OTQxOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/569419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhay", "html_url": "https://github.com/dhay", "followers_url": "https://api.github.com/users/dhay/followers", "following_url": "https://api.github.com/users/dhay/following{/other_user}", "gists_url": "https://api.github.com/users/dhay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhay/subscriptions", "organizations_url": "https://api.github.com/users/dhay/orgs", "repos_url": "https://api.github.com/users/dhay/repos", "events_url": "https://api.github.com/users/dhay/events{/privacy}", "received_events_url": "https://api.github.com/users/dhay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-30T16:20:21Z", "updated_at": "2022-08-31T16:17:26Z", "closed_at": "2022-08-31T16:17:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "A recent commit (afd23d7d729f8383033fe3851bc1de5effd1f22f), added types to the various decorators.  In particular, the `@app.schedule` decorator requires `expression` to be a `str`, which means that it no longer accepts the object type `Rate` or `Cron`.\r\n\r\nI used to be able to do this (and the [Chalice documentation shows this example as well](https://aws.github.io/chalice/topics/events.html#scheduled-events))\r\n```python\r\n@app.schedule(Rate(1, unit=Rate.HOURS), name=f\"send_call_reminders-{ENV}\")\r\n```\r\nNow, I have to add a `to_string()` call as follows:\r\n```python\r\n@app.schedule(Rate(1, unit=Rate.HOURS).to_string(), name=f\"send_call_reminders-{ENV}\")\r\n```\r\n\r\nI'm thinking the type for the `schedule` decorator should probably be `Union[str, ScheduleExpression]`.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1967/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1967/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1887", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1887/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1887/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1887/events", "html_url": "https://github.com/aws/chalice/issues/1887", "id": 1126024159, "node_id": "I_kwDOA5GEZs5DHcPf", "number": 1887, "title": "Bug: Chalice raises RuntimeError when pip >=22.0.0", "user": {"login": "luqasz", "id": 925215, "node_id": "MDQ6VXNlcjkyNTIxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/925215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqasz", "html_url": "https://github.com/luqasz", "followers_url": "https://api.github.com/users/luqasz/followers", "following_url": "https://api.github.com/users/luqasz/following{/other_user}", "gists_url": "https://api.github.com/users/luqasz/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqasz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqasz/subscriptions", "organizations_url": "https://api.github.com/users/luqasz/orgs", "repos_url": "https://api.github.com/users/luqasz/repos", "events_url": "https://api.github.com/users/luqasz/events{/privacy}", "received_events_url": "https://api.github.com/users/luqasz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-02-07T13:51:58Z", "updated_at": "2022-02-08T18:13:03Z", "closed_at": "2022-02-08T18:13:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Versions of pip >=22.0.0 won't work with chalice.\r\n```python\r\nFile \"/home/runner/work/SOME_DIR/lambda/.venv/lib/python3.9/site-packages/chalice/compat.py\", line 34, in pip_import_string\r\n    raise RuntimeError(\"Unknown import string for pip version: %s\"\r\nRuntimeError: Unknown import string for pip version: (22, 0)\r\n```\r\nhttps://github.com/aws/chalice/blob/master/chalice/compat.py#L31 Missing elif for newer pip.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1887/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1887/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1858", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1858/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1858/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1858/events", "html_url": "https://github.com/aws/chalice/issues/1858", "id": 1085173819, "node_id": "I_kwDOA5GEZs5ArnA7", "number": 1858, "title": "Policy generator uses incorrect SQS permissions for *Batch actions", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-12-20T20:24:43Z", "updated_at": "2022-04-27T15:18:09Z", "closed_at": "2022-04-27T15:18:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Chalice version 1.26.2\r\nPython 3.9\r\n\r\nTL;DR - Policy generator will output IAM policies with `sqs:SendMessageBatch` or `sqs:DeleteMessageBatch`, even though it is not a valid IAM permission.\r\n\r\nSteps to reproduce:\r\n\r\n1. Create a simple chalice app that uses ```sqs_client.send_message_batch``` and/or ```sqs_client.delete_message_batch``` (See here: https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/sqs.html#SQS.Client.send_message_batch)\r\n2. Use `chalice gen-policy`\r\n3. See that the IAM auto-generated policy contains IAM permissions that do not exist. Example:\r\n```\r\n{\r\n  \"Version\": \"2012-10-17\",\r\n  \"Statement\": [\r\n    {\r\n      \"Effect\": \"Allow\",\r\n      \"Action\": [\r\n        \"sqs:DeleteMessageBatch\",\r\n        \"sqs:GetQueueUrl\",\r\n        \"sqs:ReceiveMessage\",\r\n        \"sqs:SendMessageBatch\"\r\n      ],\r\n      \"Resource\": [\r\n        \"*\"\r\n      ],\r\n      \"Sid\": \"eef17f7dab3841c09ab195fa2533cef5\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n`sqs:SendMessageBatch` and `sqs:DeleteMessageBatch` are valid SQS actions, but are not valid IAM permissions. It should be `sqs:SendMessage` and `sqsDeleteMessage`. See the table of required permissions for actions in SQS: https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-api-permissions-reference.html", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1858/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1858/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1786", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1786/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1786/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1786/events", "html_url": "https://github.com/aws/chalice/issues/1786", "id": 972292746, "node_id": "MDU6SXNzdWU5NzIyOTI3NDY=", "number": 1786, "title": "Expand attrs requirement range to 21.* version for compatibility with latest AWS CDK versions", "user": {"login": "alexpulver", "id": 4362270, "node_id": "MDQ6VXNlcjQzNjIyNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/4362270?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexpulver", "html_url": "https://github.com/alexpulver", "followers_url": "https://api.github.com/users/alexpulver/followers", "following_url": "https://api.github.com/users/alexpulver/following{/other_user}", "gists_url": "https://api.github.com/users/alexpulver/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexpulver/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexpulver/subscriptions", "organizations_url": "https://api.github.com/users/alexpulver/orgs", "repos_url": "https://api.github.com/users/alexpulver/repos", "events_url": "https://api.github.com/users/alexpulver/events{/privacy}", "received_events_url": "https://api.github.com/users/alexpulver/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-08-17T04:34:37Z", "updated_at": "2021-08-18T19:03:38Z", "closed_at": "2021-08-18T19:03:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "The latest AWS CDK versions require `attrs~=21.2`, whereas Chalice latest version requires `attrs<20.4.0`.\r\nCan the support for `attrs~=21.*` be added please?\r\n\r\nBelow is the output from pip-compile for requirements file containing both AWS CDK and Chalice packages:\r\n```\r\nThere are incompatible versions in the resolved dependencies:\r\n  attrs~=21.2 (from jsii==1.33.0->aws-cdk.core==1.118.0->cdk-chalice (setup.py))\r\n  attrs<20.4.0,>=19.3.0 (from chalice==1.24.1->cdk-chalice (setup.py))\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1786/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1775", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1775/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1775/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1775/events", "html_url": "https://github.com/aws/chalice/issues/1775", "id": 958789026, "node_id": "MDU6SXNzdWU5NTg3ODkwMjY=", "number": 1775, "title": "Authorizer arn parsing leading to wrong authorization granted", "user": {"login": "jdipsip", "id": 39262165, "node_id": "MDQ6VXNlcjM5MjYyMTY1", "avatar_url": "https://avatars.githubusercontent.com/u/39262165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdipsip", "html_url": "https://github.com/jdipsip", "followers_url": "https://api.github.com/users/jdipsip/followers", "following_url": "https://api.github.com/users/jdipsip/following{/other_user}", "gists_url": "https://api.github.com/users/jdipsip/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdipsip/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdipsip/subscriptions", "organizations_url": "https://api.github.com/users/jdipsip/orgs", "repos_url": "https://api.github.com/users/jdipsip/repos", "events_url": "https://api.github.com/users/jdipsip/events{/privacy}", "received_events_url": "https://api.github.com/users/jdipsip/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-08-03T06:51:22Z", "updated_at": "2021-08-04T16:30:02Z", "closed_at": "2021-08-04T16:30:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description\r\n\r\nThe authorizer URL construction behaves wrongly when the URL contains `:` character due to [https://github.com/aws/chalice/blob/3c01606f327f86f68dface7088d83cd98419e7b3/chalice/app.py#L1343](method_arn splitting) when using custom authorizer and AuthResponse\r\n\r\nAllowed routes arn are then prefixed with everything before the last : instead of only the api id and the stage.\r\n\r\n### Working Example\r\n\r\nhttps://xxxxxxx.execute-api.eu-central-1.amazonaws.com/lab/yyyy/shops/zzzz/counters/HOUR/2021-08-01T00.00.00Z/2021-08-10T00.00.00Z\r\n\r\nGenerates :\r\n\r\n```\r\narn:aws:execute-api:eu-central-1:zzz:yyyy/lab/*/tenants/self\r\n```\r\n\r\n=> the arn of the route allowed is correct\r\n\r\n### Failing Example\r\n\r\nhttps://xxxxxxx.execute-api.eu-central-1.amazonaws.com/lab/yyyy/shops/zzzz/counters/HOUR/2021-08-01T00:00:00Z/2021-08-10T00:00:00Z\r\n\r\n```\r\narn:aws:execute-api:eu-central-1:zzz:yyyy/lab/GET/yyyy/shops/zzzz/counters/HOUR/2021-08-01T00:00:00Z/2021-08-10T00:00:00Z/*/tenants/self\r\n```\r\n=> the arn of the routes allowed is incorrect prefixed by the requested url\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1775/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1775/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1590", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1590/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1590/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1590/events", "html_url": "https://github.com/aws/chalice/issues/1590", "id": 754350693, "node_id": "MDU6SXNzdWU3NTQzNTA2OTM=", "number": 1590, "title": "ERROR: chalice 1.21.4 requires pip<20.3,>=9, but you'll have pip 20.3 which is incompatible", "user": {"login": "denis-ryzhkov", "id": 855988, "node_id": "MDQ6VXNlcjg1NTk4OA==", "avatar_url": "https://avatars.githubusercontent.com/u/855988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/denis-ryzhkov", "html_url": "https://github.com/denis-ryzhkov", "followers_url": "https://api.github.com/users/denis-ryzhkov/followers", "following_url": "https://api.github.com/users/denis-ryzhkov/following{/other_user}", "gists_url": "https://api.github.com/users/denis-ryzhkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/denis-ryzhkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/denis-ryzhkov/subscriptions", "organizations_url": "https://api.github.com/users/denis-ryzhkov/orgs", "repos_url": "https://api.github.com/users/denis-ryzhkov/repos", "events_url": "https://api.github.com/users/denis-ryzhkov/events{/privacy}", "received_events_url": "https://api.github.com/users/denis-ryzhkov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-12-01T12:23:02Z", "updated_at": "2020-12-03T16:10:43Z", "closed_at": "2020-12-03T16:10:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Another iteration of https://github.com/aws/chalice/issues/1344 and https://github.com/aws/chalice/issues/1085", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1590/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1590/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1573", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1573/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1573/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1573/events", "html_url": "https://github.com/aws/chalice/issues/1573", "id": 737911261, "node_id": "MDU6SXNzdWU3Mzc5MTEyNjE=", "number": 1573, "title": "Environment variable values must be strings, got 'type' unicode for key 'ENV'", "user": {"login": "3dw1np", "id": 814267, "node_id": "MDQ6VXNlcjgxNDI2Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/814267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/3dw1np", "html_url": "https://github.com/3dw1np", "followers_url": "https://api.github.com/users/3dw1np/followers", "following_url": "https://api.github.com/users/3dw1np/following{/other_user}", "gists_url": "https://api.github.com/users/3dw1np/gists{/gist_id}", "starred_url": "https://api.github.com/users/3dw1np/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/3dw1np/subscriptions", "organizations_url": "https://api.github.com/users/3dw1np/orgs", "repos_url": "https://api.github.com/users/3dw1np/repos", "events_url": "https://api.github.com/users/3dw1np/events{/privacy}", "received_events_url": "https://api.github.com/users/3dw1np/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-06T17:02:21Z", "updated_at": "2020-12-03T16:11:04Z", "closed_at": "2020-12-03T16:11:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using the version 1.21.4 of chalice and I am getting this error below during the deployment:\r\n```Environment variable values must be strings, got 'type' unicode for key 'ENV'```\r\n\r\nI am still using python 2.7 on my local computer but it was working fine on chalice 1.21.2", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1573/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1573/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1563", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1563/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1563/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1563/events", "html_url": "https://github.com/aws/chalice/issues/1563", "id": 730080842, "node_id": "MDU6SXNzdWU3MzAwODA4NDI=", "number": 1563, "title": "Multiple references to managed layer", "user": {"login": "aeresov", "id": 9170707, "node_id": "MDQ6VXNlcjkxNzA3MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9170707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aeresov", "html_url": "https://github.com/aeresov", "followers_url": "https://api.github.com/users/aeresov/followers", "following_url": "https://api.github.com/users/aeresov/following{/other_user}", "gists_url": "https://api.github.com/users/aeresov/gists{/gist_id}", "starred_url": "https://api.github.com/users/aeresov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aeresov/subscriptions", "organizations_url": "https://api.github.com/users/aeresov/orgs", "repos_url": "https://api.github.com/users/aeresov/repos", "events_url": "https://api.github.com/users/aeresov/events{/privacy}", "received_events_url": "https://api.github.com/users/aeresov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-10-27T03:54:16Z", "updated_at": "2020-10-30T19:02:39Z", "closed_at": "2020-10-30T19:02:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "In case application uses `\"automatic_layer\": true` along with some existing layers in stage definition, generated SAM template has multiple references to managed layer. It impedes deployment, as AWS limits the number of layers to 5.\r\n\r\nSo, I have `config.json` like this:\r\n```json\r\n{\r\n  \"version\": \"2.0\",\r\n  \"app_name\": \"appname\",\r\n  \"automatic_layer\": true,\r\n  \"stages\": {\r\n    \"dev\": {\r\n      \"layers\": [\r\n        \"arn:aws:lambda:region:account:layer:somelayer\"\r\n      ]\r\n    }\r\n}\r\n```\r\nI run `chalice package` and my SAM has this:\r\n```json\r\n    \"Smoke\": {\r\n      \"Type\": \"AWS::Serverless::Function\",\r\n      \"Properties\": {\r\n        \"Runtime\": \"python3.7\",\r\n        \"Handler\": \"app.on_smoke\",\r\n        \"CodeUri\": \"./deployment.zip\",\r\n        \"Tags\": {\r\n          \"aws-chalice\": \"version=1.21.3:stage=dev:app=appname\"\r\n        },\r\n        \"Tracing\": \"PassThrough\",\r\n        \"Timeout\": 300,\r\n        \"MemorySize\": 128,\r\n        \"Layers\": [\r\n          {\r\n            \"Ref\": \"ManagedLayer\"\r\n          },\r\n          {\r\n            \"Ref\": \"ManagedLayer\"\r\n          },\r\n          {\r\n            \"Ref\": \"ManagedLayer\"\r\n          },\r\n          {\r\n            \"Ref\": \"ManagedLayer\"\r\n          },\r\n          {\r\n            \"Ref\": \"ManagedLayer\"\r\n          },\r\n          \"arn:aws:lambda:region:account:layer:somelayer\"\r\n        ]\r\n      }\r\n    }\r\n```\r\nNumber of unwanted refs seems to match the number of lambda functions in the app.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1563/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1563/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1535", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1535/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1535/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1535/events", "html_url": "https://github.com/aws/chalice/issues/1535", "id": 713122807, "node_id": "MDU6SXNzdWU3MTMxMjI4MDc=", "number": 1535, "title": "Imported Blueprint containing pure lambda does not execute", "user": {"login": "danieltensoriot", "id": 60401948, "node_id": "MDQ6VXNlcjYwNDAxOTQ4", "avatar_url": "https://avatars.githubusercontent.com/u/60401948?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danieltensoriot", "html_url": "https://github.com/danieltensoriot", "followers_url": "https://api.github.com/users/danieltensoriot/followers", "following_url": "https://api.github.com/users/danieltensoriot/following{/other_user}", "gists_url": "https://api.github.com/users/danieltensoriot/gists{/gist_id}", "starred_url": "https://api.github.com/users/danieltensoriot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danieltensoriot/subscriptions", "organizations_url": "https://api.github.com/users/danieltensoriot/orgs", "repos_url": "https://api.github.com/users/danieltensoriot/repos", "events_url": "https://api.github.com/users/danieltensoriot/events{/privacy}", "received_events_url": "https://api.github.com/users/danieltensoriot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-10-01T19:26:03Z", "updated_at": "2020-10-01T22:34:39Z", "closed_at": "2020-10-01T22:34:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue\r\nCalling a pure lambda defined in a Blueprint that is registered in `app.py` returns a `TypeError`\r\n# Received error\r\nError received from CLI invocation `chalice invoke -n token_generator`\r\n```\r\nTraceback (most recent call last):\r\n  File \"/var/runtime/bootstrap.py\", line 131, in handle_event_request\r\n    response = request_handler(event, lambda_context)\r\nTypeError: _defer_wrap_handler() takes 1 positional argument but 2 were given\r\nError: Unhandled exception in Lambda function, details above\r\n```\r\n# Associated files\r\n## File Structure\r\n```\r\n$ tree\r\n.\r\n\u251c\u2500\u2500 chalicelib\r\n\u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u251c\u2500\u2500 blueprints\r\n\u2502   \u2502   \u2514\u2500\u2500 token_generatory_blueprint.py\r\n\u2502   \u2514\u2500\u2500 utils\r\n\u2502        \u2514\u2500\u2500 token_generatory.py\r\n\u251c\u2500\u2500 app.py\r\n\u2514\u2500\u2500 requirements.txt\r\n```\r\n## Files\r\n`app.py`\r\n```python\r\nfrom chalice import Chalice\r\nfrom chalicelib.blueprints from token_generator_blueprint\r\n\r\napp = Chalice(app_name='project_name')\r\napp.register_blueprint(token_generator_blueprint.token_generator_blueprint)\r\n```\r\n`token_generator_blueprint.py`\r\n```\r\n\"\"\"collection of pure AWS Lambda functions\"\"\"\r\nfrom chalicelib.utils import token_generator\r\n\r\nimport logging\r\n\r\nfrom chalice import Blueprint\r\n\r\ntoken_generator_blueprint = Blueprint(__name__)\r\nlogger = logging.getLogger('root')\r\n\r\n@token_generator_blueprint.lambda_function(name='token_generator')\r\ndef lambda_token_generator_blueprint(event, context):\r\n  return token_generator.handler(event, context)\r\n```\r\n`token_generator.py`\r\n```\r\ndef handler(event, context):\r\n  return {\"foo\":\"bar\"}\r\n```\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1535/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1535/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1531", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1531/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1531/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1531/events", "html_url": "https://github.com/aws/chalice/issues/1531", "id": 710249739, "node_id": "MDU6SXNzdWU3MTAyNDk3Mzk=", "number": 1531, "title": "Error creating custom domain for websockets", "user": {"login": "rafagan", "id": 2295481, "node_id": "MDQ6VXNlcjIyOTU0ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/2295481?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rafagan", "html_url": "https://github.com/rafagan", "followers_url": "https://api.github.com/users/rafagan/followers", "following_url": "https://api.github.com/users/rafagan/following{/other_user}", "gists_url": "https://api.github.com/users/rafagan/gists{/gist_id}", "starred_url": "https://api.github.com/users/rafagan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rafagan/subscriptions", "organizations_url": "https://api.github.com/users/rafagan/orgs", "repos_url": "https://api.github.com/users/rafagan/repos", "events_url": "https://api.github.com/users/rafagan/events{/privacy}", "received_events_url": "https://api.github.com/users/rafagan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-09-28T13:07:48Z", "updated_at": "2020-10-07T20:11:25Z", "closed_at": "2020-10-07T20:11:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I try to create a custom domain for my websocket the following error occurs:\r\n\r\n```\r\nUpdating custom domain name: api.transferbank.com.br\r\nTraceback (most recent call last):\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/chalice/cli/__init__.py\", line 646, in main\r\n    return cli(obj={})\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/click/core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/click/core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/click/core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/click/core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/click/core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/click/decorators.py\", line 21, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/chalice/cli/__init__.py\", line 206, in deploy\r\n    deployed_values = d.deploy(config, chalice_stage_name=stage)\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/chalice/deploy/deployer.py\", line 374, in deploy\r\n    return self._deploy(config, chalice_stage_name)\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/chalice/deploy/deployer.py\", line 390, in _deploy\r\n    self._executor.execute(plan)\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/chalice/deploy/executor.py\", line 42, in execute\r\n    getattr(self, '_do_%s' % instruction.__class__.__name__.lower(),\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/chalice/deploy/executor.py\", line 55, in _do_apicall\r\n    result = method(**final_kwargs)\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/chalice/awsclient.py\", line 702, in update_domain_name\r\n    updated_domain_name = self._update_domain_name_v2(kwargs)\r\n  File \"/Users/rafagan/.virtualenvs/tb-websocket-ws/lib/python3.8/site-packages/chalice/awsclient.py\", line 802, in _update_domain_name_v2\r\n    'hosted_zone_id': result_data['HostedZoneId'],\r\nKeyError: 'HostedZoneId'\r\n```\r\n\r\nMy configuration is:\r\n\r\n```\r\n\"websocket_api_custom_domain\": {\r\n  \"domain_name\": \"api.transferbank.com.br\",\r\n  \"certificate_arn\": \"arn:aws:acm:us-east-1:073289305372:certificate/d995959e-6f7d-4fcb-9c56-bf370ca1a382\",\r\n  \"url_prefix\": \"tb_wst_channel_manager\"\r\n},\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1531/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1531/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1525", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1525/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1525/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1525/events", "html_url": "https://github.com/aws/chalice/issues/1525", "id": 705793055, "node_id": "MDU6SXNzdWU3MDU3OTMwNTU=", "number": 1525, "title": "Blueprint.route() no longer retains __doc__", "user": {"login": "nayaverdier", "id": 22308030, "node_id": "MDQ6VXNlcjIyMzA4MDMw", "avatar_url": "https://avatars.githubusercontent.com/u/22308030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nayaverdier", "html_url": "https://github.com/nayaverdier", "followers_url": "https://api.github.com/users/nayaverdier/followers", "following_url": "https://api.github.com/users/nayaverdier/following{/other_user}", "gists_url": "https://api.github.com/users/nayaverdier/gists{/gist_id}", "starred_url": "https://api.github.com/users/nayaverdier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nayaverdier/subscriptions", "organizations_url": "https://api.github.com/users/nayaverdier/orgs", "repos_url": "https://api.github.com/users/nayaverdier/repos", "events_url": "https://api.github.com/users/nayaverdier/events{/privacy}", "received_events_url": "https://api.github.com/users/nayaverdier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-09-21T17:41:46Z", "updated_at": "2020-09-21T19:58:49Z", "closed_at": "2020-09-21T19:58:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Code snippet below succeeds on chalice `v1.19.0` and fails on chalice `v1.20.0`. This does not seem to affect `Chalice` objects (the snippet succeeds if `b = Chalice(__name__)` on both versions)\r\n\r\n```python\r\nfrom chalice import Blueprint\r\n\r\nb = Blueprint(__name__)\r\n\r\n@b.route(\"/test\", methods=[\"POST\"])\r\ndef x():\r\n    \"\"\"a\"\"\"\r\n    pass\r\n\r\nassert x.__doc__ == \"a\"\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1525/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1525/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1508", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1508/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1508/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1508/events", "html_url": "https://github.com/aws/chalice/issues/1508", "id": 693200045, "node_id": "MDU6SXNzdWU2OTMyMDAwNDU=", "number": 1508, "title": "Terraform aws provider invalid arn for s3 lambda permission", "user": {"login": "kalpaitch", "id": 334114, "node_id": "MDQ6VXNlcjMzNDExNA==", "avatar_url": "https://avatars.githubusercontent.com/u/334114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kalpaitch", "html_url": "https://github.com/kalpaitch", "followers_url": "https://api.github.com/users/kalpaitch/followers", "following_url": "https://api.github.com/users/kalpaitch/following{/other_user}", "gists_url": "https://api.github.com/users/kalpaitch/gists{/gist_id}", "starred_url": "https://api.github.com/users/kalpaitch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kalpaitch/subscriptions", "organizations_url": "https://api.github.com/users/kalpaitch/orgs", "repos_url": "https://api.github.com/users/kalpaitch/repos", "events_url": "https://api.github.com/users/kalpaitch/events{/privacy}", "received_events_url": "https://api.github.com/users/kalpaitch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-09-04T13:59:37Z", "updated_at": "2020-10-15T15:32:12Z", "closed_at": "2020-10-15T15:32:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Packaging the chalice app for terraform is giving me an invalid source_arn error for the aws_lambda_permission s3event `\"source_arn\": \"arn:*:s3:::lambda-function-name`\r\n\r\n```\r\nError: \"source_arn\" (arn:*:s3:::lambda-function-name) is an invalid ARN:\r\ninvalid partition value (expecting to match regular expression: ^aws(-[a-z]+)*$)\r\n```\r\n\r\nI can't determine whether this is an issue with the validation of the provider or with how chalice is packaging this up?\r\n\r\nhttps://github.com/aws/chalice/blob/ba93124276c3f2d360286396e536520c9fa5fecf/chalice/package.py#L853\r\n\r\nchalice 1.18.1 & 1.19.0, python 3.8.0, terraform aws provider 3.4.0", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1508/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1508/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1503", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1503/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1503/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1503/events", "html_url": "https://github.com/aws/chalice/issues/1503", "id": 688155282, "node_id": "MDU6SXNzdWU2ODgxNTUyODI=", "number": 1503, "title": "botocore's LambdaContext returns wrong stage map on custom domains", "user": {"login": "fernandoflorez", "id": 50845, "node_id": "MDQ6VXNlcjUwODQ1", "avatar_url": "https://avatars.githubusercontent.com/u/50845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fernandoflorez", "html_url": "https://github.com/fernandoflorez", "followers_url": "https://api.github.com/users/fernandoflorez/followers", "following_url": "https://api.github.com/users/fernandoflorez/following{/other_user}", "gists_url": "https://api.github.com/users/fernandoflorez/gists{/gist_id}", "starred_url": "https://api.github.com/users/fernandoflorez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fernandoflorez/subscriptions", "organizations_url": "https://api.github.com/users/fernandoflorez/orgs", "repos_url": "https://api.github.com/users/fernandoflorez/repos", "events_url": "https://api.github.com/users/fernandoflorez/events{/privacy}", "received_events_url": "https://api.github.com/users/fernandoflorez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-28T15:27:17Z", "updated_at": "2020-10-07T21:29:40Z", "closed_at": "2020-10-07T21:29:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello,\r\n\r\nThis is not related to chalice but botocore but I'm posting it here so we can have it documented and also figure out if chalice should implement something around it.\r\n\r\nWhen the apigateway is published on a custom domain name and the stage mapped to something different, for example \"dev\" to \"dev-aws\" (dev-aws being the mapping on the custom domain) the event context still displays \"dev\" as the stage and so chalice websocket configure doesn't work. Mapping for the stage is optional also so the url formatting also fails.\r\n\r\nThanks!", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1503/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1494", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1494/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1494/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1494/events", "html_url": "https://github.com/aws/chalice/issues/1494", "id": 683230800, "node_id": "MDU6SXNzdWU2ODMyMzA4MDA=", "number": 1494, "title": "Issue using dataclasses.asdict in response body", "user": {"login": "rickbhardwaj", "id": 2549380, "node_id": "MDQ6VXNlcjI1NDkzODA=", "avatar_url": "https://avatars.githubusercontent.com/u/2549380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickbhardwaj", "html_url": "https://github.com/rickbhardwaj", "followers_url": "https://api.github.com/users/rickbhardwaj/followers", "following_url": "https://api.github.com/users/rickbhardwaj/following{/other_user}", "gists_url": "https://api.github.com/users/rickbhardwaj/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickbhardwaj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickbhardwaj/subscriptions", "organizations_url": "https://api.github.com/users/rickbhardwaj/orgs", "repos_url": "https://api.github.com/users/rickbhardwaj/repos", "events_url": "https://api.github.com/users/rickbhardwaj/events{/privacy}", "received_events_url": "https://api.github.com/users/rickbhardwaj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-21T03:23:58Z", "updated_at": "2020-08-24T21:30:06Z", "closed_at": "2020-08-24T21:28:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nBtw, I love Chalice. I ran into an issue where I tried to have a body variable in my response as follows:\r\n\r\n\r\n```\r\n@app.route('/private/users', cors=CORS_CONFIG)\r\ndef get_user():\r\n    user_dicts = [dataclasses.asdict(user) for user in users.list_users()]\r\n\r\n    return Response(\r\n        status_code=201,\r\n        headers=CORS_ENABLED_HEADERS,\r\n        body=user_dicts\r\n    )\r\n```\r\n\r\nUser is a `@dataclass` file. It's pretty simple: \r\n\r\n```\r\nfrom dataclasses import dataclass\r\nfrom typing import List\r\n\r\nfrom chalicelib.models.Message import Message\r\n\r\n\r\n@dataclass(frozen=True)\r\nclass User:\r\n    user_id: str\r\n    sms_number: str\r\n    email_address: str\r\n    trusted_devices: List[str]\r\n    conversation_history: List[Message]\r\n\r\n```\r\n\r\n\r\nThis works when I run `chalice local`. However, when I run `chalice deploy` and try to build, I get this message. \r\n\r\n\r\n```\r\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/symtable.py\", line 95, in lookup\r\n    flags = self._table.symbols[name]\r\nKeyError: 'user_dicts'\r\n```\r\n\r\n\r\nFull error log here: [chalice_deploy_err.txt](https://github.com/aws/chalice/files/5106624/chalice_deploy_err.txt)\r\n\r\nReplacing the body variable with an empty dict fixes the issue and I can run `chalice deploy`. \r\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1494/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1494/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1486", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1486/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1486/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1486/events", "html_url": "https://github.com/aws/chalice/issues/1486", "id": 678733787, "node_id": "MDU6SXNzdWU2Nzg3MzM3ODc=", "number": 1486, "title": "IndexError: list index out of range when datadog-lambda package is present", "user": {"login": "MehdiZonjy", "id": 5129182, "node_id": "MDQ6VXNlcjUxMjkxODI=", "avatar_url": "https://avatars.githubusercontent.com/u/5129182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MehdiZonjy", "html_url": "https://github.com/MehdiZonjy", "followers_url": "https://api.github.com/users/MehdiZonjy/followers", "following_url": "https://api.github.com/users/MehdiZonjy/following{/other_user}", "gists_url": "https://api.github.com/users/MehdiZonjy/gists{/gist_id}", "starred_url": "https://api.github.com/users/MehdiZonjy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MehdiZonjy/subscriptions", "organizations_url": "https://api.github.com/users/MehdiZonjy/orgs", "repos_url": "https://api.github.com/users/MehdiZonjy/repos", "events_url": "https://api.github.com/users/MehdiZonjy/events{/privacy}", "received_events_url": "https://api.github.com/users/MehdiZonjy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-13T21:05:26Z", "updated_at": "2020-08-24T22:19:10Z", "closed_at": "2020-08-24T22:19:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "`chalice deploy` fails with  `IndexError: list index out of range` when [datadog-lambda](https://pypi.org/project/datadog-lambda/) package is present.\r\nI'm runing on chalice version `chalice 1.17.0, python 3.7.7, linux 4.19.76-linuxkit`\r\n\r\n```\r\nroot@099d3ebf19dc:/app# chalice deploy\r\nCreating deployment package.\r\nTraceback (most recent call last):\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/cli/__init__.py\", line 636, in main\r\n    return cli(obj={})\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/click/core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/click/core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/click/core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/click/core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/click/decorators.py\", line 21, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/cli/__init__.py\", line 206, in deploy\r\n    deployed_values = d.deploy(config, chalice_stage_name=stage)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/deployer.py\", line 354, in deploy\r\n    return self._deploy(config, chalice_stage_name)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/deployer.py\", line 364, in _deploy\r\n    self._build_stage.execute(config, resources)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/deployer.py\", line 546, in execute\r\n    step.handle(config, resource)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/deployer.py\", line 394, in handle\r\n    handler(config, resource)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/deployer.py\", line 429, in handle_deploymentpackage\r\n    config.project_dir, config.lambda_python_version)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 95, in create_deployment_package\r\n    abi, requirements_filepath, site_packages_dir)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 547, in build_site_packages\r\n    abi, tempdir, requirements_filepath)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 444, in _download_dependencies\r\n    sdists = self._find_sdists(directory)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 351, in _find_sdists\r\n    in self._osutils.get_directory_contents(directory)]\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 350, in <listcomp>\r\n    packages = [Package(directory, filename) for filename\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 563, in __init__\r\n    self._name, self._version = self._calculate_name_and_version()\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 624, in _calculate_name_and_version\r\n    sdist_path)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 694, in get_package_name_and_version\r\n    pkg_info_filepath = self._generate_egg_info(package_dir)\r\n  File \"/opt/pyenv/versions/3.7.7/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 675, in _generate_egg_info\r\n    egg_info_dir, info_contents[0], 'PKG-INFO')\r\nIndexError: list index out of range\r\n```\r\n\r\n### Steps to reproduce:\r\n- `chalice new-project`\r\n- add `datadog-lambda` to `requirements.txt`\r\n- `chalice deploy`\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1486/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1470", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1470/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1470/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1470/events", "html_url": "https://github.com/aws/chalice/issues/1470", "id": 671980143, "node_id": "MDU6SXNzdWU2NzE5ODAxNDM=", "number": 1470, "title": "Authorizer AuthResponse routes with queryparameters not working in local", "user": {"login": "ivandjuricic", "id": 15219255, "node_id": "MDQ6VXNlcjE1MjE5MjU1", "avatar_url": "https://avatars.githubusercontent.com/u/15219255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivandjuricic", "html_url": "https://github.com/ivandjuricic", "followers_url": "https://api.github.com/users/ivandjuricic/followers", "following_url": "https://api.github.com/users/ivandjuricic/following{/other_user}", "gists_url": "https://api.github.com/users/ivandjuricic/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivandjuricic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivandjuricic/subscriptions", "organizations_url": "https://api.github.com/users/ivandjuricic/orgs", "repos_url": "https://api.github.com/users/ivandjuricic/repos", "events_url": "https://api.github.com/users/ivandjuricic/events{/privacy}", "received_events_url": "https://api.github.com/users/ivandjuricic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-03T10:38:14Z", "updated_at": "2020-08-04T23:14:14Z", "closed_at": "2020-08-04T23:14:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Sample app:\r\n```\r\nfrom chalice import Chalice, AuthResponse\r\n\r\napp = Chalice(app_name='authpath')\r\n\r\n@app.authorizer()\r\ndef auth(auth_request):\r\n    token = auth_request.token\r\n    if token == 'allow':\r\n        return AuthResponse(routes=['/protected'], principal_id='user')\r\n    return AuthResponse(routes=[], principal_id='user')\r\n\r\n\r\n@app.route('/protected', authorizer=auth)\r\ndef index():\r\n    return {'hello': 'world'}\r\n```\r\n\r\nWhen deployed: \r\n```\r\ncurl --location --request GET 'https://{{base_url}}/api/protected?queryparams=true' \\\r\n> --header 'Authorization: allow\r\n```\r\nresults in status 200 `{\"hello\":\"world\"}`\r\n\r\nWhen run in local:\r\n```\r\ncurl --location --request GET 'http://127.0.0.1:8000/protected?queryparams=true' \\\r\n--header 'Authorization: allow'\r\n```\r\nresults in status 403 `{\"Message\": \"User is not authorized to access this resource\"}`\r\n\r\nCause of the problem seems to be in :\r\n`chalice.local.LocalARNBuilder.build_arn` method, because it would return ARN preserving the queryparameters\r\neg: `'arn:aws:execute-api:mars-west-1:123456789012:ymy8tbxw7b/api/GET/protected?queryparams=true'`\r\n\r\nAlternatively if this is desired behaviour for local: \r\n`chalice.local.ARNMatcher._resource_match` on the line:\r\n\r\n`resource_regex = '^%s$' % resource_regex` \r\n\r\ncould be changed by removing `$` so it stops unmatching the remaining queryparameters that are in ARN\r\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1470/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1470/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1462", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1462/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1462/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1462/events", "html_url": "https://github.com/aws/chalice/issues/1462", "id": 665366909, "node_id": "MDU6SXNzdWU2NjUzNjY5MDk=", "number": 1462, "title": "Broken click dependency", "user": {"login": "crawforde", "id": 27984319, "node_id": "MDQ6VXNlcjI3OTg0MzE5", "avatar_url": "https://avatars.githubusercontent.com/u/27984319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crawforde", "html_url": "https://github.com/crawforde", "followers_url": "https://api.github.com/users/crawforde/followers", "following_url": "https://api.github.com/users/crawforde/following{/other_user}", "gists_url": "https://api.github.com/users/crawforde/gists{/gist_id}", "starred_url": "https://api.github.com/users/crawforde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crawforde/subscriptions", "organizations_url": "https://api.github.com/users/crawforde/orgs", "repos_url": "https://api.github.com/users/crawforde/repos", "events_url": "https://api.github.com/users/crawforde/events{/privacy}", "received_events_url": "https://api.github.com/users/crawforde/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-24T19:21:01Z", "updated_at": "2020-07-27T11:59:11Z", "closed_at": "2020-07-27T11:59:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Chalice: 1.16.0\r\nPython: 3.7.7\r\n\r\nAfter installing dependencies and running `chalice --version`, I got the following error:\r\n```\r\nTraceback (most recent call last):\r\n  File \".chalice/venv/bin/chalice\", line 7, in <module>\r\n    from chalice.cli import main\r\n  File \".chalice/venv/lib/python3.7/site-packages/chalice/cli/__init__.py\", line 530, in <module>\r\n    type=click.Choice(['json', 'yaml'], case_sensitive=False),\r\nTypeError: __init__() got an unexpected keyword argument 'case_sensitive'\r\n```\r\n\r\nUpgrading the `click` package to major version 7 fixed the issue. Seems that the one installed by default (version 6) is broken.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1462/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1462/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1398", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1398/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1398/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1398/events", "html_url": "https://github.com/aws/chalice/issues/1398", "id": 603867568, "node_id": "MDU6SXNzdWU2MDM4Njc1Njg=", "number": 1398, "title": "Chalice crashes on packaging pandas", "user": {"login": "vfilimonov", "id": 1324881, "node_id": "MDQ6VXNlcjEzMjQ4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1324881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vfilimonov", "html_url": "https://github.com/vfilimonov", "followers_url": "https://api.github.com/users/vfilimonov/followers", "following_url": "https://api.github.com/users/vfilimonov/following{/other_user}", "gists_url": "https://api.github.com/users/vfilimonov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vfilimonov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vfilimonov/subscriptions", "organizations_url": "https://api.github.com/users/vfilimonov/orgs", "repos_url": "https://api.github.com/users/vfilimonov/repos", "events_url": "https://api.github.com/users/vfilimonov/events{/privacy}", "received_events_url": "https://api.github.com/users/vfilimonov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-21T09:56:15Z", "updated_at": "2020-05-25T23:53:19Z", "closed_at": "2020-04-21T20:05:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello\r\n\r\nAfter the update to 1.13.1 Chalice could not package `pandas` anymore. \r\n\r\nMinimal example (command line):\r\n```\r\nchalice new-project temp\r\necho \"pandas==1.0.3\" > temp/requirements.txt\r\ncd temp\r\nchalice package .\r\n``` \r\nIt hangs on \"Creating deployment package.\" for several minutes and then crashes with exception:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/cli/__init__.py\", line 518, in main\r\n    return cli(obj={})\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/click/core.py\", line 764, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/click/core.py\", line 717, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/click/core.py\", line 1137, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/click/core.py\", line 956, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/click/core.py\", line 555, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/cli/__init__.py\", line 447, in package\r\n    packager.package_app(config, out, stage)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/package.py\", line 920, in package_app\r\n    config, chalice_stage_name)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/package.py\", line 82, in construct_resources\r\n    self._build_stage.execute(config, resources)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/deploy/deployer.py\", line 995, in execute\r\n    step.handle(config, resource)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/deploy/deployer.py\", line 851, in handle\r\n    handler(config, resource)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/deploy/deployer.py\", line 878, in handle_deploymentpackage\r\n    config.project_dir, config.lambda_python_version)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 95, in create_deployment_package\r\n    abi, requirements_filepath, site_packages_dir)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 538, in build_site_packages\r\n    abi, tempdir, requirements_filepath)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 433, in _download_dependencies\r\n    sdists = self._find_sdists(directory)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 349, in _find_sdists\r\n    in self._osutils.get_directory_contents(directory)]\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 348, in <listcomp>\r\n    packages = [Package(directory, filename) for filename\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 554, in __init__\r\n    self._name, self._version = self._calculate_name_and_version()\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 615, in _calculate_name_and_version\r\n    sdist_path)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 685, in get_package_name_and_version\r\n    pkg_info_filepath = self._generate_egg_info(package_dir)\r\n  File \"/Users/user/miniconda3/lib/python3.7/site-packages/chalice/deploy/packager.py\", line 666, in _generate_egg_info\r\n    egg_info_dir, info_contents[0], 'PKG-INFO')\r\nIndexError: list index out of range\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1398/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1381", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1381/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1381/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1381/events", "html_url": "https://github.com/aws/chalice/issues/1381", "id": 585419034, "node_id": "MDU6SXNzdWU1ODU0MTkwMzQ=", "number": 1381, "title": "Multiple cookie headers not set in browser when running locally", "user": {"login": "dkryptr", "id": 13036301, "node_id": "MDQ6VXNlcjEzMDM2MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/13036301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkryptr", "html_url": "https://github.com/dkryptr", "followers_url": "https://api.github.com/users/dkryptr/followers", "following_url": "https://api.github.com/users/dkryptr/following{/other_user}", "gists_url": "https://api.github.com/users/dkryptr/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkryptr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkryptr/subscriptions", "organizations_url": "https://api.github.com/users/dkryptr/orgs", "repos_url": "https://api.github.com/users/dkryptr/repos", "events_url": "https://api.github.com/users/dkryptr/events{/privacy}", "received_events_url": "https://api.github.com/users/dkryptr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-21T03:18:59Z", "updated_at": "2020-03-24T17:58:10Z", "closed_at": "2020-03-24T17:58:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When I run my app locally with `chalice local` and return the following response, the cookie gets set in the browser as expected:\r\n\r\n```python\r\nresponse = Response(\r\n    status_code=http.HTTPStatus.OK.value,\r\n    body={\"user\": {\"username\": user.username}},\r\n    headers={\r\n        \"Set-Cookie\": \"APICookie=TestCookie;Max-Age=315360000;Path=/;HttpOnly\"\r\n    },\r\n)\r\n```\r\n\r\nHere's the JSON representation of the response dictionary:\r\n\r\n```json\r\n{\r\n  \"headers\": {\r\n    \"Set-Cookie\": \"APICookie=TestCookie;Max-Age=315360000;Path=/;HttpOnly\"\r\n  },\r\n  \"multiValueHeaders\": {},\r\n  \"statusCode\": 200,\r\n  \"body\": \"{\\\"user\\\":{\\\"username\\\":\\\"foo\\\"}}\"\r\n}\r\n```\r\n\r\nAfter clearing the previous set cookie and changing the response to the following, the cookie doesn't get set in the browser:\r\n\r\n```python\r\nresponse = Response(\r\n    status_code=http.HTTPStatus.OK.value,\r\n    body={\"user\": {\"username\": user.username}},\r\n    headers={\r\n        \"Set-Cookie\": [\"APICookie=TestCookie;Max-Age=315360000;Path=/;HttpOnly\"]\r\n    },\r\n)\r\n```\r\n\r\nHere's the JSON representation of the response dictionary:\r\n\r\n```json\r\n{\r\n  \"headers\": {},\r\n  \"multiValueHeaders\": {\r\n    \"Set-Cookie\": [\r\n      \"APICookie=TestCookie;Max-Age=315360000;Path=/;HttpOnly\"\r\n    ]\r\n  },\r\n  \"statusCode\": 200,\r\n  \"body\": \"{\\\"user\\\":{\\\"username\\\":\\\"foo\\\"}}\"\r\n}\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1381/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1381/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1356", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1356/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1356/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1356/events", "html_url": "https://github.com/aws/chalice/issues/1356", "id": 566489214, "node_id": "MDU6SXNzdWU1NjY0ODkyMTQ=", "number": 1356, "title": "sqlalchemy cannot be deployed from Linux", "user": {"login": "sproctor", "id": 217337, "node_id": "MDQ6VXNlcjIxNzMzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/217337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sproctor", "html_url": "https://github.com/sproctor", "followers_url": "https://api.github.com/users/sproctor/followers", "following_url": "https://api.github.com/users/sproctor/following{/other_user}", "gists_url": "https://api.github.com/users/sproctor/gists{/gist_id}", "starred_url": "https://api.github.com/users/sproctor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sproctor/subscriptions", "organizations_url": "https://api.github.com/users/sproctor/orgs", "repos_url": "https://api.github.com/users/sproctor/repos", "events_url": "https://api.github.com/users/sproctor/events{/privacy}", "received_events_url": "https://api.github.com/users/sproctor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-02-17T19:49:39Z", "updated_at": "2020-02-26T19:55:19Z", "closed_at": "2020-02-26T19:54:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Packages with uppercase letters in their name, such as SQLAlchemy are not handled properly on case-sensitive file systems. The directory contained in the package has uppercase letters, but the package name is normalized to make them lowercase. Getting rid of the lower() fixes the issue.\r\n\r\n    def _normalize_name(self, name):\r\n        # type: (str) -> str\r\n        # Taken directly from PEP 503\r\n        return re.sub(r\"[-_.]+\", \"-\", name).lower()", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1356/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1356/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1355", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1355/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1355/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1355/events", "html_url": "https://github.com/aws/chalice/issues/1355", "id": 566355094, "node_id": "MDU6SXNzdWU1NjYzNTUwOTQ=", "number": 1355, "title": "watchdog is required", "user": {"login": "sproctor", "id": 217337, "node_id": "MDQ6VXNlcjIxNzMzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/217337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sproctor", "html_url": "https://github.com/sproctor", "followers_url": "https://api.github.com/users/sproctor/followers", "following_url": "https://api.github.com/users/sproctor/following{/other_user}", "gists_url": "https://api.github.com/users/sproctor/gists{/gist_id}", "starred_url": "https://api.github.com/users/sproctor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sproctor/subscriptions", "organizations_url": "https://api.github.com/users/sproctor/orgs", "repos_url": "https://api.github.com/users/sproctor/repos", "events_url": "https://api.github.com/users/sproctor/events{/privacy}", "received_events_url": "https://api.github.com/users/sproctor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-17T15:00:49Z", "updated_at": "2020-02-25T19:09:58Z", "closed_at": "2020-02-25T19:09:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "a recent change has caused chalice to fail if watchdog is not installed", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1355/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1355/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1304", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1304/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1304/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1304/events", "html_url": "https://github.com/aws/chalice/issues/1304", "id": 524460766, "node_id": "MDU6SXNzdWU1MjQ0NjA3NjY=", "number": 1304, "title": "SimpleJson release broke Chalice release", "user": {"login": "subssn21", "id": 721299, "node_id": "MDQ6VXNlcjcyMTI5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/721299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/subssn21", "html_url": "https://github.com/subssn21", "followers_url": "https://api.github.com/users/subssn21/followers", "following_url": "https://api.github.com/users/subssn21/following{/other_user}", "gists_url": "https://api.github.com/users/subssn21/gists{/gist_id}", "starred_url": "https://api.github.com/users/subssn21/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/subssn21/subscriptions", "organizations_url": "https://api.github.com/users/subssn21/orgs", "repos_url": "https://api.github.com/users/subssn21/repos", "events_url": "https://api.github.com/users/subssn21/events{/privacy}", "received_events_url": "https://api.github.com/users/subssn21/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-11-18T16:01:55Z", "updated_at": "2019-12-11T17:52:15Z", "closed_at": "2019-12-11T17:52:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I went to run a chalice release of my code this morning and it will deploy but not . run because of a 502 error.\r\n\r\nI get this message during deploy:\r\n\r\n> \r\n> Creating deployment package.\r\n> \r\n> Could not install dependencies:\r\n> simplejson==3.17.0\r\n> You will have to build these yourself and vendor them in\r\n> the chalice vendor folder.\r\n> \r\n> Your deployment will continue but may not work correctly\r\n> if missing dependencies are not present. For more information:\r\n> http://chalice.readthedocs.io/en/latest/topics/packaging.html\r\n> \r\n\r\nIt ends up that last night a new release of simplejson was released and apparently it breaks the chalice deployment.\r\n\r\nNot sure why we need simplejson as there is a built in json, (probably because simplejson is faster)\r\n\r\nAlso not sure why we are auto using the latest version. We should use specific version and test each new version before using it so this doesn't happen.\r\n\r\nThe package installs and works fine so I am not sure why it is failing to install during deployment ", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1304/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1304/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1272", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1272/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1272/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1272/events", "html_url": "https://github.com/aws/chalice/issues/1272", "id": 506818232, "node_id": "MDU6SXNzdWU1MDY4MTgyMzI=", "number": 1272, "title": "'chalice package' fails", "user": {"login": "hgibsonqb", "id": 47991380, "node_id": "MDQ6VXNlcjQ3OTkxMzgw", "avatar_url": "https://avatars.githubusercontent.com/u/47991380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hgibsonqb", "html_url": "https://github.com/hgibsonqb", "followers_url": "https://api.github.com/users/hgibsonqb/followers", "following_url": "https://api.github.com/users/hgibsonqb/following{/other_user}", "gists_url": "https://api.github.com/users/hgibsonqb/gists{/gist_id}", "starred_url": "https://api.github.com/users/hgibsonqb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hgibsonqb/subscriptions", "organizations_url": "https://api.github.com/users/hgibsonqb/orgs", "repos_url": "https://api.github.com/users/hgibsonqb/repos", "events_url": "https://api.github.com/users/hgibsonqb/events{/privacy}", "received_events_url": "https://api.github.com/users/hgibsonqb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-10-14T18:51:43Z", "updated_at": "2019-10-15T22:26:01Z", "closed_at": "2019-10-15T22:26:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI'm trying to run the command `chalice package --merge-template resource-policies/resource-policy-name.json --stage name lz-dev dist/name`\r\n\r\n But it's been failing with the traceback\r\n```\r\nCreating deployment package.\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/site-packages/chalice/cli/__init__.py\", line 485, in main\r\n    return cli(obj={})\r\n  File \"/usr/lib/python3.6/site-packages/click/core.py\", line 764, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/lib/python3.6/site-packages/click/core.py\", line 717, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/lib/python3.6/site-packages/click/core.py\", line 1137, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/lib/python3.6/site-packages/click/core.py\", line 956, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/lib/python3.6/site-packages/click/core.py\", line 555, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/lib/python3.6/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/lib/python3.6/site-packages/chalice/cli/__init__.py\", line 414, in package\r\n    packager.package_app(config, out, stage)\r\n  File \"/usr/lib/python3.6/site-packages/chalice/package.py\", line 919, in package_app\r\n    config, chalice_stage_name)\r\n  File \"/usr/lib/python3.6/site-packages/chalice/package.py\", line 82, in construct_resources\r\n    self._build_stage.execute(config, resources)\r\n  File \"/usr/lib/python3.6/site-packages/chalice/deploy/deployer.py\", line 995, in execute\r\n    step.handle(config, resource)\r\n  File \"/usr/lib/python3.6/site-packages/chalice/deploy/deployer.py\", line 851, in handle\r\n    handler(config, resource)\r\n  File \"/usr/lib/python3.6/site-packages/chalice/deploy/deployer.py\", line 878, in handle_deploymentpackage\r\n    config.project_dir, config.lambda_python_version)\r\n  File \"/usr/lib/python3.6/site-packages/chalice/deploy/packager.py\", line 94, in create_deployment_package\r\n    abi, requirements_filepath, site_packages_dir)\r\n  File \"/usr/lib/python3.6/site-packages/chalice/deploy/packager.py\", line 506, in build_site_packages\r\n    abi, tempdir, requirements_filepath)\r\n  File \"/usr/lib/python3.6/site-packages/chalice/deploy/packager.py\", line 369, in _download_dependencies\r\n    requirements_filename, directory)\r\n  File \"/usr/lib/python3.6/site-packages/chalice/deploy/packager.py\", line 327, in _download_all_dependencies\r\n    self._pip.download_all_dependencies(requirements_filename, directory)\r\n  File \"/usr/lib/python3.6/site-packages/chalice/deploy/packager.py\", line 745, in download_all_dependencies\r\n    raise PackageDownloadError(error)\r\nchalice.deploy.packager.PackageDownloadError: Traceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nTypeError: 'module' object is not callable\r\n```\r\n\r\nAny idea what's happening? I haven't changed the configuration or code", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1272/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1272/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1271", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1271/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1271/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1271/events", "html_url": "https://github.com/aws/chalice/issues/1271", "id": 504849665, "node_id": "MDU6SXNzdWU1MDQ4NDk2NjU=", "number": 1271, "title": "Builtin-auth to root url does not work", "user": {"login": "jamesls", "id": 368057, "node_id": "MDQ6VXNlcjM2ODA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/368057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesls", "html_url": "https://github.com/jamesls", "followers_url": "https://api.github.com/users/jamesls/followers", "following_url": "https://api.github.com/users/jamesls/following{/other_user}", "gists_url": "https://api.github.com/users/jamesls/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesls/subscriptions", "organizations_url": "https://api.github.com/users/jamesls/orgs", "repos_url": "https://api.github.com/users/jamesls/repos", "events_url": "https://api.github.com/users/jamesls/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesls/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-09T19:33:58Z", "updated_at": "2020-10-15T18:30:51Z", "closed_at": "2020-10-15T18:30:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The same auth handler works for any URL except `/`'.  \r\n\r\n```\r\n$ cat app.py\r\nfrom chalice import Chalice, AuthResponse, UnauthorizedError, AuthRoute\r\n\r\napp = Chalice(app_name='myapp')\r\n\r\n@app.authorizer(ttl_seconds=300)\r\ndef dummy_auth(auth_request):\r\n    return AuthResponse(\r\n        routes=['/', '/builtin-auth'],\r\n        principal_id='foo'\r\n    )\r\n\r\n\r\n@app.route('/builtin-auth', authorizer=dummy_auth)\r\ndef builtin_auth():\r\n    return {'success': True}\r\n\r\n\r\n@app.route('/', authorizer=dummy_auth)\r\ndef root_url():\r\n    return {'success': True}\r\n\r\n$ http https://rbq7d9os7h.execute-api.us-west-2.amazonaws.com/api/builtin-auth 'Authorization: yes'\r\nHTTP/1.1 200 OK\r\nConnection: keep-alive\r\nContent-Length: 16\r\nContent-Type: application/json\r\nDate: Wed, 09 Oct 2019 19:30:47 GMT\r\nVia: 1.1 ddc77da3ee14d939006f8adaf09d8aa5.cloudfront.net (CloudFront)\r\nX-Amz-Cf-Id: AswySvRvN8PmsadFqomGmm_HPCYOi7yAlfwKr4_EKkXtvv8ixAyJYg==\r\nX-Amz-Cf-Pop: HIO51-C1\r\nX-Amzn-Trace-Id: Root=1-5d9e3567-e146bdce8b3fc3d4f7055da5;Sampled=0\r\nX-Cache: Miss from cloudfront\r\nx-amz-apigw-id: BT1IIHpsPHcFwDw=\r\nx-amzn-RequestId: 1b173744-2627-4a2e-a90a-9407dd3ea155\r\n\r\n{\r\n    \"success\": true\r\n}\r\n\r\n$ http https://rbq7d9os7h.execute-api.us-west-2.amazonaws.com/api/ 'Authorization: yes'\r\nHTTP/1.1 403 Forbidden\r\nConnection: keep-alive\r\nContent-Length: 60\r\nContent-Type: application/json\r\nDate: Wed, 09 Oct 2019 19:30:52 GMT\r\nVia: 1.1 ddc77da3ee14d939006f8adaf09d8aa5.cloudfront.net (CloudFront)\r\nX-Amz-Cf-Id: G785M-4Wfoh5O8zeSVFhDITxxorENhSWG2cK7LS98TF8ZOr9YUHQWQ==\r\nX-Amz-Cf-Pop: HIO51-C1\r\nX-Cache: Error from cloudfront\r\nx-amz-apigw-id: BT1I6Fi2PHcFyKw=\r\nx-amzn-ErrorType: AccessDeniedException\r\nx-amzn-RequestId: ade1520b-ea56-4729-bc33-6f3a58bbbb4f\r\n\r\n{\r\n    \"Message\": \"User is not authorized to access this resource\"\r\n}\r\n```\r\n\r\n\r\nIn 1e60f9a180b9cdf1b7dcfc64aedbea7dce31b7eb we added code to workaround a quirk of API Gateway.  My hunch is that this quirk has been fixed so we can remove this special case.\r\n\r\nhttps://github.com/aws/chalice/blob/6bbe063e884417335f971b0067e162eb2496758c/chalice/app.py#L1279-L1284", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1271/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1271/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1252", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1252/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1252/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1252/events", "html_url": "https://github.com/aws/chalice/issues/1252", "id": 497354920, "node_id": "MDU6SXNzdWU0OTczNTQ5MjA=", "number": 1252, "title": "chalice logs generates error if lambda function not invoked", "user": {"login": "jamesls", "id": 368057, "node_id": "MDQ6VXNlcjM2ODA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/368057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesls", "html_url": "https://github.com/jamesls", "followers_url": "https://api.github.com/users/jamesls/followers", "following_url": "https://api.github.com/users/jamesls/following{/other_user}", "gists_url": "https://api.github.com/users/jamesls/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesls/subscriptions", "organizations_url": "https://api.github.com/users/jamesls/orgs", "repos_url": "https://api.github.com/users/jamesls/repos", "events_url": "https://api.github.com/users/jamesls/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesls/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-23T22:14:25Z", "updated_at": "2019-10-16T00:47:38Z", "closed_at": "2019-10-16T00:47:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If you deploy a lambda function but have not invoked it yet, `chalice logs` will raise a resourcenotfound error because the log group has not been created yet:\r\n\r\n```\r\n$ cat app.py\r\nfrom chalice import Chalice\r\n\r\napp = Chalice(app_name='testlambda')\r\n\r\n\r\n@app.lambda_function()\r\ndef index(event, context):\r\n    print(\"foo bar baz\")\r\n    return {'hello': 'world'}\r\n\r\n$ chalice deploy\r\n...\r\n$ chalice logs -n index\r\nTraceback (most recent call last):\r\n  File \"chalice/chalice/cli/__init__.py\", line 485, in main\r\n    return cli(obj={})\r\n  File \".virtualenvs/chalice-37/lib/python3.7/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \".virtualenvs/chalice-37/lib/python3.7/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \".virtualenvs/chalice-37/lib/python3.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \".virtualenvs/chalice-37/lib/python3.7/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \".virtualenvs/chalice-37/lib/python3.7/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \".virtualenvs/chalice-37/lib/python3.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"chalice/chalice/cli/__init__.py\", line 292, in logs\r\n    sys.stdout)\r\n  File \"chalice/chalice/logs.py\", line 19, in display_logs\r\n    for event in events:\r\n  File \"S  File \"S  File \"S  File \"S  File \"S  File \"rc  File \"/Users/jamessarient.py\", line 677, in iter_log_events\r\n    for log_message in self._iter_log_messages(pages):\r\n  File \"chalice/chalice/awsclient.py\", line 681, in _iter_log_messages\r\n    for page in pages:\r\n  File \".virtualenvs/chalice-37/lib/python3.7/site-packages/botocore/paginate.py\", line 255, in __iter__\r\n    response = self._make_request(current_kwargs)\r\n  File \".virtualenvs/chalice-37/lib/python3.7/site-packages/botocore/paginate.py\", line 332, in _make_request\r\n    return self._method(**current_kwargs)\r\n  File \".virtualenvs/chalice-37/lib/python3.7/site-packages/botocore/client.py\", line 357, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \".virtualenvs/chalice-37/lib/python3.7/site-packages/botocore/client.py\", line 661, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nbotocore.errorfactory.ResourceNotFoundException: An error occurred (ResourceNotFoundException) when calling the FilterLogEvents operation: The specified log group does not exist.\r\n\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1252/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1237", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1237/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1237/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1237/events", "html_url": "https://github.com/aws/chalice/issues/1237", "id": 491911030, "node_id": "MDU6SXNzdWU0OTE5MTEwMzA=", "number": 1237, "title": "Terraform package option should use aws_api_gateway_deployment.lifecycle.create_before_destroy = true", "user": {"login": "kislyuk", "id": 862013, "node_id": "MDQ6VXNlcjg2MjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/862013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kislyuk", "html_url": "https://github.com/kislyuk", "followers_url": "https://api.github.com/users/kislyuk/followers", "following_url": "https://api.github.com/users/kislyuk/following{/other_user}", "gists_url": "https://api.github.com/users/kislyuk/gists{/gist_id}", "starred_url": "https://api.github.com/users/kislyuk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kislyuk/subscriptions", "organizations_url": "https://api.github.com/users/kislyuk/orgs", "repos_url": "https://api.github.com/users/kislyuk/repos", "events_url": "https://api.github.com/users/kislyuk/events{/privacy}", "received_events_url": "https://api.github.com/users/kislyuk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-10T21:37:28Z", "updated_at": "2020-03-26T15:09:05Z", "closed_at": "2020-03-26T15:09:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am hitting this issue when using `chalice package --pkg-format=terraform`: https://github.com/hashicorp/terraform/issues/10674\r\n\r\nThe following edit, as suggested in the linked issue, is a successful workaround for me: `jq .resource.aws_api_gateway_deployment.rest_api.lifecycle.create_before_destroy=true chalice.tf.json`\r\n\r\nIt would be ideal if this code was emitted directly by https://github.com/aws/chalice/blob/a1a8ba0c168cd8980d2a595ece2d0753198fb41a/chalice/package.py#L858-L868.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1237/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1237/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1230", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1230/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1230/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1230/events", "html_url": "https://github.com/aws/chalice/issues/1230", "id": 488954430, "node_id": "MDU6SXNzdWU0ODg5NTQ0MzA=", "number": 1230, "title": "Route cannot end with a trailing slash", "user": {"login": "Takehirayuta", "id": 7221387, "node_id": "MDQ6VXNlcjcyMjEzODc=", "avatar_url": "https://avatars.githubusercontent.com/u/7221387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Takehirayuta", "html_url": "https://github.com/Takehirayuta", "followers_url": "https://api.github.com/users/Takehirayuta/followers", "following_url": "https://api.github.com/users/Takehirayuta/following{/other_user}", "gists_url": "https://api.github.com/users/Takehirayuta/gists{/gist_id}", "starred_url": "https://api.github.com/users/Takehirayuta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Takehirayuta/subscriptions", "organizations_url": "https://api.github.com/users/Takehirayuta/orgs", "repos_url": "https://api.github.com/users/Takehirayuta/repos", "events_url": "https://api.github.com/users/Takehirayuta/events{/privacy}", "received_events_url": "https://api.github.com/users/Takehirayuta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-09-04T05:49:05Z", "updated_at": "2019-09-16T20:51:07Z", "closed_at": "2019-09-16T20:51:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to specify root for a sub-app\r\n\r\n\r\nhttp://localhost/subapp <-  call subapp in index Should it be possible?\r\nhttp://localhost/subapp/subtest <- call subapp_subtest\r\n\r\n````\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/Users/me/.pyenv/versions/3.7.0/lib/python3.7/threading.py\", line 917, in _bootstrap_inner\r\n    self.run()\r\n  File \"/Users/me/pyenv/3.7.0/lib/python3.7/site-packages/chalice/local.py\", line 659, in run\r\n    self._server = self._server_factory()\r\n  File \"/Users/me/pyenv/3.7.0/lib/python3.7/site-packages/chalice/cli/__init__.py\", line 160, in create_local_server\r\n    validate_routes(routes)\r\n  File \"/Users/me/pyenv/3.7.0/lib/python3.7/site-packages/chalice/deploy/validate.py\", line 107, in validate_routes\r\n    % route_name)\r\nValueError: Route cannot end with a trailing slash: /subapp/\r\n````\r\n\r\napp.py\r\n\r\n```\r\nfrom chalicelib.SubApp import subApp\r\napp = Chalice(app_name='test-api')\r\napp.experimental_feature_flags.update([\r\n        'BLUEPRINTS'\r\n])\r\napp.register_blueprint(\r\n    subApp, url_prefix='/subapp')\r\n```\r\n\r\nSubApp.py\r\n```\r\nsubApp = Blueprint(__name__)\r\n\r\n@subApp.route('/')\r\ndef subapp_index():\r\n    print(\"this config is not work\")\r\n    return {}\r\n\r\n@subApp.route('/subtest')\r\ndef subapp_subtest():\r\n    print(\"it work\")\r\n    return {}\r\n```\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1230/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1230/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1219", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1219/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1219/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1219/events", "html_url": "https://github.com/aws/chalice/issues/1219", "id": 484405832, "node_id": "MDU6SXNzdWU0ODQ0MDU4MzI=", "number": 1219, "title": "Bug report: Api Gateway Resource policy configuration added in v1.10 broken", "user": {"login": "yehudacohen", "id": 37450100, "node_id": "MDQ6VXNlcjM3NDUwMTAw", "avatar_url": "https://avatars.githubusercontent.com/u/37450100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yehudacohen", "html_url": "https://github.com/yehudacohen", "followers_url": "https://api.github.com/users/yehudacohen/followers", "following_url": "https://api.github.com/users/yehudacohen/following{/other_user}", "gists_url": "https://api.github.com/users/yehudacohen/gists{/gist_id}", "starred_url": "https://api.github.com/users/yehudacohen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yehudacohen/subscriptions", "organizations_url": "https://api.github.com/users/yehudacohen/orgs", "repos_url": "https://api.github.com/users/yehudacohen/repos", "events_url": "https://api.github.com/users/yehudacohen/events{/privacy}", "received_events_url": "https://api.github.com/users/yehudacohen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-23T08:42:59Z", "updated_at": "2019-08-27T03:02:56Z", "closed_at": "2019-08-27T03:02:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi all,\r\n\r\nI ran into an issue trying to use the new API Gateway Resource Policy, specifically setting the following config keys: \r\n```\r\n\"api_gateway_endpoint_type\": \"PRIVATE\",\r\n\"api_gateway_policy_file\": \"custom_policy.json\"\r\n```\r\n\r\nIn this workflow, upon running `chalice package` I received the error: \r\nTypeError: Object of type Placeholder is not JSON serializable\r\n\r\nI traced this back to an issue where the policy is never actually read out of the file, and a unit test that was missing an assert.\r\n\r\nI've made changes and will create a pull request and am attaching it to this issue. Either way, I believe the feature was prematurely released, and should be patched as soon as possible.\r\n\r\nAll the best,\r\nYehuda", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1219/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1219/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1158", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1158/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1158/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1158/events", "html_url": "https://github.com/aws/chalice/issues/1158", "id": 461821498, "node_id": "MDU6SXNzdWU0NjE4MjE0OTg=", "number": 1158, "title": "query_params now returns a chalice.app.MultiDict object", "user": {"login": "danialranjha", "id": 990428, "node_id": "MDQ6VXNlcjk5MDQyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/990428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danialranjha", "html_url": "https://github.com/danialranjha", "followers_url": "https://api.github.com/users/danialranjha/followers", "following_url": "https://api.github.com/users/danialranjha/following{/other_user}", "gists_url": "https://api.github.com/users/danialranjha/gists{/gist_id}", "starred_url": "https://api.github.com/users/danialranjha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danialranjha/subscriptions", "organizations_url": "https://api.github.com/users/danialranjha/orgs", "repos_url": "https://api.github.com/users/danialranjha/repos", "events_url": "https://api.github.com/users/danialranjha/events{/privacy}", "received_events_url": "https://api.github.com/users/danialranjha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-28T02:04:35Z", "updated_at": "2019-07-09T19:56:26Z", "closed_at": "2019-07-09T19:56:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "[This commit](https://github.com/aws/chalice/commit/3a0e15f17a4632bfff3376490ad80a817f967ebf) has broken our app.\r\n\r\napp.current_request.query_params now returns a chalice.app.MultiDict object, whereas it used to be a dict. So we could call app.current_request.query_params.pop('xyz', None) but can't do that anymore.\r\n\r\nNot a huge deal as we can make changes at our end, but it's slightly annoying since there are quite a few patterns of this usage in our app.\r\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1158/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1158/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/1139", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1139/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1139/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1139/events", "html_url": "https://github.com/aws/chalice/pull/1139", "id": 450845699, "node_id": "MDExOlB1bGxSZXF1ZXN0Mjg0MDg1MTE5", "number": 1139, "title": "Fix an error printing a stack trace from a failed chalice invoke.", "user": {"login": "jacobian", "id": 21148, "node_id": "MDQ6VXNlcjIxMTQ4", "avatar_url": "https://avatars.githubusercontent.com/u/21148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jacobian", "html_url": "https://github.com/jacobian", "followers_url": "https://api.github.com/users/jacobian/followers", "following_url": "https://api.github.com/users/jacobian/following{/other_user}", "gists_url": "https://api.github.com/users/jacobian/gists{/gist_id}", "starred_url": "https://api.github.com/users/jacobian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jacobian/subscriptions", "organizations_url": "https://api.github.com/users/jacobian/orgs", "repos_url": "https://api.github.com/users/jacobian/repos", "events_url": "https://api.github.com/users/jacobian/events{/privacy}", "received_events_url": "https://api.github.com/users/jacobian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-31T15:07:14Z", "updated_at": "2019-06-06T22:31:26Z", "closed_at": "2019-06-04T23:23:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/aws/chalice/pulls/1139", "html_url": "https://github.com/aws/chalice/pull/1139", "diff_url": "https://github.com/aws/chalice/pull/1139.diff", "patch_url": "https://github.com/aws/chalice/pull/1139.patch", "merged_at": "2019-06-04T23:23:48Z"}, "body": "Running `chalice invoke` fails to print a stack trace when the Lambda invocation fails:\r\n\r\n```\r\n$ chalice invoke -n xxx < payload.json\r\nTraceback (most recent call last):\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/chalice/cli/__init__.py\", line 462, in main\r\n    return cli(obj={})\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/chalice/cli/__init__.py\", line 225, in invoke\r\n    invoke_handler.invoke(payload)\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/chalice/invoke.py\", line 43, in invoke\r\n    formatted_response = self._formatter.format_response(response)\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/chalice/invoke.py\", line 73, in format_response\r\n    self._format_error(formatted, payload)\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/chalice/invoke.py\", line 86, in _format_error\r\n    self._format_stacktrace(formatted, stack_trace)\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/chalice/invoke.py\", line 97, in _format_stacktrace\r\n    self._format_frame(formatted, frame)\r\n  File \"/Users/jacob/Library/Caches/pypoetry/virtualenvs/camber-prototype-py3.7/lib/python3.7/site-packages/chalice/invoke.py\", line 101, in _format_frame\r\n    path, lineno, function, code = frame\r\nValueError: too many values to unpack (expected 4)\r\n```\r\n\r\nThis is invoking a raw lambda (e.g. `@app.lambda_function`), my runtime is Python 3.7.\r\n\r\nI think this is because because `chalice.invoke.LambdaResponseFormatter._format_error` expects `payload[\"stackTrace\"]` to be a a list of `(path, lineno, function, code)` frame objects, but instead the return appears to be just a simple list of strings.\r\n\r\nSo this pull request changes this to print the stacktrace directly instead.\r\n\r\nI haven't got a full setup to run tests, nor have I trimmed the now-vestigal `_format_stacktrace`. I want to validate the approach first; if this is the correct fix I'm happy to do the rest of the clean up, just lmk. \r\n\r\n--- \r\n\r\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.\r\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1139/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1139/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/aws/chalice/issues/1112", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/1112/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/1112/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/1112/events", "html_url": "https://github.com/aws/chalice/issues/1112", "id": 435767806, "node_id": "MDU6SXNzdWU0MzU3Njc4MDY=", "number": 1112, "title": "route decorator does not accept \"name\" parameter, as defined in docs", "user": {"login": "ehriq", "id": 1031474, "node_id": "MDQ6VXNlcjEwMzE0NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1031474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehriq", "html_url": "https://github.com/ehriq", "followers_url": "https://api.github.com/users/ehriq/followers", "following_url": "https://api.github.com/users/ehriq/following{/other_user}", "gists_url": "https://api.github.com/users/ehriq/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehriq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehriq/subscriptions", "organizations_url": "https://api.github.com/users/ehriq/orgs", "repos_url": "https://api.github.com/users/ehriq/repos", "events_url": "https://api.github.com/users/ehriq/events{/privacy}", "received_events_url": "https://api.github.com/users/ehriq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-22T15:25:14Z", "updated_at": "2019-06-06T19:59:52Z", "closed_at": "2019-06-06T19:59:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using the 'name' parameter on the app.route decorator, the `chalice deploy` command returns `TypeError: TypeError: route() got unexpected keyword arguments: name`. \r\n\r\nI'm trying to use the parameter as defined in https://chalice.readthedocs.io/en/latest/api.html#Chalice.route \r\n\r\nOne example of code that raises the exception:\r\n```\r\n@app.route(\"/evaluate\", methods=[\"POST\", \"OPTIONS\"], name=\"post_evaluation\")\r\ndef post_evaluation():\r\n   ...\r\n```\r\n\r\nUsing versions 1.7.0 and 1.8.0; both with same result.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/1112/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/1112/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/928", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/928/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/928/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/928/events", "html_url": "https://github.com/aws/chalice/issues/928", "id": 348329112, "node_id": "MDU6SXNzdWUzNDgzMjkxMTI=", "number": 928, "title": "Packager assumes wheel to be installed", "user": {"login": "kadrach", "id": 206176, "node_id": "MDQ6VXNlcjIwNjE3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/206176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kadrach", "html_url": "https://github.com/kadrach", "followers_url": "https://api.github.com/users/kadrach/followers", "following_url": "https://api.github.com/users/kadrach/following{/other_user}", "gists_url": "https://api.github.com/users/kadrach/gists{/gist_id}", "starred_url": "https://api.github.com/users/kadrach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kadrach/subscriptions", "organizations_url": "https://api.github.com/users/kadrach/orgs", "repos_url": "https://api.github.com/users/kadrach/repos", "events_url": "https://api.github.com/users/kadrach/events{/privacy}", "received_events_url": "https://api.github.com/users/kadrach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-07T13:47:45Z", "updated_at": "2018-10-05T18:06:38Z", "closed_at": "2018-09-26T17:37:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Took me a while to figure out why Chalice fails to build my deployment package properly in one environment, but not the other. Funnily enough while I was trying to pin all transitive dependencies :(\r\n\r\nChalice appears to use [wheel](https://github.com/aws/chalice/blob/9fe9ddc0423acd202c7e3533b74d14691336d8f7/chalice/deploy/packager.py#L693) regardless of whether wheel is installed in the environment. Should wheel be a setup requirement? Or perhaps include a warning in the \"Could not install dependencies...\" message?\r\n\r\n```\r\n$ python -m venv v1\r\n$ source v1/bin/activate\r\n$ pip install chalice  # wheel not installed\r\n$ chalice new-project v1-test\r\n$ cd v1-test\r\n$ echo \"markupsafe\" >> requirements.txt\r\n$ chalice package out\r\nCreating deployment package.\r\n\r\nCould not install dependencies:\r\nmarkupsafe==1.0\r\nYou will have to build these yourself and vendor them in\r\nthe chalice vendor folder.\r\n\r\nYour deployment will continue but may not work correctly\r\nif missing dependencies are not present. For more information:\r\nhttp://chalice.readthedocs.io/en/latest/topics/packaging.html\r\n\r\n$ pip install wheel\r\n\r\n$ chalice package out       \r\nCreating deployment package.\r\n# Success!\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/928/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/928/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/867", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/867/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/867/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/867/events", "html_url": "https://github.com/aws/chalice/issues/867", "id": 331000119, "node_id": "MDU6SXNzdWUzMzEwMDAxMTk=", "number": 867, "title": "Watchdog dependency fails to install when upgrading chalice", "user": {"login": "raygers", "id": 22856065, "node_id": "MDQ6VXNlcjIyODU2MDY1", "avatar_url": "https://avatars.githubusercontent.com/u/22856065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raygers", "html_url": "https://github.com/raygers", "followers_url": "https://api.github.com/users/raygers/followers", "following_url": "https://api.github.com/users/raygers/following{/other_user}", "gists_url": "https://api.github.com/users/raygers/gists{/gist_id}", "starred_url": "https://api.github.com/users/raygers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raygers/subscriptions", "organizations_url": "https://api.github.com/users/raygers/orgs", "repos_url": "https://api.github.com/users/raygers/repos", "events_url": "https://api.github.com/users/raygers/events{/privacy}", "received_events_url": "https://api.github.com/users/raygers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-06-10T20:31:31Z", "updated_at": "2018-07-22T21:14:46Z", "closed_at": "2018-07-20T17:48:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nI am having issues trying to install the watchdog dependency in order to use chalice 1.3.0.\r\nI tried installing it from source and via pip and the result the same. I am trying to install it on macOS High Sierra.\r\n\r\nBelow is the console log .\r\n\r\nIs anyone else experiencing this issue?\r\n\r\npip3 install --upgrade chalice\r\nRequirement already up-to-date: chalice in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (1.3.0)\r\nRequirement not upgraded as not directly required: pip<11,>=9 in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from chalice) (10.0.1)\r\nRequirement not upgraded as not directly required: typing==3.6.4 in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from chalice) (3.6.4)\r\nRequirement not upgraded as not directly required: botocore<2.0.0,>=1.5.40 in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from chalice) (1.10.35)\r\nRequirement not upgraded as not directly required: six<2.0.0,>=1.10.0 in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from chalice) (1.11.0)\r\nRequirement not upgraded as not directly required: attrs==17.4.0 in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from chalice) (17.4.0)\r\nRequirement not upgraded as not directly required: enum34==1.1.6 in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from chalice) (1.1.6)\r\nRequirement not upgraded as not directly required: click==6.6 in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from chalice) (6.6)\r\nRequirement not upgraded as not directly required: jmespath<1.0.0,>=0.9.3 in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from chalice) (0.9.3)\r\nCollecting watchdog==0.8.3 (from chalice)\r\n  Using cached https://files.pythonhosted.org/packages/54/7d/c7c0ad1e32b9f132075967fc353a244eb2b375a3d2f5b0ce612fd96e107e/watchdog-0.8.3.tar.gz\r\nRequirement not upgraded as not directly required: docutils>=0.10 in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from botocore<2.0.0,>=1.5.40->chalice) (0.14)\r\nRequirement not upgraded as not directly required: python-dateutil<3.0.0,>=2.1; python_version >= \"2.7\" in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from botocore<2.0.0,>=1.5.40->chalice) (2.7.3)\r\nRequirement not upgraded as not directly required: PyYAML>=3.10 in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from watchdog==0.8.3->chalice) (3.12)\r\nRequirement not upgraded as not directly required: argh>=0.24.1 in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from watchdog==0.8.3->chalice) (0.26.2)\r\nRequirement not upgraded as not directly required: pathtools>=0.1.1 in /Users/raygerstner/.virtualenvs/python3/lib/python3.6/site-packages (from watchdog==0.8.3->chalice) (0.1.2)\r\nBuilding wheels for collected packages: watchdog\r\n  Running setup.py bdist_wheel for watchdog ... error\r\n  Complete output from command /Users/raygerstner/.virtualenvs/python3/bin/python3.6 -u -c \"import setuptools, tokenize;__file__='/private/var/folders/9f/g99f4yr91h70q4cmdmr7rz240000gn/T/pip-install-ib23ugsl/watchdog/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" bdist_wheel -d /private/var/folders/9f/g99f4yr91h70q4cmdmr7rz240000gn/T/pip-wheel-y5g0y1jv --python-tag cp36:\r\n  running bdist_wheel\r\n  running build\r\n  running build_py\r\n  creating build\r\n  creating build/lib.macosx-10.13-x86_64-3.6\r\n  creating build/lib.macosx-10.13-x86_64-3.6/watchdog\r\n  copying src/watchdog/watchmedo.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog\r\n  copying src/watchdog/version.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog\r\n  copying src/watchdog/events.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog\r\n  copying src/watchdog/__init__.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog\r\n  creating build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  copying src/watchdog/utils/unicode_paths.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  copying src/watchdog/utils/compat.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  copying src/watchdog/utils/win32stat.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  copying src/watchdog/utils/__init__.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  copying src/watchdog/utils/dirsnapshot.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  copying src/watchdog/utils/delayed_queue.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  copying src/watchdog/utils/platform.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  copying src/watchdog/utils/importlib2.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  copying src/watchdog/utils/bricks.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  copying src/watchdog/utils/echo.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  copying src/watchdog/utils/event_backport.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  copying src/watchdog/utils/decorators.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n  creating build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n  copying src/watchdog/observers/fsevents.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n  copying src/watchdog/observers/inotify.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n  copying src/watchdog/observers/__init__.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n  copying src/watchdog/observers/api.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n  copying src/watchdog/observers/inotify_buffer.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n  copying src/watchdog/observers/winapi.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n  copying src/watchdog/observers/read_directory_changes.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n  copying src/watchdog/observers/kqueue.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n  copying src/watchdog/observers/inotify_c.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n  copying src/watchdog/observers/polling.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n  copying src/watchdog/observers/fsevents2.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n  creating build/lib.macosx-10.13-x86_64-3.6/watchdog/tricks\r\n  copying src/watchdog/tricks/__init__.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/tricks\r\n  running egg_info\r\n  writing src/watchdog.egg-info/PKG-INFO\r\n  writing dependency_links to src/watchdog.egg-info/dependency_links.txt\r\n  writing entry points to src/watchdog.egg-info/entry_points.txt\r\n  writing requirements to src/watchdog.egg-info/requires.txt\r\n  writing top-level names to src/watchdog.egg-info/top_level.txt\r\n  reading manifest file 'src/watchdog.egg-info/SOURCES.txt'\r\n  reading manifest template 'MANIFEST.in'\r\n  warning: no files found matching '*.h' under directory 'src'\r\n  writing manifest file 'src/watchdog.egg-info/SOURCES.txt'\r\n  running build_ext\r\n  building '_watchdog_fsevents' extension\r\n  creating build/temp.macosx-10.13-x86_64-3.6\r\n  creating build/temp.macosx-10.13-x86_64-3.6/src\r\n  clang -Wno-unused-result -Wsign-compare -Wunreachable-code -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -DWATCHDOG_VERSION_STRING=\"0.8.3\" -DWATCHDOG_VERSION_MAJOR=0 -DWATCHDOG_VERSION_MINOR=8 -DWATCHDOG_VERSION_BUILD=3 -I/usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/include/python3.6m -c src/watchdog_fsevents.c -o build/temp.macosx-10.13-x86_64-3.6/src/watchdog_fsevents.o -std=c99 -pedantic -Wall -Wextra -fPIC -Wno-error=unused-command-line-argument-hard-error-in-future\r\n  warning: unknown warning option '-Werror=unused-command-line-argument-hard-error-in-future'; did you mean '-Werror=unused-command-line-argument'? [-Wunknown-warning-option]\r\n  In file included from src/watchdog_fsevents.c:22:\r\n  In file included from /usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/include/python3.6m/Python.h:34:\r\n  In file included from /usr/include/stdlib.h:65:\r\n  In file included from /usr/include/sys/wait.h:110:\r\n  In file included from /usr/include/sys/resource.h:72:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  In file included from /usr/local/include/stdint.h:59:\r\n  /usr/local/include/stdint.h:2:10: error: #include nested too deeply\r\n  #include <stddef.h>\r\n           ^\r\n  /usr/local/include/stdint.h:59:11: error: #include nested too deeply\r\n  # include <stdint.h>\r\n            ^\r\n  /usr/local/include/stdint.h:72:11: error: #include nested too deeply\r\n  # include <sys/types.h>\r\n            ^\r\n  /usr/local/include/stdint.h:76:10: error: #include nested too deeply\r\n  #include <limits.h>\r\n           ^\r\n  /usr/local/include/stdint.h:82:11: error: #include nested too deeply\r\n  # include <inttypes.h>\r\n            ^\r\n  In file included from src/watchdog_fsevents.c:22:\r\n  In file included from /usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/include/python3.6m/Python.h:34:\r\n  In file included from /usr/include/stdlib.h:65:\r\n  In file included from /usr/include/sys/wait.h:110:\r\n  /usr/include/sys/resource.h:197:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_user_time;\r\n          ^\r\n  /usr/include/sys/resource.h:198:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_system_time;\r\n          ^\r\n  /usr/include/sys/resource.h:199:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_pkg_idle_wkups;\r\n          ^\r\n  /usr/include/sys/resource.h:200:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_interrupt_wkups;\r\n          ^\r\n  /usr/include/sys/resource.h:201:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_pageins;\r\n          ^\r\n  /usr/include/sys/resource.h:202:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_wired_size;\r\n          ^\r\n  /usr/include/sys/resource.h:203:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_resident_size;\r\n          ^\r\n  /usr/include/sys/resource.h:204:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_phys_footprint;\r\n          ^\r\n  /usr/include/sys/resource.h:205:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_proc_start_abstime;\r\n          ^\r\n  /usr/include/sys/resource.h:206:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_proc_exit_abstime;\r\n          ^\r\n  /usr/include/sys/resource.h:211:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_user_time;\r\n          ^\r\n  /usr/include/sys/resource.h:212:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_system_time;\r\n          ^\r\n  /usr/include/sys/resource.h:213:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_pkg_idle_wkups;\r\n          ^\r\n  /usr/include/sys/resource.h:214:2: error: unknown type name 'uint64_t'\r\n          uint64_t ri_interrupt_wkups;\r\n          ^\r\n  fatal error: too many errors emitted, stopping now [-ferror-limit=]\r\n  1 warning and 20 errors generated.\r\n  error: command 'clang' failed with exit status 1\r\n\r\n  ----------------------------------------\r\n  Failed building wheel for watchdog\r\n  Running setup.py clean for watchdog\r\nFailed to build watchdog\r\nInstalling collected packages: watchdog\r\n  Running setup.py install for watchdog ... error\r\n    Complete output from command /Users/raygerstner/.virtualenvs/python3/bin/python3.6 -u -c \"import setuptools, tokenize;__file__='/private/var/folders/9f/g99f4yr91h70q4cmdmr7rz240000gn/T/pip-install-ib23ugsl/watchdog/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /private/var/folders/9f/g99f4yr91h70q4cmdmr7rz240000gn/T/pip-record-ch4jlgyu/install-record.txt --single-version-externally-managed --compile --install-headers /Users/raygerstner/.virtualenvs/python3/bin/../include/site/python3.6/watchdog:\r\n    running install\r\n    running build\r\n    running build_py\r\n    creating build\r\n    creating build/lib.macosx-10.13-x86_64-3.6\r\n    creating build/lib.macosx-10.13-x86_64-3.6/watchdog\r\n    copying src/watchdog/watchmedo.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog\r\n    copying src/watchdog/version.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog\r\n    copying src/watchdog/events.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog\r\n    copying src/watchdog/__init__.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog\r\n    creating build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    copying src/watchdog/utils/unicode_paths.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    copying src/watchdog/utils/compat.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    copying src/watchdog/utils/win32stat.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    copying src/watchdog/utils/__init__.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    copying src/watchdog/utils/dirsnapshot.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    copying src/watchdog/utils/delayed_queue.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    copying src/watchdog/utils/platform.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    copying src/watchdog/utils/importlib2.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    copying src/watchdog/utils/bricks.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    copying src/watchdog/utils/echo.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    copying src/watchdog/utils/event_backport.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    copying src/watchdog/utils/decorators.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/utils\r\n    creating build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n    copying src/watchdog/observers/fsevents.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n    copying src/watchdog/observers/inotify.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n    copying src/watchdog/observers/__init__.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n    copying src/watchdog/observers/api.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n    copying src/watchdog/observers/inotify_buffer.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n    copying src/watchdog/observers/winapi.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n    copying src/watchdog/observers/read_directory_changes.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n    copying src/watchdog/observers/kqueue.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n    copying src/watchdog/observers/inotify_c.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n    copying src/watchdog/observers/polling.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n    copying src/watchdog/observers/fsevents2.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/observers\r\n    creating build/lib.macosx-10.13-x86_64-3.6/watchdog/tricks\r\n    copying src/watchdog/tricks/__init__.py -> build/lib.macosx-10.13-x86_64-3.6/watchdog/tricks\r\n    running egg_info\r\n    writing src/watchdog.egg-info/PKG-INFO\r\n    writing dependency_links to src/watchdog.egg-info/dependency_links.txt\r\n    writing entry points to src/watchdog.egg-info/entry_points.txt\r\n    writing requirements to src/watchdog.egg-info/requires.txt\r\n    writing top-level names to src/watchdog.egg-info/top_level.txt\r\n    reading manifest file 'src/watchdog.egg-info/SOURCES.txt'\r\n    reading manifest template 'MANIFEST.in'\r\n    warning: no files found matching '*.h' under directory 'src'\r\n    writing manifest file 'src/watchdog.egg-info/SOURCES.txt'\r\n    running build_ext\r\n    building '_watchdog_fsevents' extension\r\n    creating build/temp.macosx-10.13-x86_64-3.6\r\n    creating build/temp.macosx-10.13-x86_64-3.6/src\r\n    clang -Wno-unused-result -Wsign-compare -Wunreachable-code -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -DWATCHDOG_VERSION_STRING=\"0.8.3\" -DWATCHDOG_VERSION_MAJOR=0 -DWATCHDOG_VERSION_MINOR=8 -DWATCHDOG_VERSION_BUILD=3 -I/usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/include/python3.6m -c src/watchdog_fsevents.c -o build/temp.macosx-10.13-x86_64-3.6/src/watchdog_fsevents.o -std=c99 -pedantic -Wall -Wextra -fPIC -Wno-error=unused-command-line-argument-hard-error-in-future\r\n    warning: unknown warning option '-Werror=unused-command-line-argument-hard-error-in-future'; did you mean '-Werror=unused-command-line-argument'? [-Wunknown-warning-option]\r\n    In file included from src/watchdog_fsevents.c:22:\r\n    In file included from /usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/include/python3.6m/Python.h:34:\r\n    In file included from /usr/include/stdlib.h:65:\r\n    In file included from /usr/include/sys/wait.h:110:\r\n    In file included from /usr/include/sys/resource.h:72:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    In file included from /usr/local/include/stdint.h:59:\r\n    /usr/local/include/stdint.h:2:10: error: #include nested too deeply\r\n    #include <stddef.h>\r\n             ^\r\n    /usr/local/include/stdint.h:59:11: error: #include nested too deeply\r\n    # include <stdint.h>\r\n              ^\r\n    /usr/local/include/stdint.h:72:11: error: #include nested too deeply\r\n    # include <sys/types.h>\r\n              ^\r\n    /usr/local/include/stdint.h:76:10: error: #include nested too deeply\r\n    #include <limits.h>\r\n             ^\r\n    /usr/local/include/stdint.h:82:11: error: #include nested too deeply\r\n    # include <inttypes.h>\r\n              ^\r\n    In file included from src/watchdog_fsevents.c:22:\r\n    In file included from /usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/include/python3.6m/Python.h:34:\r\n    In file included from /usr/include/stdlib.h:65:\r\n    In file included from /usr/include/sys/wait.h:110:\r\n    /usr/include/sys/resource.h:197:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_user_time;\r\n            ^\r\n    /usr/include/sys/resource.h:198:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_system_time;\r\n            ^\r\n    /usr/include/sys/resource.h:199:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_pkg_idle_wkups;\r\n            ^\r\n    /usr/include/sys/resource.h:200:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_interrupt_wkups;\r\n            ^\r\n    /usr/include/sys/resource.h:201:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_pageins;\r\n            ^\r\n    /usr/include/sys/resource.h:202:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_wired_size;\r\n            ^\r\n    /usr/include/sys/resource.h:203:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_resident_size;\r\n            ^\r\n    /usr/include/sys/resource.h:204:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_phys_footprint;\r\n            ^\r\n    /usr/include/sys/resource.h:205:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_proc_start_abstime;\r\n            ^\r\n    /usr/include/sys/resource.h:206:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_proc_exit_abstime;\r\n            ^\r\n    /usr/include/sys/resource.h:211:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_user_time;\r\n            ^\r\n    /usr/include/sys/resource.h:212:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_system_time;\r\n            ^\r\n    /usr/include/sys/resource.h:213:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_pkg_idle_wkups;\r\n            ^\r\n    /usr/include/sys/resource.h:214:2: error: unknown type name 'uint64_t'\r\n            uint64_t ri_interrupt_wkups;\r\n            ^\r\n    fatal error: too many errors emitted, stopping now [-ferror-limit=]\r\n    1 warning and 20 errors generated.\r\n    error: command 'clang' failed with exit status 1\r\n\r\n    ----------------------------------------\r\nCommand \"/Users/raygerstner/.virtualenvs/python3/bin/python3.6 -u -c \"import setuptools, tokenize;__file__='/private/var/folders/9f/g99f4yr91h70q4cmdmr7rz240000gn/T/pip-install-ib23ugsl/watchdog/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /private/var/folders/9f/g99f4yr91h70q4cmdmr7rz240000gn/T/pip-record-ch4jlgyu/install-record.txt --single-version-externally-managed --compile --install-headers /Users/raygerstner/.virtualenvs/python3/bin/../include/site/python3.6/watchdog\" failed with error code 1 in /private/var/folders/9f/g99f4yr91h70q4cmdmr7rz240000gn/T/pip-install-ib23ugsl/watchdog/", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/867/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/867/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/808", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/808/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/808/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/808/events", "html_url": "https://github.com/aws/chalice/issues/808", "id": 316626275, "node_id": "MDU6SXNzdWUzMTY2MjYyNzU=", "number": 808, "title": "deploy fails with pip 10.0.0", "user": {"login": "dmulter", "id": 411993, "node_id": "MDQ6VXNlcjQxMTk5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/411993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmulter", "html_url": "https://github.com/dmulter", "followers_url": "https://api.github.com/users/dmulter/followers", "following_url": "https://api.github.com/users/dmulter/following{/other_user}", "gists_url": "https://api.github.com/users/dmulter/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmulter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmulter/subscriptions", "organizations_url": "https://api.github.com/users/dmulter/orgs", "repos_url": "https://api.github.com/users/dmulter/repos", "events_url": "https://api.github.com/users/dmulter/events{/privacy}", "received_events_url": "https://api.github.com/users/dmulter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-04-23T00:15:50Z", "updated_at": "2019-10-14T16:45:41Z", "closed_at": "2018-04-30T21:47:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm running a venv with Python 3.6.3 and just upgraded PIP from 9.0.3 to the 10.0.0 and get the following error for chalice deploy:\r\n\r\n```\r\nchalice.deploy.packager.PackageDownloadError: Traceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nAttributeError: module 'pip' has no attribute 'main'\r\n```\r\n\r\nI downgrade back to 9.0.3 and all works fine.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/808/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/808/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/806", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/806/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/806/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/806/events", "html_url": "https://github.com/aws/chalice/issues/806", "id": 316200004, "node_id": "MDU6SXNzdWUzMTYyMDAwMDQ=", "number": 806, "title": "Latest version of chalice breaking pip (Python 3.6)", "user": {"login": "kunksed", "id": 31513282, "node_id": "MDQ6VXNlcjMxNTEzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/31513282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kunksed", "html_url": "https://github.com/kunksed", "followers_url": "https://api.github.com/users/kunksed/followers", "following_url": "https://api.github.com/users/kunksed/following{/other_user}", "gists_url": "https://api.github.com/users/kunksed/gists{/gist_id}", "starred_url": "https://api.github.com/users/kunksed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kunksed/subscriptions", "organizations_url": "https://api.github.com/users/kunksed/orgs", "repos_url": "https://api.github.com/users/kunksed/repos", "events_url": "https://api.github.com/users/kunksed/events{/privacy}", "received_events_url": "https://api.github.com/users/kunksed/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2018-04-20T09:43:43Z", "updated_at": "2018-07-25T17:10:46Z", "closed_at": "2018-07-25T17:10:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "After installing chalice from pip, it seems to have installed the enum34 library, which breaks my pip. \r\n\r\n`Traceback (most recent call last):`\r\n  `File \"/usr/local/bin/pip3.6\", line 4, in <module>`\r\n  `  import re`\r\n  `File \"/usr/lib/python3.6/re.py\", line 142, in <module>`\r\n  `  class RegexFlag(enum.IntFlag):`\r\n`AttributeError: module 'enum' has no attribute 'IntFlag'`\r\n\r\nFixed it by removing the enum34 distribution from site-packages.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/806/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/795", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/795/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/795/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/795/events", "html_url": "https://github.com/aws/chalice/issues/795", "id": 313600152, "node_id": "MDU6SXNzdWUzMTM2MDAxNTI=", "number": 795, "title": "package.py creates AWS::Serverless::Function Environment Variables property incorrectly", "user": {"login": "earchibald-lv", "id": 34492938, "node_id": "MDQ6VXNlcjM0NDkyOTM4", "avatar_url": "https://avatars.githubusercontent.com/u/34492938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/earchibald-lv", "html_url": "https://github.com/earchibald-lv", "followers_url": "https://api.github.com/users/earchibald-lv/followers", "following_url": "https://api.github.com/users/earchibald-lv/following{/other_user}", "gists_url": "https://api.github.com/users/earchibald-lv/gists{/gist_id}", "starred_url": "https://api.github.com/users/earchibald-lv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/earchibald-lv/subscriptions", "organizations_url": "https://api.github.com/users/earchibald-lv/orgs", "repos_url": "https://api.github.com/users/earchibald-lv/repos", "events_url": "https://api.github.com/users/earchibald-lv/events{/privacy}", "received_events_url": "https://api.github.com/users/earchibald-lv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-12T07:01:07Z", "updated_at": "2018-04-13T20:38:08Z", "closed_at": "2018-04-13T20:38:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "`AWS::Serverless::Function` implements environment variables as\r\n\r\n```\r\n{ \"Properties\": {\r\n  \"Environment\": {\r\n    \"Variables\": { ... } } }\r\n```\r\n\r\n(see https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-lambda-function-environment.html)\r\n\r\nHowever, `package.py` is defining the structure as:\r\n\r\n```\r\n{\"Properties: {\r\n  \"EnvironmentVariables\": {\r\n    \"Variables\": { ... } } }\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/795/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/795/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/793", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/793/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/793/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/793/events", "html_url": "https://github.com/aws/chalice/issues/793", "id": 313213790, "node_id": "MDU6SXNzdWUzMTMyMTM3OTA=", "number": 793, "title": "PreCreatedIAMRole no longer working in 1.2.0", "user": {"login": "kadrach", "id": 206176, "node_id": "MDQ6VXNlcjIwNjE3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/206176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kadrach", "html_url": "https://github.com/kadrach", "followers_url": "https://api.github.com/users/kadrach/followers", "following_url": "https://api.github.com/users/kadrach/following{/other_user}", "gists_url": "https://api.github.com/users/kadrach/gists{/gist_id}", "starred_url": "https://api.github.com/users/kadrach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kadrach/subscriptions", "organizations_url": "https://api.github.com/users/kadrach/orgs", "repos_url": "https://api.github.com/users/kadrach/repos", "events_url": "https://api.github.com/users/kadrach/events{/privacy}", "received_events_url": "https://api.github.com/users/kadrach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-04-11T08:02:15Z", "updated_at": "2018-04-12T18:05:03Z", "closed_at": "2018-04-12T18:05:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\n$ chalice --version\r\nchalice 1.2.0\r\n$ chalice new-project hello-world && cd hello-world\r\n```\r\nAdd to `.chalice/config.json`:\r\n```json\r\n{\r\n  \"version\": \"2.0\",\r\n  \"app_name\": \"hello-world\",\r\n  \"manage_iam_role\": false,\r\n  \"iam_role_arn\": \"arn:aws:iam::123456789012:role/some-lambda-role\",\r\n  \"stages\": {\r\n    \"dev\": {\r\n      \"api_gateway_stage\": \"api\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n```bash\r\n$ chalice package out\r\nCreating deployment package.\r\nTraceback (most recent call last):\r\n  File \"/home/kadrach/.pyenv/versions/3.6.4/lib/python3.6/site-packages/chalice/cli/__init__.py\", line 357, in main\r\n    return cli(obj={})\r\n  File \"/home/kadrach/.pyenv/versions/3.6.4/lib/python3.6/site-packages/click/core.py\", line 716, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/kadrach/.pyenv/versions/3.6.4/lib/python3.6/site-packages/click/core.py\", line 696, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/kadrach/.pyenv/versions/3.6.4/lib/python3.6/site-packages/click/core.py\", line 1060, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/kadrach/.pyenv/versions/3.6.4/lib/python3.6/site-packages/click/core.py\", line 889, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/kadrach/.pyenv/versions/3.6.4/lib/python3.6/site-packages/click/core.py\", line 534, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/kadrach/.pyenv/versions/3.6.4/lib/python3.6/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/kadrach/.pyenv/versions/3.6.4/lib/python3.6/site-packages/chalice/cli/__init__.py\", line 286, in package\r\n    packager.package_app(config, out, stage)\r\n  File \"/home/kadrach/.pyenv/versions/3.6.4/lib/python3.6/site-packages/chalice/package.py\", line 290, in package_app\r\n    resources)\r\n  File \"/home/kadrach/.pyenv/versions/3.6.4/lib/python3.6/site-packages/chalice/package.py\", line 82, in generate_sam_template\r\n    handler(resource, template)\r\n  File \"/home/kadrach/.pyenv/versions/3.6.4/lib/python3.6/site-packages/chalice/package.py\", line 251, in _default\r\n    raise NotImplementedError(resource)\r\nNotImplementedError: PreCreatedIAMRole(role_arn='arn:aws:iam::123456789012:role/some-lambda-role')\r\n```\r\n\r\nThis used to be implemented, and I can't find any mention of it in the changelog, so assume this is a bug :)", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/793/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/793/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/764", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/764/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/764/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/764/events", "html_url": "https://github.com/aws/chalice/issues/764", "id": 308269007, "node_id": "MDU6SXNzdWUzMDgyNjkwMDc=", "number": 764, "title": "Latest version of cryptography 2.2.1 fails on module import", "user": {"login": "dmulter", "id": 411993, "node_id": "MDQ6VXNlcjQxMTk5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/411993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmulter", "html_url": "https://github.com/dmulter", "followers_url": "https://api.github.com/users/dmulter/followers", "following_url": "https://api.github.com/users/dmulter/following{/other_user}", "gists_url": "https://api.github.com/users/dmulter/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmulter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmulter/subscriptions", "organizations_url": "https://api.github.com/users/dmulter/orgs", "repos_url": "https://api.github.com/users/dmulter/repos", "events_url": "https://api.github.com/users/dmulter/events{/privacy}", "received_events_url": "https://api.github.com/users/dmulter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-24T14:57:28Z", "updated_at": "2018-04-04T23:43:23Z", "closed_at": "2018-04-04T23:43:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've been using a 2.x version of the cryptography package with no problem for some time. I had version 2.1.4 as the latest until today, when I upgraded to 2.2.1. This new version reports no problem during ```chalice deploy```, but I get errors in my CloudWatch logs when I make requests into the app:\r\n\r\n```Unable to import module 'app': No module named 'cryptography'```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/764/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/764/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/705", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/705/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/705/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/705/events", "html_url": "https://github.com/aws/chalice/issues/705", "id": 294548027, "node_id": "MDU6SXNzdWUyOTQ1NDgwMjc=", "number": 705, "title": "`chalice package` does not create pure lambda resources in sam.json", "user": {"login": "lawrlee", "id": 3534824, "node_id": "MDQ6VXNlcjM1MzQ4MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3534824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lawrlee", "html_url": "https://github.com/lawrlee", "followers_url": "https://api.github.com/users/lawrlee/followers", "following_url": "https://api.github.com/users/lawrlee/following{/other_user}", "gists_url": "https://api.github.com/users/lawrlee/gists{/gist_id}", "starred_url": "https://api.github.com/users/lawrlee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lawrlee/subscriptions", "organizations_url": "https://api.github.com/users/lawrlee/orgs", "repos_url": "https://api.github.com/users/lawrlee/repos", "events_url": "https://api.github.com/users/lawrlee/events{/privacy}", "received_events_url": "https://api.github.com/users/lawrlee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-02-05T21:27:17Z", "updated_at": "2018-05-16T16:15:48Z", "closed_at": "2018-05-16T16:15:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to move my chalice application to a CI/CD environment where `chalice deploy` isn't optimal. However, my application has a number of pure lambda functions that are integrated with s3 triggers. When I call `chalice package`, the resulting `sam.json` only contains resources for my `app.route()` functions. Is this a bug?", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/705/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/692", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/692/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/692/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/692/events", "html_url": "https://github.com/aws/chalice/issues/692", "id": 291347572, "node_id": "MDU6SXNzdWUyOTEzNDc1NzI=", "number": 692, "title": "Bug: `chalice deploy` fails to discover required permissions for Lambda IAM role", "user": {"login": "mileserickson", "id": 68300, "node_id": "MDQ6VXNlcjY4MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/68300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mileserickson", "html_url": "https://github.com/mileserickson", "followers_url": "https://api.github.com/users/mileserickson/followers", "following_url": "https://api.github.com/users/mileserickson/following{/other_user}", "gists_url": "https://api.github.com/users/mileserickson/gists{/gist_id}", "starred_url": "https://api.github.com/users/mileserickson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mileserickson/subscriptions", "organizations_url": "https://api.github.com/users/mileserickson/orgs", "repos_url": "https://api.github.com/users/mileserickson/repos", "events_url": "https://api.github.com/users/mileserickson/events{/privacy}", "received_events_url": "https://api.github.com/users/mileserickson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2018-01-24T20:24:39Z", "updated_at": "2021-09-11T00:49:02Z", "closed_at": "2021-01-29T17:48:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Ordinarily, `chalice deploy` finds IAM permissions required for the application to work, builds an IAM role and prompts the user for authorization to add necessary permissions to the role:\r\n\r\n```\r\n$ chalice deploy\r\nRegen deployment package.\r\n\r\nThe following actions will be added to the execution policy:\r\n\r\ns3:GetObject\r\n\r\nWould you like to continue?  [Y/n]:\r\n```\r\n\r\nHowever, in some situations, the required permissions are not discovered and the app is deployed without the required permissions, resulting in botocore.exceptions.ClientError (AccessDenied) when a request is received.\r\n\r\nIn the example below, the app is deployed with a role that is missing the permissions that it requires.\r\n\r\n### MVCE\r\n**app.py:**\r\n```\r\nimport boto3\r\nfrom chalice import Chalice\r\n\r\napp = Chalice(app_name='bug')\r\ns3 = boto3.client('s3')\r\napp.debug = True\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    data = get_content('foo')\r\n    return {'data': data.decode()}\r\n\r\n\r\ndef get_content(key):\r\n    content = s3.get_object(Bucket='this-chalice-resembles-a-grail',\r\n                            Key=key)['Body'].read()\r\n    return content\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/692/reactions", "total_count": 9, "+1": 9, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/692/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/685", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/685/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/685/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/685/events", "html_url": "https://github.com/aws/chalice/issues/685", "id": 289392137, "node_id": "MDU6SXNzdWUyODkzOTIxMzc=", "number": 685, "title": "Inconsistent IAM Role Generation with API Gateway and Pure Lambdas", "user": {"login": "wollerman", "id": 1610241, "node_id": "MDQ6VXNlcjE2MTAyNDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1610241?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wollerman", "html_url": "https://github.com/wollerman", "followers_url": "https://api.github.com/users/wollerman/followers", "following_url": "https://api.github.com/users/wollerman/following{/other_user}", "gists_url": "https://api.github.com/users/wollerman/gists{/gist_id}", "starred_url": "https://api.github.com/users/wollerman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wollerman/subscriptions", "organizations_url": "https://api.github.com/users/wollerman/orgs", "repos_url": "https://api.github.com/users/wollerman/repos", "events_url": "https://api.github.com/users/wollerman/events{/privacy}", "received_events_url": "https://api.github.com/users/wollerman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-17T19:52:39Z", "updated_at": "2018-05-16T16:17:18Z", "closed_at": "2018-05-16T16:17:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a chalice app that contains both API Gateway endpoints and pure lambda endpoints. When I run `chalice deploy` the first time everything runs smoothly and i see output such as:\r\n```\r\nRegen deployment package.\r\nCreating role: my-service-dev\r\nThe following execution policy will be used: # followed by the policy i am using\r\nCreating deployment package.\r\nCreating lambda function: my-service-dev\r\nUpdating IAM policy for role: my-service-dev\r\nCreating lambda function: my-service-dev-custom_pure_lambda\r\nInitiating first time deployment.\r\nDeploying to API Gateway stage: api\r\nhttps://mylambda.execute-api.us-west-2.amazonaws.com/api/\r\n```\r\n\r\nHowever, if I make chances to my app and then again run `chalice deploy` I see a new role created for the pure lambda:\r\n\r\n```\r\nRegen deployment package.\r\nUpdating IAM policy for role: my-service-dev\r\nUpdating lambda function: my-service-dev\r\nUpdating IAM policy for role: my-service-dev\r\nRegen deployment package.\r\nCreating role: my-service-dev-custom_pure_lambda\r\nThe following execution policy will be used: # followed by the policy i am using\r\nUpdating lambda function: my-service-dev-custom_pure_lambda\r\nAPI Gateway rest API already found: mylambda\r\nDeploying to API Gateway stage: api\r\nhttps://mylambda.execute-api.us-west-2.amazonaws.com/api/\r\n```\r\n\r\nI also do not see any reference to the roles in the `deployed.json` so I have to go look in the lamba console to find which role is being used.\r\n\r\nThis is a bug where roles are created at different times. I think either there should only be a single role or both roles should be created up front.\r\n\r\nLet me know if I need to clarify anything. Thanks!", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/685/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/685/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/646", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/646/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/646/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/646/events", "html_url": "https://github.com/aws/chalice/issues/646", "id": 284022623, "node_id": "MDU6SXNzdWUyODQwMjI2MjM=", "number": 646, "title": "async function support (or at least better error message)", "user": {"login": "getaaron", "id": 789577, "node_id": "MDQ6VXNlcjc4OTU3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/789577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/getaaron", "html_url": "https://github.com/getaaron", "followers_url": "https://api.github.com/users/getaaron/followers", "following_url": "https://api.github.com/users/getaaron/following{/other_user}", "gists_url": "https://api.github.com/users/getaaron/gists{/gist_id}", "starred_url": "https://api.github.com/users/getaaron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/getaaron/subscriptions", "organizations_url": "https://api.github.com/users/getaaron/orgs", "repos_url": "https://api.github.com/users/getaaron/repos", "events_url": "https://api.github.com/users/getaaron/events{/privacy}", "received_events_url": "https://api.github.com/users/getaaron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-21T22:29:24Z", "updated_at": "2018-01-15T17:19:38Z", "closed_at": "2018-01-15T17:19:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a working lambda function and am trying to migrate to _chalice_. This lambda function includes a Python async function:\r\n\r\n```python\r\nasync def fetch(session, url):\r\n```\r\n\r\nWhen I run `chalice deploy`, the deploy fails cryptically:\r\n\r\n```bash\r\n$ chalice deploy\r\nLoading function\r\nRegen deployment package.\r\n'xml_request'\r\n$\r\n```\r\n\r\n(`xml_request` is a variable in my lambda function, not sure if that's a coincidence or if chalice has a similar variable name.)\r\n\r\nIf I comment out the `async def` function, the deploy goes smoothly.\r\n\r\n- IMO, chalice should support async functions since lambda supports them (despite the comments in https://github.com/aws/chalice/issues/637)\r\n- if chalice doesn't support them, this should be (1) a documented limitation, and (2) there should be a friendly explanation that the function as written is incompatible with chalice and to either rewrite it or find another deployment solution\r\n\r\nCC @rajasimon", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/646/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/646/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/565", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/565/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/565/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/565/events", "html_url": "https://github.com/aws/chalice/issues/565", "id": 263639064, "node_id": "MDU6SXNzdWUyNjM2MzkwNjQ=", "number": 565, "title": "After fail to create IAM role, cannot deploy anymore.", "user": {"login": "chroju", "id": 4526869, "node_id": "MDQ6VXNlcjQ1MjY4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/4526869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chroju", "html_url": "https://github.com/chroju", "followers_url": "https://api.github.com/users/chroju/followers", "following_url": "https://api.github.com/users/chroju/following{/other_user}", "gists_url": "https://api.github.com/users/chroju/gists{/gist_id}", "starred_url": "https://api.github.com/users/chroju/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chroju/subscriptions", "organizations_url": "https://api.github.com/users/chroju/orgs", "repos_url": "https://api.github.com/users/chroju/repos", "events_url": "https://api.github.com/users/chroju/events{/privacy}", "received_events_url": "https://api.github.com/users/chroju/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2017-10-07T12:42:24Z", "updated_at": "2022-01-25T23:32:21Z", "closed_at": "2017-12-14T20:45:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello.\r\n\r\nWhen I execute `chalice deploy`, faced error of IAM role.\r\n\r\n```bash\r\n$ chalice deploy --no-autogen-policy\r\nCreating role: sample-chalice\r\nERROR - While deploying your chalice application, received the following error:\r\n\r\n An error occurred (MalformedPolicyDocument) when calling the PutRolePolicy\r\n operation: Syntax errors in policy.\r\n```\r\n\r\nand I have fixed syntax error, deploy again.\r\nHowever, the IAM role had been made incompletely by the last deploy, so the deploy failed with another error.\r\n\r\n```\r\n$ chalice deploy --no-autogen-policy\r\nUpdating IAM policy for role: sample-chalice\r\nERROR - While deploying your chalice application, received the following error:\r\n\r\n An error occurred (NoSuchEntity) when calling the DeleteRolePolicy operation:\r\n The role policy with name sample-chalice cannot be found.\r\n```\r\n\r\nIf I wanted deploy to succeed, I had to delete incomplete IAM role once with AWS console or AWS CLI. `chalice delete` command was useless in this case.\r\n\r\nIs this as you expected ?\r\n\r\n## environment\r\n\r\n* chalice 1.0.3\r\n* Python 3.6.1", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/565/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/565/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/560", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/560/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/560/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/560/events", "html_url": "https://github.com/aws/chalice/pull/560", "id": 262197560, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ0MjYyNjQ1", "number": 560, "title": "Add file encoding argument to the get_file_contents", "user": {"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 407218149, "node_id": "MDU6TGFiZWw0MDcyMTgxNDk=", "url": "https://api.github.com/repos/aws/chalice/labels/changes-requested", "name": "changes-requested", "color": "1d76db", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-10-02T19:23:57Z", "updated_at": "2017-10-02T22:27:06Z", "closed_at": "2017-10-02T22:27:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/aws/chalice/pulls/560", "html_url": "https://github.com/aws/chalice/pull/560", "diff_url": "https://github.com/aws/chalice/pull/560.diff", "patch_url": "https://github.com/aws/chalice/pull/560.patch", "merged_at": "2017-10-02T22:27:06Z"}, "body": "Specifically using the default causes an issue on windows if any file\r\nhas contents that are not readable by cp1252. This comes up during the\r\npackaging of a deployment. Some egg-info files contain unicode\r\ncharacters. Windows fails to build the deployment bundle since it\r\ncrashes trying to read the egg-info file.\r\n\r\n@jamesls @kyleknap ", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/560/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/aws/chalice/issues/555", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/555/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/555/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/555/events", "html_url": "https://github.com/aws/chalice/pull/555", "id": 260753961, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQzMjMxMjI0", "number": 555, "title": "Fix wheel packages with _ in their name not being converted to -", "user": {"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 692885044, "node_id": "MDU6TGFiZWw2OTI4ODUwNDQ=", "url": "https://api.github.com/repos/aws/chalice/labels/small", "name": "small", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-26T20:11:28Z", "updated_at": "2017-09-27T19:55:41Z", "closed_at": "2017-09-27T19:55:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/aws/chalice/pulls/555", "html_url": "https://github.com/aws/chalice/pull/555", "diff_url": "https://github.com/aws/chalice/pull/555.diff", "patch_url": "https://github.com/aws/chalice/pull/555.patch", "merged_at": null}, "body": "Since wheel files use - as a delimeter between the different\r\ncomponents of the filename such as distribution-version-... if the\r\ndistribution has - in it they are converted to _. So when we read a\r\nwheel file that has _ in the distribution, they need to be remaped to\r\n-.\r\n\r\ncc @jamesls @kyleknap @dstufft ", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/555/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/aws/chalice/issues/554", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/554/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/554/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/554/events", "html_url": "https://github.com/aws/chalice/pull/554", "id": 260399179, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQyOTcyNTQz", "number": 554, "title": "Chalice local 200s CORS OPTIONS rather than 403", "user": {"login": "corespace", "id": 523515, "node_id": "MDQ6VXNlcjUyMzUxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/523515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/corespace", "html_url": "https://github.com/corespace", "followers_url": "https://api.github.com/users/corespace/followers", "following_url": "https://api.github.com/users/corespace/following{/other_user}", "gists_url": "https://api.github.com/users/corespace/gists{/gist_id}", "starred_url": "https://api.github.com/users/corespace/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/corespace/subscriptions", "organizations_url": "https://api.github.com/users/corespace/orgs", "repos_url": "https://api.github.com/users/corespace/repos", "events_url": "https://api.github.com/users/corespace/events{/privacy}", "received_events_url": "https://api.github.com/users/corespace/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 690581005, "node_id": "MDU6TGFiZWw2OTA1ODEwMDU=", "url": "https://api.github.com/repos/aws/chalice/labels/needs-review", "name": "needs-review", "color": "0052cc", "default": false, "description": null}, {"id": 692885044, "node_id": "MDU6TGFiZWw2OTI4ODUwNDQ=", "url": "https://api.github.com/repos/aws/chalice/labels/small", "name": "small", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-09-25T20:08:35Z", "updated_at": "2017-09-27T15:41:58Z", "closed_at": "2017-09-26T21:20:34Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/aws/chalice/pulls/554", "html_url": "https://github.com/aws/chalice/pull/554", "diff_url": "https://github.com/aws/chalice/pull/554.diff", "patch_url": "https://github.com/aws/chalice/pull/554.patch", "merged_at": null}, "body": "Hi folks,\r\n\r\nMy local preflights got broken, so this should fix them. Ran coverage reports before/after and no changes there. You could probably delete `class NoOptionsRouteDefined`, but I didn't want to make that call myself.\r\n\r\nThanks!\r\n-Kyle", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/554/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/aws/chalice/issues/550", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/550/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/550/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/550/events", "html_url": "https://github.com/aws/chalice/pull/550", "id": 259276916, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQyMTg0MDU2", "number": 550, "title": "Stop infinite recursion in analyzer", "user": {"login": "joguSD", "id": 1935727, "node_id": "MDQ6VXNlcjE5MzU3Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/1935727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joguSD", "html_url": "https://github.com/joguSD", "followers_url": "https://api.github.com/users/joguSD/followers", "following_url": "https://api.github.com/users/joguSD/following{/other_user}", "gists_url": "https://api.github.com/users/joguSD/gists{/gist_id}", "starred_url": "https://api.github.com/users/joguSD/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joguSD/subscriptions", "organizations_url": "https://api.github.com/users/joguSD/orgs", "repos_url": "https://api.github.com/users/joguSD/repos", "events_url": "https://api.github.com/users/joguSD/events{/privacy}", "received_events_url": "https://api.github.com/users/joguSD/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 407218149, "node_id": "MDU6TGFiZWw0MDcyMTgxNDk=", "url": "https://api.github.com/repos/aws/chalice/labels/changes-requested", "name": "changes-requested", "color": "1d76db", "default": false, "description": null}, {"id": 692885044, "node_id": "MDU6TGFiZWw2OTI4ODUwNDQ=", "url": "https://api.github.com/repos/aws/chalice/labels/small", "name": "small", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-20T19:34:09Z", "updated_at": "2017-09-22T16:37:56Z", "closed_at": "2017-09-22T16:37:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/aws/chalice/pulls/550", "html_url": "https://github.com/aws/chalice/pull/550", "diff_url": "https://github.com/aws/chalice/pull/550.diff", "patch_url": "https://github.com/aws/chalice/pull/550.patch", "merged_at": "2017-09-22T16:37:56Z"}, "body": "Fixes #531 \r\n\r\nThe analyzer would follow any recursive function infinitely. This adds a visited set of AST nodes to the AST walker so that we don't attempt to jump into a function definition multiple times.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/550/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/550/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/aws/chalice/issues/544", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/544/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/544/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/544/events", "html_url": "https://github.com/aws/chalice/pull/544", "id": 259038116, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQyMDA5MTQz", "number": 544, "title": "delete cloud watch rule", "user": {"login": "achautha", "id": 5121563, "node_id": "MDQ6VXNlcjUxMjE1NjM=", "avatar_url": "https://avatars.githubusercontent.com/u/5121563?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achautha", "html_url": "https://github.com/achautha", "followers_url": "https://api.github.com/users/achautha/followers", "following_url": "https://api.github.com/users/achautha/following{/other_user}", "gists_url": "https://api.github.com/users/achautha/gists{/gist_id}", "starred_url": "https://api.github.com/users/achautha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achautha/subscriptions", "organizations_url": "https://api.github.com/users/achautha/orgs", "repos_url": "https://api.github.com/users/achautha/repos", "events_url": "https://api.github.com/users/achautha/events{/privacy}", "received_events_url": "https://api.github.com/users/achautha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 407218149, "node_id": "MDU6TGFiZWw0MDcyMTgxNDk=", "url": "https://api.github.com/repos/aws/chalice/labels/changes-requested", "name": "changes-requested", "color": "1d76db", "default": false, "description": null}, {"id": 692885044, "node_id": "MDU6TGFiZWw2OTI4ODUwNDQ=", "url": "https://api.github.com/repos/aws/chalice/labels/small", "name": "small", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-09-20T04:41:47Z", "updated_at": "2017-09-22T04:44:45Z", "closed_at": "2017-09-22T00:09:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/aws/chalice/pulls/544", "html_url": "https://github.com/aws/chalice/pull/544", "diff_url": "https://github.com/aws/chalice/pull/544.diff", "patch_url": "https://github.com/aws/chalice/pull/544.patch", "merged_at": "2017-09-22T00:09:10Z"}, "body": "Fixes issue #535 ", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/544/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/544/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/aws/chalice/issues/535", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/535/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/535/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/535/events", "html_url": "https://github.com/aws/chalice/issues/535", "id": 257758716, "node_id": "MDU6SXNzdWUyNTc3NTg3MTY=", "number": 535, "title": "Chalice doesn't delete CloudWatch rule created for Scheduled lambda-function", "user": {"login": "pshirbhate", "id": 21357946, "node_id": "MDQ6VXNlcjIxMzU3OTQ2", "avatar_url": "https://avatars.githubusercontent.com/u/21357946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pshirbhate", "html_url": "https://github.com/pshirbhate", "followers_url": "https://api.github.com/users/pshirbhate/followers", "following_url": "https://api.github.com/users/pshirbhate/following{/other_user}", "gists_url": "https://api.github.com/users/pshirbhate/gists{/gist_id}", "starred_url": "https://api.github.com/users/pshirbhate/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pshirbhate/subscriptions", "organizations_url": "https://api.github.com/users/pshirbhate/orgs", "repos_url": "https://api.github.com/users/pshirbhate/repos", "events_url": "https://api.github.com/users/pshirbhate/events{/privacy}", "received_events_url": "https://api.github.com/users/pshirbhate/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-14T15:20:22Z", "updated_at": "2017-09-22T17:32:57Z", "closed_at": "2017-09-22T17:32:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nWhile developing the scheduled lambda-function, I figured out that chalice doesn't delete the CloudWatch rules it has created during the deploy.\r\n\r\n```\r\nfrom chalice import Chalice\r\nfrom chalice import Rate\r\n\r\napp = Chalice(app_name='test')\r\n\r\n@app.route('/')\r\ndef index():\r\n    return {'hello': 'world'}\r\n\r\n@app.schedule(Rate(1, unit=Rate.MINUTES))\r\ndef every_minute(event):\r\n    print event.to_dict()\r\n\r\n```\r\nWhile deletion, Chalice deletes the REST API endpoint, lambda-function: test-dev, scheduled lambda-function: test-dev-every_minute and role: test-dev EXCEPT cloud watch rule: test-dev-every_minute\r\n\r\nKindly look into this.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/535/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/535/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/531", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/531/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/531/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/531/events", "html_url": "https://github.com/aws/chalice/issues/531", "id": 256805037, "node_id": "MDU6SXNzdWUyNTY4MDUwMzc=", "number": 531, "title": "Maximum recursion depth exceeded when running chalice deploy", "user": {"login": "twslankard", "id": 399361, "node_id": "MDQ6VXNlcjM5OTM2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/399361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/twslankard", "html_url": "https://github.com/twslankard", "followers_url": "https://api.github.com/users/twslankard/followers", "following_url": "https://api.github.com/users/twslankard/following{/other_user}", "gists_url": "https://api.github.com/users/twslankard/gists{/gist_id}", "starred_url": "https://api.github.com/users/twslankard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/twslankard/subscriptions", "organizations_url": "https://api.github.com/users/twslankard/orgs", "repos_url": "https://api.github.com/users/twslankard/repos", "events_url": "https://api.github.com/users/twslankard/events{/privacy}", "received_events_url": "https://api.github.com/users/twslankard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-11T18:49:31Z", "updated_at": "2017-09-22T16:37:56Z", "closed_at": "2017-09-22T16:37:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey all,\r\n\r\nI'm working on deployment for a my new Chalice-based project (using version 1.0.2.)\r\n\r\nWhen I run `chalice deploy` I get the error `maximum recursion depth exceeded` with no stack trace. After running the debugger, I was able to narrow down the problem to Chalice's AST traversal code. From there, I created a reduction using my `app.py`. Given this, it appears as though the AST traversal code does not tolerate recursion.\r\n\r\nHere's the reduced `app.py`. If I remove the recursive function, then `chalice deploy` appears to work as expected.\r\n\r\n```\r\nfrom chalice import Chalice\r\n\r\napp = Chalice(app_name='recursion')\r\napp.debug = True\r\n\r\n\r\ndef recursive_function(obj):\r\n    if False:\r\n        recursive_function(obj)\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    recursive_function({})\r\n    return {}\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/531/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/531/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/529", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/529/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/529/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/529/events", "html_url": "https://github.com/aws/chalice/issues/529", "id": 256252159, "node_id": "MDU6SXNzdWUyNTYyNTIxNTk=", "number": 529, "title": "Unsupported service: cognito-idp", "user": {"login": "pshirbhate", "id": 21357946, "node_id": "MDQ6VXNlcjIxMzU3OTQ2", "avatar_url": "https://avatars.githubusercontent.com/u/21357946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pshirbhate", "html_url": "https://github.com/pshirbhate", "followers_url": "https://api.github.com/users/pshirbhate/followers", "following_url": "https://api.github.com/users/pshirbhate/following{/other_user}", "gists_url": "https://api.github.com/users/pshirbhate/gists{/gist_id}", "starred_url": "https://api.github.com/users/pshirbhate/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pshirbhate/subscriptions", "organizations_url": "https://api.github.com/users/pshirbhate/orgs", "repos_url": "https://api.github.com/users/pshirbhate/repos", "events_url": "https://api.github.com/users/pshirbhate/events{/privacy}", "received_events_url": "https://api.github.com/users/pshirbhate/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "jamesls", "id": 368057, "node_id": "MDQ6VXNlcjM2ODA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/368057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesls", "html_url": "https://github.com/jamesls", "followers_url": "https://api.github.com/users/jamesls/followers", "following_url": "https://api.github.com/users/jamesls/following{/other_user}", "gists_url": "https://api.github.com/users/jamesls/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesls/subscriptions", "organizations_url": "https://api.github.com/users/jamesls/orgs", "repos_url": "https://api.github.com/users/jamesls/repos", "events_url": "https://api.github.com/users/jamesls/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesls/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jamesls", "id": 368057, "node_id": "MDQ6VXNlcjM2ODA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/368057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesls", "html_url": "https://github.com/jamesls", "followers_url": "https://api.github.com/users/jamesls/followers", "following_url": "https://api.github.com/users/jamesls/following{/other_user}", "gists_url": "https://api.github.com/users/jamesls/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesls/subscriptions", "organizations_url": "https://api.github.com/users/jamesls/orgs", "repos_url": "https://api.github.com/users/jamesls/repos", "events_url": "https://api.github.com/users/jamesls/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesls/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-09-08T13:21:42Z", "updated_at": "2017-09-14T20:16:10Z", "closed_at": "2017-09-14T20:16:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI'm developing an API service to list the users from Cognito pool. While deploying chalice says - \"Unsupported service: cognito-idp\"\r\n\r\n$ chalice deploy --stage dev\r\nEnvironment is dev\r\nInitial creation of lambda function.\r\nCreating role\r\n**Unsupported service: cognito-idp**\r\n...\r\n\r\nAnd post deployment, when I tried to access the API, It respond with the below error:\r\n\r\n_An error occurred (AccessDeniedException) when calling the ListUsers operation: User: arn:aws:sts::xxxxx:assumed-role/user_auth-dev/user_auth-dev is not authorized to perform: cognito-idp:ListUsers on resource: arn:aws:cognito-idp:us-west-2:xxxxx:userpool/xxxxx_\r\n\r\nHere, am using AWS chalice (1.0.1) and Boto3 (1.4.6)\r\n\r\nSample Code:\r\n```\r\n@app.route('/list_users')\r\ndef list_users():\r\n    client = boto3.client('cognito-idp')\r\n    user_list = client.list_users(UserPoolId=xxxx)\r\n    ...\r\n\r\n```\r\nIn case Chalice doesn't yet support 'cognito-idp'.  Are there any alternative to achieve the listing of Cognito Pool Users? \r\n\r\nAppreciate your support!\r\n\r\nThanks,\r\nPawan\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/529/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/529/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/525", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/525/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/525/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/525/events", "html_url": "https://github.com/aws/chalice/issues/525", "id": 255992893, "node_id": "MDU6SXNzdWUyNTU5OTI4OTM=", "number": 525, "title": "OPTIONS generated by CORS doesn't work correctly in local", "user": {"login": "jsanchezs", "id": 9250425, "node_id": "MDQ6VXNlcjkyNTA0MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9250425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsanchezs", "html_url": "https://github.com/jsanchezs", "followers_url": "https://api.github.com/users/jsanchezs/followers", "following_url": "https://api.github.com/users/jsanchezs/following{/other_user}", "gists_url": "https://api.github.com/users/jsanchezs/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsanchezs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsanchezs/subscriptions", "organizations_url": "https://api.github.com/users/jsanchezs/orgs", "repos_url": "https://api.github.com/users/jsanchezs/repos", "events_url": "https://api.github.com/users/jsanchezs/events{/privacy}", "received_events_url": "https://api.github.com/users/jsanchezs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-09-07T16:14:22Z", "updated_at": "2019-06-13T09:31:01Z", "closed_at": "2017-09-20T16:47:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "First of all, thank you for this awesome framework. Really easy to use, I like it a lot.\r\n\r\nI'm developing an API that has to accept CORS and i'm having troubles with the OPTIONS methods.\r\n\r\nThe problem is easy to reproduce:\r\nIn app.py\r\n```\r\n...\r\n@app.route('/test', methods=['POST'], cors=True)\r\ndef test_cors():\r\n  return {'hello': 'world'}\r\n\r\n```\r\nThen, run it in local: `chalice local --port=8100`\r\n\r\nWhen you try to do the first OPTIONS curl, everything works =)\r\n\r\n```\r\ncurl -H \"Origin: http://example.com\" \\                                                      \r\n  -H \"Access-Control-Request-Method: POST\" \\\r\n  -H \"Access-Control-Request-Headers: X-Requested-With\" \\\r\n  -X OPTIONS --verbose \\\r\n  http://localhost:8100/test\r\n```\r\nResponse:\r\n```\r\n*   Trying ::1...\r\n* TCP_NODELAY set\r\n* Connection failed\r\n* connect to ::1 port 8100 failed: Connection refused\r\n*   Trying 127.0.0.1...\r\n* TCP_NODELAY set\r\n* Connected to localhost (127.0.0.1) port 8100 (#0)\r\n> OPTIONS /test HTTP/1.1\r\n> Host: localhost:8100\r\n> User-Agent: curl/7.51.0\r\n> Accept: */*\r\n> Origin: http://example.com\r\n> Access-Control-Request-Method: POST\r\n> Access-Control-Request-Headers: X-Requested-With\r\n>\r\n* HTTP 1.0, assume close after body\r\n< HTTP/1.0 200 OK\r\n< Server: BaseHTTP/0.6 Python/3.6.0\r\n< Date: Thu, 07 Sep 2017 16:02:02 GMT\r\n< Access-Control-Allow-Origin: *\r\n< Access-Control-Allow-Headers: Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key\r\n< Access-Control-Allow-Methods: POST,OPTIONS\r\n<\r\n* Curl_http_done: called premature == 0\r\n* Closing connection 0\r\n```\r\n\r\nBut the next OPTIONS curl will not end never =(\r\n\r\n```\r\n*   Trying ::1...\r\n* TCP_NODELAY set\r\n* Connection failed\r\n* connect to ::1 port 8100 failed: Connection refused\r\n*   Trying 127.0.0.1...\r\n* TCP_NODELAY set\r\n* Connected to localhost (127.0.0.1) port 8100 (#0)\r\n> OPTIONS /test HTTP/1.1\r\n> Host: localhost:8100\r\n> User-Agent: curl/7.51.0\r\n> Accept: */*\r\n> Origin: http://example.com\r\n> Access-Control-Request-Method: POST\r\n> Access-Control-Request-Headers: X-Requested-With\r\n>\r\n< HTTP/1.1 200 OK\r\n< Server: BaseHTTP/0.6 Python/3.6.0\r\n< Date: Thu, 07 Sep 2017 16:02:03 GMT\r\n< Access-Control-Allow-Origin: *\r\n< Access-Control-Allow-Headers: Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key\r\n< Access-Control-Allow-Methods: POST,OPTIONS\r\n* no chunk, no close, no size. Assume close to signal end\r\n```\r\n\r\nIt stops in  `* no chunk, no close, no size. Assume close to signal end`. It seems like the server only send the close signal only in the first call. If you stop the second curl and try it again, it wont stop neither.\r\n \r\nDo you have the same problem? Can you reproduce it?\r\n\r\nP.S.: I'm using macOS, but I hope that is not a problem to do the local development =P", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/525/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/525/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/503", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/503/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/503/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/503/events", "html_url": "https://github.com/aws/chalice/issues/503", "id": 254061255, "node_id": "MDU6SXNzdWUyNTQwNjEyNTU=", "number": 503, "title": "raw_body property inconsistency", "user": {"login": "johntmyers", "id": 9696606, "node_id": "MDQ6VXNlcjk2OTY2MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/9696606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johntmyers", "html_url": "https://github.com/johntmyers", "followers_url": "https://api.github.com/users/johntmyers/followers", "following_url": "https://api.github.com/users/johntmyers/following{/other_user}", "gists_url": "https://api.github.com/users/johntmyers/gists{/gist_id}", "starred_url": "https://api.github.com/users/johntmyers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johntmyers/subscriptions", "organizations_url": "https://api.github.com/users/johntmyers/orgs", "repos_url": "https://api.github.com/users/johntmyers/repos", "events_url": "https://api.github.com/users/johntmyers/events{/privacy}", "received_events_url": "https://api.github.com/users/johntmyers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-30T16:30:44Z", "updated_at": "2017-09-01T21:56:02Z", "closed_at": "2017-09-01T21:56:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When no body is sent, and `app.current_request.raw_body` is used, there is inconsistent behavior between local Chalice testing and actually how it runs in Lambda.\r\n\r\nFor local testing, if no body is sent `self._body` is getting set to a string: `{}`\r\n\r\nHowever, when no body is provided in an actual call to API gateway, `self._body` is `None` and there is an unhandled AttributeError exception when this executes: `self._raw_body = self._body.encode('utf-8')` \r\n\r\nThis effectively makes it hard for an app developer to gracefully handle a missing body from a call and will always yield a 500 error back to the user.\r\n\r\nI personally see no reason to catch if body is None within `local.py` this effectively gives a false impression of how a request will be handled by Lambda itself. Instead the None type should be handled within the `raw_body` property IMO.\r\n\r\nRelevant code in app.py:\r\n\r\n```python\r\n@property\r\n    def raw_body(self):\r\n        if self._raw_body is None:\r\n            if self._is_base64_encoded:\r\n                self._raw_body = self._base64decode(self._body)\r\n            elif not isinstance(self._body, bytes):\r\n                self._raw_body = self._body.encode('utf-8')\r\n            else:\r\n                self._raw_body = self._body\r\n        return self._raw_body\r\n```\r\n\r\nRelevant code in local.py:\r\n```python\r\ndef create_lambda_event(self, method, path, headers, body=None):\r\n        # type: (str, str, Dict[str, str], str) -> EventType\r\n        view_route = self._route_matcher.match_route(path)\r\n        event = {\r\n            'requestContext': {\r\n                'httpMethod': method,\r\n                'resourcePath': view_route.route,\r\n                'identity': {\r\n                    'sourceIp': self.LOCAL_SOURCE_IP\r\n                },\r\n            },\r\n            'headers': dict(headers),\r\n            'queryStringParameters': view_route.query_params,\r\n            'pathParameters': view_route.captured,\r\n            'stageVariables': {},\r\n        }\r\n        # if body is None:\r\n        #    event['body'] = '{}'\r\n        if self._is_binary(headers):\r\n            event['body'] = base64.b64encode(body).decode('ascii')\r\n            event['isBase64Encoded'] = True\r\n        else:\r\n            event['body'] = body\r\n        return event\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/503/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/501", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/501/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/501/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/501/events", "html_url": "https://github.com/aws/chalice/issues/501", "id": 253819312, "node_id": "MDU6SXNzdWUyNTM4MTkzMTI=", "number": 501, "title": "Environment variables do not get passed to subprocess during package building", "user": {"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2017-08-29T22:05:11Z", "updated_at": "2017-09-05T18:16:32Z", "closed_at": "2017-09-05T18:16:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When Chalice creates subprocesses to build the package it does not pass down the current set of environment variables down. This was introduced in https://github.com/aws/chalice/commit/d6b22b3e8932dd588bf5110d5e5b084d246681a4 so it is a regression over the previous behavior where the subprocess inherited the environment. This matters for any setup.py file that makes use of an environment variable.\r\n\r\nInitial issue #497 ", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/501/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/500", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/500/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/500/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/500/events", "html_url": "https://github.com/aws/chalice/issues/500", "id": 253817099, "node_id": "MDU6SXNzdWUyNTM4MTcwOTk=", "number": 500, "title": "Dependency packaging does not propagate errors from subprocess", "user": {"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2017-08-29T21:56:05Z", "updated_at": "2017-09-01T17:55:42Z", "closed_at": "2017-09-01T17:55:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "During the `pip download -r requirements.txt` call that Chalice makes during packaging it does not properly propagate the error code from the subprocess up to Chalice so it doesn't ever error out if there was a failure. \r\n\r\nInitial issue #497 ", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/500/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/500/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/498", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/498/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/498/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/498/events", "html_url": "https://github.com/aws/chalice/issues/498", "id": 253201317, "node_id": "MDU6SXNzdWUyNTMyMDEzMTc=", "number": 498, "title": "SDK generation not handling URL path variables", "user": {"login": "zjost", "id": 9660566, "node_id": "MDQ6VXNlcjk2NjA1NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/9660566?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zjost", "html_url": "https://github.com/zjost", "followers_url": "https://api.github.com/users/zjost/followers", "following_url": "https://api.github.com/users/zjost/following{/other_user}", "gists_url": "https://api.github.com/users/zjost/gists{/gist_id}", "starred_url": "https://api.github.com/users/zjost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zjost/subscriptions", "organizations_url": "https://api.github.com/users/zjost/orgs", "repos_url": "https://api.github.com/users/zjost/repos", "events_url": "https://api.github.com/users/zjost/events{/privacy}", "received_events_url": "https://api.github.com/users/zjost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "jamesls", "id": 368057, "node_id": "MDQ6VXNlcjM2ODA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/368057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesls", "html_url": "https://github.com/jamesls", "followers_url": "https://api.github.com/users/jamesls/followers", "following_url": "https://api.github.com/users/jamesls/following{/other_user}", "gists_url": "https://api.github.com/users/jamesls/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesls/subscriptions", "organizations_url": "https://api.github.com/users/jamesls/orgs", "repos_url": "https://api.github.com/users/jamesls/repos", "events_url": "https://api.github.com/users/jamesls/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesls/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jamesls", "id": 368057, "node_id": "MDQ6VXNlcjM2ODA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/368057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesls", "html_url": "https://github.com/jamesls", "followers_url": "https://api.github.com/users/jamesls/followers", "following_url": "https://api.github.com/users/jamesls/following{/other_user}", "gists_url": "https://api.github.com/users/jamesls/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesls/subscriptions", "organizations_url": "https://api.github.com/users/jamesls/orgs", "repos_url": "https://api.github.com/users/jamesls/repos", "events_url": "https://api.github.com/users/jamesls/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesls/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-08-28T00:34:26Z", "updated_at": "2017-08-31T19:59:05Z", "closed_at": "2017-08-31T19:59:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "When trying to recreate the example in the [docs](http://chalice.readthedocs.io/en/latest/topics/sdks.html), the generated javascript GET methods like `apigClient.helloNameGet({name: 'jimmy'})` that are supposed to use parameters to construct the path don't seem to work.  When using chrome inspect it looks like it's not adding \"jimmy\" to the URL.  \r\n\r\nWhen constructing an example like `@app.route('/{name}/hello')` then the javascript makes an api call to `<BASE>/api//hello`.  ", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/498/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/495", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/495/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/495/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/495/events", "html_url": "https://github.com/aws/chalice/issues/495", "id": 253000620, "node_id": "MDU6SXNzdWUyNTMwMDA2MjA=", "number": 495, "title": "API Gateway Stage ignored in config.json", "user": {"login": "jamesls", "id": 368057, "node_id": "MDQ6VXNlcjM2ODA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/368057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesls", "html_url": "https://github.com/jamesls", "followers_url": "https://api.github.com/users/jamesls/followers", "following_url": "https://api.github.com/users/jamesls/following{/other_user}", "gists_url": "https://api.github.com/users/jamesls/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesls/subscriptions", "organizations_url": "https://api.github.com/users/jamesls/orgs", "repos_url": "https://api.github.com/users/jamesls/repos", "events_url": "https://api.github.com/users/jamesls/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesls/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "jamesls", "id": 368057, "node_id": "MDQ6VXNlcjM2ODA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/368057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesls", "html_url": "https://github.com/jamesls", "followers_url": "https://api.github.com/users/jamesls/followers", "following_url": "https://api.github.com/users/jamesls/following{/other_user}", "gists_url": "https://api.github.com/users/jamesls/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesls/subscriptions", "organizations_url": "https://api.github.com/users/jamesls/orgs", "repos_url": "https://api.github.com/users/jamesls/repos", "events_url": "https://api.github.com/users/jamesls/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesls/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jamesls", "id": 368057, "node_id": "MDQ6VXNlcjM2ODA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/368057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesls", "html_url": "https://github.com/jamesls", "followers_url": "https://api.github.com/users/jamesls/followers", "following_url": "https://api.github.com/users/jamesls/following{/other_user}", "gists_url": "https://api.github.com/users/jamesls/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesls/subscriptions", "organizations_url": "https://api.github.com/users/jamesls/orgs", "repos_url": "https://api.github.com/users/jamesls/repos", "events_url": "https://api.github.com/users/jamesls/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesls/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2017-08-25T19:45:33Z", "updated_at": "2017-08-31T20:57:20Z", "closed_at": "2017-08-31T20:57:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Originally reported [here](https://github.com/aws/chalice/pull/475#issuecomment-324975657), I've confirmed this is an issue.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/495/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/470", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/470/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/470/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/470/events", "html_url": "https://github.com/aws/chalice/issues/470", "id": 249653448, "node_id": "MDU6SXNzdWUyNDk2NTM0NDg=", "number": 470, "title": "Stage feature not functioning as expected", "user": {"login": "stewmi", "id": 13454575, "node_id": "MDQ6VXNlcjEzNDU0NTc1", "avatar_url": "https://avatars.githubusercontent.com/u/13454575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stewmi", "html_url": "https://github.com/stewmi", "followers_url": "https://api.github.com/users/stewmi/followers", "following_url": "https://api.github.com/users/stewmi/following{/other_user}", "gists_url": "https://api.github.com/users/stewmi/gists{/gist_id}", "starred_url": "https://api.github.com/users/stewmi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stewmi/subscriptions", "organizations_url": "https://api.github.com/users/stewmi/orgs", "repos_url": "https://api.github.com/users/stewmi/repos", "events_url": "https://api.github.com/users/stewmi/events{/privacy}", "received_events_url": "https://api.github.com/users/stewmi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-11T14:30:29Z", "updated_at": "2017-08-14T21:26:31Z", "closed_at": "2017-08-14T21:26:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "When attempting to use ```chalice deploy --stage dev``` the dev API Gateway is given the /api context and when using ```chalice deploy --stage prod``` the Prod API Gateway is given the /dev context. It appears order does not matter and I've deleted and started from scratch and still seeing issue. #", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/470/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/470/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/450", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/450/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/450/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/450/events", "html_url": "https://github.com/aws/chalice/issues/450", "id": 246906898, "node_id": "MDU6SXNzdWUyNDY5MDY4OTg=", "number": 450, "title": "Chalice generate-pipeline can create yaml incompatible with Cloudformation", "user": {"login": "corespace", "id": 523515, "node_id": "MDQ6VXNlcjUyMzUxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/523515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/corespace", "html_url": "https://github.com/corespace", "followers_url": "https://api.github.com/users/corespace/followers", "following_url": "https://api.github.com/users/corespace/following{/other_user}", "gists_url": "https://api.github.com/users/corespace/gists{/gist_id}", "starred_url": "https://api.github.com/users/corespace/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/corespace/subscriptions", "organizations_url": "https://api.github.com/users/corespace/orgs", "repos_url": "https://api.github.com/users/corespace/repos", "events_url": "https://api.github.com/users/corespace/events{/privacy}", "received_events_url": "https://api.github.com/users/corespace/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-07-31T22:49:35Z", "updated_at": "2017-08-04T20:19:38Z", "closed_at": "2017-08-04T20:19:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi folks,\r\n\r\nI was working on a chalice app recently and decided to try out the chalice generate-pipeline feature. My app looked something like this:\r\n\r\n```\r\nfrom chalice import Chalice\r\n\r\napp = Chalice(app_name='docGen')\r\n\r\n@app.route('/some-path', methods=['POST'])\r\ndef generate_stuff():\r\n    json_body = app.current_request.json_body\r\n    return do_the_thing(json_body)\r\n```\r\nI've left out some details, obviously, but this is enough to see the problem. When I ran generate pipeline and deployed that pipeline, it built out a CloudFormation yaml that included this:\r\n```\r\nResources:\r\n  APIHandler:\r\n    Properties:\r\n      CodeUri: s3://some-s3-bucket\r\n      Events:\r\n        generate_stuffpostc666:\r\n          Properties:\r\n            Method: post\r\n            Path: /some-path\r\n            RestApiId:\r\n              Ref: RestAPI\r\n          Type: Api\r\n      Handler: app.app\r\n      MemorySize: 128\r\n      Role: some-arn\r\n      Runtime: python2.7\r\n      Tags:\r\n        aws-chalice: version=0.10.1:stage=dev:app=docGen\r\n      Timeout: 60\r\n    Type: AWS::Serverless::Function\r\n```\r\nCool, right? Nope. Cloudformation barfed on this saying something to the effect \"Event names must be alphanumeric\" I don't have the exact error message anymore cause I went to retrieve it today and the ChangeSet is gone. Anyway, I created a test to reproduce the problem, but I'm not sure how you folks would want to rectify the problem. You can see it here: https://github.com/aws/chalice/compare/master...corespace:view_name?expand=1", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/450/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/450/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/412", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/412/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/412/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/412/events", "html_url": "https://github.com/aws/chalice/issues/412", "id": 242318338, "node_id": "MDU6SXNzdWUyNDIzMTgzMzg=", "number": 412, "title": "Fail to analyze list comprehension code", "user": {"login": "lantlani", "id": 3879685, "node_id": "MDQ6VXNlcjM4Nzk2ODU=", "avatar_url": "https://avatars.githubusercontent.com/u/3879685?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lantlani", "html_url": "https://github.com/lantlani", "followers_url": "https://api.github.com/users/lantlani/followers", "following_url": "https://api.github.com/users/lantlani/following{/other_user}", "gists_url": "https://api.github.com/users/lantlani/gists{/gist_id}", "starred_url": "https://api.github.com/users/lantlani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lantlani/subscriptions", "organizations_url": "https://api.github.com/users/lantlani/orgs", "repos_url": "https://api.github.com/users/lantlani/repos", "events_url": "https://api.github.com/users/lantlani/events{/privacy}", "received_events_url": "https://api.github.com/users/lantlani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-07-12T09:38:42Z", "updated_at": "2017-07-31T17:39:50Z", "closed_at": "2017-07-31T17:39:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Chalice does not deploy below code with error message 'key_name'.\r\nIf I change the code from item['payload'][key_name] to item['payload']['data'], it works well.\r\n\r\nI have used version 1.0.0b1.\r\n\r\n```python\r\n@app.route('/data/{node_name}', methods=['GET'], cors=True, authorizer=authorizer)\r\ndef retrieve_data(node_name):\r\n    key_name = 'data'\r\n    response['Items'] = [\r\n        { 'Timestamp' : 10, 'payload' : { 'data' : 1}},\r\n        { 'Timestamp' : 11, 'payload' : { 'data' : 2}}\r\n    ]\r\n    stamp = [item['Timestamp'] for item in response['Items']]\r\n    temps = [item['payload'][key_name] for item in response['Items']]\r\n    hums = [item['payload'][key_name] for item in response['Items']]\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/412/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/412/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/403", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/403/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/403/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/403/events", "html_url": "https://github.com/aws/chalice/issues/403", "id": 240813215, "node_id": "MDU6SXNzdWUyNDA4MTMyMTU=", "number": 403, "title": "Bug with wildcards in authorizors", "user": {"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-06T00:38:23Z", "updated_at": "2017-07-31T22:33:43Z", "closed_at": "2017-07-31T22:33:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This works:\r\n```\r\nreturn AuthResponse(\r\n    routes=[AuthRoute(path='*', methods=['*'])],\r\n    principal_id='user')\r\n```\r\n\r\nBut this does not: \r\n```\r\nreturn AuthResponse(routes=['*']), principal_id='user')\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/403/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/403/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/387", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/387/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/387/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/387/events", "html_url": "https://github.com/aws/chalice/issues/387", "id": 238611952, "node_id": "MDU6SXNzdWUyMzg2MTE5NTI=", "number": 387, "title": "Deployments fail on 0.10.0 for projects previously deployed with older versions.", "user": {"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-26T17:21:55Z", "updated_at": "2017-06-26T20:25:26Z", "closed_at": "2017-06-26T20:25:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Deployments fail because `DeployedResources` now depends on the existence of the `lambda_functions` key which does not exist for deployments made with older versions.\r\n\r\n```python\r\n    @classmethod\r\n    def from_dict(cls, data):\r\n        # type: (Dict[str, Any]) -> DeployedResources\r\n        return cls(\r\n            data['backend'],\r\n            data['api_handler_arn'],\r\n            data['api_handler_name'],\r\n            data['rest_api_id'],\r\n            data['api_gateway_stage'],\r\n            data['region'],\r\n            data['chalice_version'],\r\n            data['lambda_functions'],\r\n        )\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/387/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/386", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/386/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/386/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/386/events", "html_url": "https://github.com/aws/chalice/issues/386", "id": 238350592, "node_id": "MDU6SXNzdWUyMzgzNTA1OTI=", "number": 386, "title": "Setting app.debug does not propagate to app.log logger log level", "user": {"login": "kislyuk", "id": 862013, "node_id": "MDQ6VXNlcjg2MjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/862013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kislyuk", "html_url": "https://github.com/kislyuk", "followers_url": "https://api.github.com/users/kislyuk/followers", "following_url": "https://api.github.com/users/kislyuk/following{/other_user}", "gists_url": "https://api.github.com/users/kislyuk/gists{/gist_id}", "starred_url": "https://api.github.com/users/kislyuk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kislyuk/subscriptions", "organizations_url": "https://api.github.com/users/kislyuk/orgs", "repos_url": "https://api.github.com/users/kislyuk/repos", "events_url": "https://api.github.com/users/kislyuk/events{/privacy}", "received_events_url": "https://api.github.com/users/kislyuk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-06-25T00:02:07Z", "updated_at": "2017-07-31T22:27:09Z", "closed_at": "2017-07-31T22:27:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In https://github.com/awslabs/chalice/blob/master/chalice/app.py#L434-L437, intent is shown to set the logger's log level according to the value of Chalice.debug. However, app.debug is currently hardcoded to false in `Chalice.__init__`, so without calling `Chalice. _configure_logging()` again or setting it manually via `app.log.setLevel(logging.DEBUG)`, it will always remain set to logging.ERROR.\r\n\r\nIt would probably make more sense to have a `Chalice.debug` setter that also sets the logger's level, and/or have a `Chalice(debug=True)` kwarg to make the code linked above behave as expected.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/386/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/386/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/355", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/355/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/355/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/355/events", "html_url": "https://github.com/aws/chalice/issues/355", "id": 231273992, "node_id": "MDU6SXNzdWUyMzEyNzM5OTI=", "number": 355, "title": "String format problem with Python 3.6 after deployed", "user": {"login": "Sdcxv", "id": 9675973, "node_id": "MDQ6VXNlcjk2NzU5NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/9675973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sdcxv", "html_url": "https://github.com/Sdcxv", "followers_url": "https://api.github.com/users/Sdcxv/followers", "following_url": "https://api.github.com/users/Sdcxv/following{/other_user}", "gists_url": "https://api.github.com/users/Sdcxv/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sdcxv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sdcxv/subscriptions", "organizations_url": "https://api.github.com/users/Sdcxv/orgs", "repos_url": "https://api.github.com/users/Sdcxv/repos", "events_url": "https://api.github.com/users/Sdcxv/events{/privacy}", "received_events_url": "https://api.github.com/users/Sdcxv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-05-25T08:30:31Z", "updated_at": "2017-06-05T20:43:32Z", "closed_at": "2017-06-05T20:43:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I had upgraded to Python 3.6 with chalice 0.8.2\r\nBut the string format between chalice local mode and deployed to AWS is different.\r\n\r\nIn local, I got the JSON request body using Python3 format.\r\n`request_body = urllib.parse.parse_qs(app.current_request.raw_body)`\r\nand print it out.\r\n`\r\nServing on localhost:8000\r\n{b'brand': [b'svs'], b'model': [b'pb'], b'version': [b'1.1']}\r\n`\r\n\r\nBut after deployed it. I got this in cloudwatch,\r\n`{'brand': ['svs'], 'model': ['pb16'], 'version': ['1.1']}`\r\n\r\nDid the request body will be replaced by str type in API Gateway?\r\nThe local mode should have the same result of the output with the deployed one.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/355/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/355/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/354", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/354/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/354/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/354/events", "html_url": "https://github.com/aws/chalice/issues/354", "id": 231252253, "node_id": "MDU6SXNzdWUyMzEyNTIyNTM=", "number": 354, "title": "autogen_policy from config.json is ignored when doing a chalice package", "user": {"login": "uzd", "id": 6215300, "node_id": "MDQ6VXNlcjYyMTUzMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/6215300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uzd", "html_url": "https://github.com/uzd", "followers_url": "https://api.github.com/users/uzd/followers", "following_url": "https://api.github.com/users/uzd/following{/other_user}", "gists_url": "https://api.github.com/users/uzd/gists{/gist_id}", "starred_url": "https://api.github.com/users/uzd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uzd/subscriptions", "organizations_url": "https://api.github.com/users/uzd/orgs", "repos_url": "https://api.github.com/users/uzd/repos", "events_url": "https://api.github.com/users/uzd/events{/privacy}", "received_events_url": "https://api.github.com/users/uzd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-25T06:27:31Z", "updated_at": "2017-06-08T17:48:29Z", "closed_at": "2017-06-08T17:48:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "When we do a \"chalice package\", we noticed that the autogen_policy was defaulting to true, completely ignoring the '\"autogen_policy\": false' in the config.json. After debugging, we found that the \"create_config_obj\" function (called in the 'package' cli command) defaulting autogen_policy to true.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/354/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/354/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/349", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/349/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/349/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/349/events", "html_url": "https://github.com/aws/chalice/issues/349", "id": 230557605, "node_id": "MDU6SXNzdWUyMzA1NTc2MDU=", "number": 349, "title": "Custom Package in vendor folder not recognized", "user": {"login": "abcondas", "id": 23560072, "node_id": "MDQ6VXNlcjIzNTYwMDcy", "avatar_url": "https://avatars.githubusercontent.com/u/23560072?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abcondas", "html_url": "https://github.com/abcondas", "followers_url": "https://api.github.com/users/abcondas/followers", "following_url": "https://api.github.com/users/abcondas/following{/other_user}", "gists_url": "https://api.github.com/users/abcondas/gists{/gist_id}", "starred_url": "https://api.github.com/users/abcondas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abcondas/subscriptions", "organizations_url": "https://api.github.com/users/abcondas/orgs", "repos_url": "https://api.github.com/users/abcondas/repos", "events_url": "https://api.github.com/users/abcondas/events{/privacy}", "received_events_url": "https://api.github.com/users/abcondas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "stealthycoin", "id": 1010634, "node_id": "MDQ6VXNlcjEwMTA2MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stealthycoin", "html_url": "https://github.com/stealthycoin", "followers_url": "https://api.github.com/users/stealthycoin/followers", "following_url": "https://api.github.com/users/stealthycoin/following{/other_user}", "gists_url": "https://api.github.com/users/stealthycoin/gists{/gist_id}", "starred_url": "https://api.github.com/users/stealthycoin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stealthycoin/subscriptions", "organizations_url": "https://api.github.com/users/stealthycoin/orgs", "repos_url": "https://api.github.com/users/stealthycoin/repos", "events_url": "https://api.github.com/users/stealthycoin/events{/privacy}", "received_events_url": "https://api.github.com/users/stealthycoin/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2017-05-23T00:49:55Z", "updated_at": "2017-05-25T00:22:57Z", "closed_at": "2017-05-25T00:22:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a custom package called datareferencecommon that exists in our company's private artifactory.  As instructed in chalice/docs/source/topics/packaging.rst I added a vendor folder at the same level as my app.py file.  I created a datareferencecommon folder and loaded all of the *.py files into this folder.  Folder looks like this:\r\n```\r\nroot\r\n    |--- chalicelib\r\n    |--- app.py\r\n    |--- requirements.txt\r\n    |--- vendor\r\n          |--- datareferencecommon\r\n                 |--- __init__.py\r\n                 |--- config.py\r\n                 |--- discovery.py\r\n                 |--- utils.py\r\n```\r\n\r\nIn app.py, there is a statement: `from datareferencecommon import discovery, utils`\r\nI ran chalice deploy from the root folder and receive an error \"no module named datareferencecommon\".  What am I doing wrong?  Thanks.\r\n\r\nAlso, am I understanding this correctly?  chalice deploy won't install from a private artifactory even if the ~/.pypirc file exists and points appropriately to the private artifactory?", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/349/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/349/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/339", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/339/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/339/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/339/events", "html_url": "https://github.com/aws/chalice/issues/339", "id": 228580137, "node_id": "MDU6SXNzdWUyMjg1ODAxMzc=", "number": 339, "title": "Manually provided role not updated on redeployment", "user": {"login": "mmcdermo", "id": 3526649, "node_id": "MDQ6VXNlcjM1MjY2NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3526649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmcdermo", "html_url": "https://github.com/mmcdermo", "followers_url": "https://api.github.com/users/mmcdermo/followers", "following_url": "https://api.github.com/users/mmcdermo/following{/other_user}", "gists_url": "https://api.github.com/users/mmcdermo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmcdermo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmcdermo/subscriptions", "organizations_url": "https://api.github.com/users/mmcdermo/orgs", "repos_url": "https://api.github.com/users/mmcdermo/repos", "events_url": "https://api.github.com/users/mmcdermo/events{/privacy}", "received_events_url": "https://api.github.com/users/mmcdermo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-15T00:04:19Z", "updated_at": "2017-06-08T23:48:38Z", "closed_at": "2017-06-08T23:48:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "It would be handy if chalice updated the IAM role for the lambda function whenever it performs an update on the function. To demonstrate that it doesn't currently have this functionality:\r\n\r\nIf you configure chalice to use a manually provided role in config.json with:\r\n\r\n```\r\n\"manage_iam_role\":false\r\n\"iam_role_arn\":\"arn:aws:iam::<account-id>:role/<role-name>\"\r\n```\r\n\r\nThen \r\n\r\n```\r\nchalice deploy\r\n```\r\n\r\nThen change the role to something else:\r\n```\r\n\"iam_role_arn\":\"arn:aws:iam::<account-id>:role/<role-2-name>\r\n```\r\n\r\nThen deploy again:\r\n```\r\nchalice deploy\r\n```\r\n\r\nYou'll see that the deployed lambda function still retains the first role. This makes sense, as only environment variables are updated inside awsclient.TypedAWSClient.update_function.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/339/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/310", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/310/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/310/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/310/events", "html_url": "https://github.com/aws/chalice/issues/310", "id": 224920052, "node_id": "MDU6SXNzdWUyMjQ5MjAwNTI=", "number": 310, "title": "Adding Content-Type to Response produced 2 Content-Type headers", "user": {"login": "vlads-copart", "id": 9853369, "node_id": "MDQ6VXNlcjk4NTMzNjk=", "avatar_url": "https://avatars.githubusercontent.com/u/9853369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vlads-copart", "html_url": "https://github.com/vlads-copart", "followers_url": "https://api.github.com/users/vlads-copart/followers", "following_url": "https://api.github.com/users/vlads-copart/following{/other_user}", "gists_url": "https://api.github.com/users/vlads-copart/gists{/gist_id}", "starred_url": "https://api.github.com/users/vlads-copart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vlads-copart/subscriptions", "organizations_url": "https://api.github.com/users/vlads-copart/orgs", "repos_url": "https://api.github.com/users/vlads-copart/repos", "events_url": "https://api.github.com/users/vlads-copart/events{/privacy}", "received_events_url": "https://api.github.com/users/vlads-copart/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-27T21:35:18Z", "updated_at": "2017-04-28T23:45:36Z", "closed_at": "2017-04-28T23:45:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "`curl -v localhost:8000`\r\n`>GET / HTTP/1.1`\r\n`>Host: localhost:8000`\r\n`>User-Agent: curl/7.52.1`\r\n` >Accept: */*`\r\n \r\n` HTTP 1.0, assume close after body`\r\n`< HTTP/1.0 200 OK`\r\n`< Server: BaseHTTP/0.3 Python/2.7.12`\r\n`< Date: Thu, 27 Apr 2017 20:30:54 GMT`\r\n`< Content-Length: 83`\r\n`< Content-Type: application/xml`\r\n`< Content-Type: application/xml`\r\n`< `\r\n` Curl_http_done: called premature == 0`\r\n` Closing connection 0`\r\n`<?xml version=\"1.0\" encoding=\"UTF-8\"?><Response><Say>Hello World</Say>`\r\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/310/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/310/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/306", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/306/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/306/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/306/events", "html_url": "https://github.com/aws/chalice/issues/306", "id": 224296704, "node_id": "MDU6SXNzdWUyMjQyOTY3MDQ=", "number": 306, "title": "\"Content-type: application/json; charset=utf-8\" causes a 415 Unsupported Media Type", "user": {"login": "budowski", "id": 1490104, "node_id": "MDQ6VXNlcjE0OTAxMDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1490104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/budowski", "html_url": "https://github.com/budowski", "followers_url": "https://api.github.com/users/budowski/followers", "following_url": "https://api.github.com/users/budowski/following{/other_user}", "gists_url": "https://api.github.com/users/budowski/gists{/gist_id}", "starred_url": "https://api.github.com/users/budowski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/budowski/subscriptions", "organizations_url": "https://api.github.com/users/budowski/orgs", "repos_url": "https://api.github.com/users/budowski/repos", "events_url": "https://api.github.com/users/budowski/events{/privacy}", "received_events_url": "https://api.github.com/users/budowski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-04-25T23:02:18Z", "updated_at": "2017-05-01T15:53:29Z", "closed_at": "2017-05-01T15:53:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Basically the default supported content_type should also support the `charset=utf-8` option (it currently doesn't, so if a client sends a `Content-type: application/json; charset=utf-8` header, the API responds with a `415 Unsupported Media Type`). This is important IMHO, since some clients (like Android's [OkHttp](https://github.com/square/okhttp/) add the `charset=utf-8` by default).\r\n\r\nSo currently the workaround is this:\r\n```python\r\n@app.route('/myRoute', methods=['POST'], content_types=['application/json; charset=utf-8', 'application/json'])\r\ndef myRoute():\r\n      pass\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/306/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/306/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/305", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/305/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/305/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/305/events", "html_url": "https://github.com/aws/chalice/issues/305", "id": 224284510, "node_id": "MDU6SXNzdWUyMjQyODQ1MTA=", "number": 305, "title": "Updating a route's URL doesn't delete old resource", "user": {"login": "budowski", "id": 1490104, "node_id": "MDQ6VXNlcjE0OTAxMDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1490104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/budowski", "html_url": "https://github.com/budowski", "followers_url": "https://api.github.com/users/budowski/followers", "following_url": "https://api.github.com/users/budowski/following{/other_user}", "gists_url": "https://api.github.com/users/budowski/gists{/gist_id}", "starred_url": "https://api.github.com/users/budowski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/budowski/subscriptions", "organizations_url": "https://api.github.com/users/budowski/orgs", "repos_url": "https://api.github.com/users/budowski/repos", "events_url": "https://api.github.com/users/budowski/events{/privacy}", "received_events_url": "https://api.github.com/users/budowski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-25T21:57:59Z", "updated_at": "2017-04-26T21:22:31Z", "closed_at": "2017-04-26T21:22:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I update a route's URL, the old resource (for the old URL) is not deleted.\r\n\r\nThis might be a hard-to-solve issue - maybe save a local cache of function/URL mapping, and when the URL changes (assuming function name stays the same), `chalice deploy` will delete the old resources.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/305/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/305/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/285", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/285/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/285/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/285/events", "html_url": "https://github.com/aws/chalice/issues/285", "id": 220180958, "node_id": "MDU6SXNzdWUyMjAxODA5NTg=", "number": 285, "title": "Custom Authorization Removed in 0.7.0", "user": {"login": "nedlowe", "id": 20235132, "node_id": "MDQ6VXNlcjIwMjM1MTMy", "avatar_url": "https://avatars.githubusercontent.com/u/20235132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedlowe", "html_url": "https://github.com/nedlowe", "followers_url": "https://api.github.com/users/nedlowe/followers", "following_url": "https://api.github.com/users/nedlowe/following{/other_user}", "gists_url": "https://api.github.com/users/nedlowe/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedlowe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedlowe/subscriptions", "organizations_url": "https://api.github.com/users/nedlowe/orgs", "repos_url": "https://api.github.com/users/nedlowe/repos", "events_url": "https://api.github.com/users/nedlowe/events{/privacy}", "received_events_url": "https://api.github.com/users/nedlowe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-04-07T10:57:20Z", "updated_at": "2017-05-04T20:10:53Z", "closed_at": "2017-05-04T20:10:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI see that authorization_type and authorizer_id have been removed, and a new example using Cognito User Pools added instead... But what about if we are using a custom lambda for authorisation?\r\n\r\nI just upgraded Chalice and see the change (chalice deploy fails), and I don't seem to be able to see the replacement approach for custom lambdas?\r\n\r\nThanks,\r\nNed", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/285/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/285/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/263", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/263/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/263/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/263/events", "html_url": "https://github.com/aws/chalice/issues/263", "id": 217628312, "node_id": "MDU6SXNzdWUyMTc2MjgzMTI=", "number": 263, "title": "Analyzer throws exception when analyzing list comprehension as argument", "user": {"login": "gene1wood", "id": 1134034, "node_id": "MDQ6VXNlcjExMzQwMzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1134034?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gene1wood", "html_url": "https://github.com/gene1wood", "followers_url": "https://api.github.com/users/gene1wood/followers", "following_url": "https://api.github.com/users/gene1wood/following{/other_user}", "gists_url": "https://api.github.com/users/gene1wood/gists{/gist_id}", "starred_url": "https://api.github.com/users/gene1wood/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gene1wood/subscriptions", "organizations_url": "https://api.github.com/users/gene1wood/orgs", "repos_url": "https://api.github.com/users/gene1wood/repos", "events_url": "https://api.github.com/users/gene1wood/events{/privacy}", "received_events_url": "https://api.github.com/users/gene1wood/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-28T17:04:09Z", "updated_at": "2017-06-26T23:15:38Z", "closed_at": "2017-06-26T23:15:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The analyzer has difficulty with code like this\r\n\r\n```\r\nx = ''.join('a' for y in [1,2,3])\r\n```\r\n\r\nFor example in an app like this\r\n\r\n```\r\nfrom chalice import Chalice, Response\r\n\r\napp = Chalice(app_name='example')\r\n\r\n@app.route('/')\r\ndef index():\r\n    body = '<h1>test</h1>'\r\n    x = ''.join('a' for y in [1,2,3])\r\n    return Response(body=body,\r\n                    status_code=200,\r\n                    headers={'Content-Type': 'text/html'})\r\n```\r\n\r\n# Expected Results\r\n\r\n`chalice gen-policy` or `chalice deploy` should generate a policy or deploy the app\r\n\r\n# Actual Results\r\n\r\n```\r\n$ chalice gen-policy\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/chalice\", line 11, in <module>\r\n    load_entry_point('chalice==0.6.0', 'console_scripts', 'chalice')()\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/cli/__init__.py\", line 298, in main\r\n    return cli(obj={})\r\n  File \"/usr/local/lib/python2.7/dist-packages/click/core.py\", line 716, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/click/core.py\", line 696, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/local/lib/python2.7/dist-packages/click/core.py\", line 1060, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/local/lib/python2.7/dist-packages/click/core.py\", line 889, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/local/lib/python2.7/dist-packages/click/core.py\", line 534, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/cli/__init__.py\", line 214, in gen_policy\r\n    generated = policy.policy_from_source_code(contents)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/policy.py\", line 20, in policy_from_source_code\r\n    client_calls = get_client_calls_for_app(source_code)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/analyzer.py\", line 74, in get_client_calls_for_app\r\n    binder = t.bind_types()\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/analyzer.py\", line 331, in bind_types\r\n    self.visit(self._current_ast_namespace)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/analyzer.py\", line 540, in visit\r\n    return ast.NodeVisitor.visit(self, node)\r\n  File \"/usr/lib/python2.7/ast.py\", line 241, in visit\r\n    return visitor(node)\r\n  File \"/usr/lib/python2.7/ast.py\", line 249, in generic_visit\r\n    self.visit(item)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/analyzer.py\", line 540, in visit\r\n    return ast.NodeVisitor.visit(self, node)\r\n  File \"/usr/lib/python2.7/ast.py\", line 241, in visit\r\n    return visitor(node)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/analyzer.py\", line 390, in visit_Assign\r\n    self.generic_visit(node)\r\n  File \"/usr/lib/python2.7/ast.py\", line 251, in generic_visit\r\n    self.visit(value)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/analyzer.py\", line 540, in visit\r\n    return ast.NodeVisitor.visit(self, node)\r\n  File \"/usr/lib/python2.7/ast.py\", line 241, in visit\r\n    return visitor(node)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/analyzer.py\", line 424, in visit_Call\r\n    self.generic_visit(node)\r\n  File \"/usr/lib/python2.7/ast.py\", line 249, in generic_visit\r\n    self.visit(item)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/analyzer.py\", line 540, in visit\r\n    return ast.NodeVisitor.visit(self, node)\r\n  File \"/usr/lib/python2.7/ast.py\", line 241, in visit\r\n    return visitor(node)\r\n  File \"/usr/lib/python2.7/ast.py\", line 249, in generic_visit\r\n    self.visit(item)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/analyzer.py\", line 540, in visit\r\n    return ast.NodeVisitor.visit(self, node)\r\n  File \"/usr/lib/python2.7/ast.py\", line 241, in visit\r\n    return visitor(node)\r\n  File \"/usr/lib/python2.7/ast.py\", line 251, in generic_visit\r\n    self.visit(value)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/analyzer.py\", line 540, in visit\r\n    return ast.NodeVisitor.visit(self, node)\r\n  File \"/usr/lib/python2.7/ast.py\", line 241, in visit\r\n    return visitor(node)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/analyzer.py\", line 381, in visit_Name\r\n    self._symbol_table.get_inferred_type(node.id)\r\n  File \"/usr/local/lib/python2.7/dist-packages/chalice/analyzer.py\", line 241, in get_inferred_type\r\n    symbol = self._local_table.lookup(name)\r\n  File \"/usr/lib/python2.7/symtable.py\", line 100, in lookup\r\n    flags = self._table.symbols[name]\r\nKeyError: 'y'\r\n```", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/263/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/262", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/262/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/262/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/262/events", "html_url": "https://github.com/aws/chalice/issues/262", "id": 217394143, "node_id": "MDU6SXNzdWUyMTczOTQxNDM=", "number": 262, "title": "Passing a unicode type body to Response causes body to be json encoded", "user": {"login": "gene1wood", "id": 1134034, "node_id": "MDQ6VXNlcjExMzQwMzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1134034?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gene1wood", "html_url": "https://github.com/gene1wood", "followers_url": "https://api.github.com/users/gene1wood/followers", "following_url": "https://api.github.com/users/gene1wood/following{/other_user}", "gists_url": "https://api.github.com/users/gene1wood/gists{/gist_id}", "starred_url": "https://api.github.com/users/gene1wood/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gene1wood/subscriptions", "organizations_url": "https://api.github.com/users/gene1wood/orgs", "repos_url": "https://api.github.com/users/gene1wood/repos", "events_url": "https://api.github.com/users/gene1wood/events{/privacy}", "received_events_url": "https://api.github.com/users/gene1wood/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-27T22:29:56Z", "updated_at": "2017-07-04T21:01:07Z", "closed_at": "2017-07-04T21:01:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/awslabs/chalice/blob/a8d68083e8e76f096307cdd992686b658e39f1a2/chalice/app.py#L144-L145\r\n\r\nIf you pass a unicode typed body variable to the Response object it json encodes the value.\r\n\r\n# Steps to reproduce\r\n\r\n```\r\nfrom chalice import Chalice, Response\r\n\r\napp = Chalice(app_name='example')\r\n\r\n@app.route('/')\r\ndef index():\r\n    body = u'<h1>test</h1>'\r\n    return Response(body=body,\r\n                    status_code=200,\r\n                    headers={'Content-Type': 'text/html'})\r\n```\r\n\r\n# Expected results\r\n\r\n```\r\n<h1>test</h1>\r\n```\r\n\r\n# Actual results\r\n\r\n```\r\n\"<h1>test</h1>\"\r\n```\r\n\r\n# Suggested change\r\n\r\nIt would make sense to check for `str` or `unicode` strings [here](https://github.com/awslabs/chalice/blob/a8d68083e8e76f096307cdd992686b658e39f1a2/chalice/app.py#L144-L145)", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/262/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/262/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/167", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/167/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/167/events", "html_url": "https://github.com/aws/chalice/issues/167", "id": 189030576, "node_id": "MDU6SXNzdWUxODkwMzA1NzY=", "number": 167, "title": "Support PATCH and DELETE HTTP Methods", "user": {"login": "jbarratt", "id": 113915, "node_id": "MDQ6VXNlcjExMzkxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/113915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbarratt", "html_url": "https://github.com/jbarratt", "followers_url": "https://api.github.com/users/jbarratt/followers", "following_url": "https://api.github.com/users/jbarratt/following{/other_user}", "gists_url": "https://api.github.com/users/jbarratt/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbarratt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbarratt/subscriptions", "organizations_url": "https://api.github.com/users/jbarratt/orgs", "repos_url": "https://api.github.com/users/jbarratt/repos", "events_url": "https://api.github.com/users/jbarratt/events{/privacy}", "received_events_url": "https://api.github.com/users/jbarratt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-11-14T05:16:11Z", "updated_at": "2016-11-15T23:25:45Z", "closed_at": "2016-11-15T23:25:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I could certainly be missing something, but it doesn't look like PATCH and DELETE methods are supported. They are supported by API Gateway, so it seems reasonable that chalice could have support for them too.\r\n\r\nThese methods are key for many common RESTful API patterns, which chalice seems ideal for creating.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/167/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/167/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/163", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/163/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/163/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/163/events", "html_url": "https://github.com/aws/chalice/issues/163", "id": 188624329, "node_id": "MDU6SXNzdWUxODg2MjQzMjk=", "number": 163, "title": "requests parameters not available in SDKs or cache keys", "user": {"login": "jamesls", "id": 368057, "node_id": "MDQ6VXNlcjM2ODA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/368057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesls", "html_url": "https://github.com/jamesls", "followers_url": "https://api.github.com/users/jamesls/followers", "following_url": "https://api.github.com/users/jamesls/following{/other_user}", "gists_url": "https://api.github.com/users/jamesls/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesls/subscriptions", "organizations_url": "https://api.github.com/users/jamesls/orgs", "repos_url": "https://api.github.com/users/jamesls/repos", "events_url": "https://api.github.com/users/jamesls/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesls/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-11-10T21:34:11Z", "updated_at": "2016-11-10T21:56:06Z", "closed_at": "2016-11-10T21:56:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Consider this route:\r\n\r\n```python\r\n@app.route('/users/{user}')\r\ndef users(): pass\r\n```\r\n\r\nWhen we create the method request, we're not actually specifying the \"user\" value as a requestParameter.\r\n\r\nThe API will still work as expected, however, there's a few features that can't be leveraged unless we specify them including:\r\n\r\n* The generated javascript SDK won't include the \"user\" as a parameter.  Instead it will render a path for `/users`.\r\n* The \"user\" parameter isn't available as part of the cache key when caching is enabled.\r\n\r\nNeither of these matter yet for chalice because these features aren't exposed, but I'd like to add support for these so I'll need to get this updated.", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/163/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/163/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/135", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/135/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/135/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/135/events", "html_url": "https://github.com/aws/chalice/issues/135", "id": 182413139, "node_id": "MDU6SXNzdWUxODI0MTMxMzk=", "number": 135, "title": "KeyError: 'key'", "user": {"login": "fidiego", "id": 2704860, "node_id": "MDQ6VXNlcjI3MDQ4NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/2704860?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fidiego", "html_url": "https://github.com/fidiego", "followers_url": "https://api.github.com/users/fidiego/followers", "following_url": "https://api.github.com/users/fidiego/following{/other_user}", "gists_url": "https://api.github.com/users/fidiego/gists{/gist_id}", "starred_url": "https://api.github.com/users/fidiego/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fidiego/subscriptions", "organizations_url": "https://api.github.com/users/fidiego/orgs", "repos_url": "https://api.github.com/users/fidiego/repos", "events_url": "https://api.github.com/users/fidiego/events{/privacy}", "received_events_url": "https://api.github.com/users/fidiego/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-10-12T01:26:39Z", "updated_at": "2016-10-13T01:05:45Z", "closed_at": "2016-10-13T01:05:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I deployed several times with success, but at some point I started seeing the following error on `chalice deploy --profile <profile>`\n\n```\nUpdating IAM policy.\nError: Error when deploying: 'key'\n```\n\nI narrowed down the issue to `chalice gen-key`\n\n```\n% chalice gen-policy --filename app.py                                                                                              ~/code/immigrant-defense-project/map-demo/backend\nTraceback (most recent call last):\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/bin/chalice\", line 11, in <module>\n    sys.exit(main())\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/cli/__init__.py\", line 236, in main\n    return cli(obj={})\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/click/core.py\", line 716, in __call__\n    return self.main(*args, **kwargs)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/click/core.py\", line 696, in main\n    rv = self.invoke(ctx)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/click/core.py\", line 1060, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/click/core.py\", line 889, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/click/core.py\", line 534, in invoke\n    return callback(*args, **kwargs)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\n    return f(get_current_context(), *args, **kwargs)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/cli/__init__.py\", line 200, in gen_policy\n    generated = policy.policy_from_source_code(contents)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/policy.py\", line 20, in policy_from_source_code\n    client_calls = get_client_calls_for_app(source_code)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 67, in get_client_calls_for_app\n    t.bind_types(parsed)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 283, in bind_types\n    self.visit(parsed_code.parsed_ast)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 437, in visit\n    return ast.NodeVisitor.visit(self, node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 241, in visit\n    return visitor(node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 249, in generic_visit\n    self.visit(item)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 437, in visit\n    return ast.NodeVisitor.visit(self, node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 241, in visit\n    return visitor(node)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 314, in visit_Assign\n    self.generic_visit(node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 251, in generic_visit\n    self.visit(value)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 437, in visit\n    return ast.NodeVisitor.visit(self, node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 241, in visit\n    return visitor(node)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 369, in visit_Call\n    self._infer_function_call(node)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 395, in _infer_function_call\n    child_infer.bind_types(ParsedCode(ast_node, sub_table))\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 283, in bind_types\n    self.visit(parsed_code.parsed_ast)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 437, in visit\n    return ast.NodeVisitor.visit(self, node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 241, in visit\n    return visitor(node)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 417, in visit_FunctionDef\n    self.visit(child)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 437, in visit\n    return ast.NodeVisitor.visit(self, node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 241, in visit\n    return visitor(node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 249, in generic_visit\n    self.visit(item)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 437, in visit\n    return ast.NodeVisitor.visit(self, node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 241, in visit\n    return visitor(node)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 314, in visit_Assign\n    self.generic_visit(node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 251, in generic_visit\n    self.visit(value)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 437, in visit\n    return ast.NodeVisitor.visit(self, node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 241, in visit\n    return visitor(node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 251, in generic_visit\n    self.visit(value)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 437, in visit\n    return ast.NodeVisitor.visit(self, node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 241, in visit\n    return visitor(node)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 341, in visit_Call\n    self.generic_visit(node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 251, in generic_visit\n    self.visit(value)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 437, in visit\n    return ast.NodeVisitor.visit(self, node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 241, in visit\n    return visitor(node)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 327, in visit_Attribute\n    self.generic_visit(node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 251, in generic_visit\n    self.visit(value)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 437, in visit\n    return ast.NodeVisitor.visit(self, node)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py\", line 241, in visit\n    return visitor(node)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 307, in visit_Name\n    node.inferred_type = self._symbol_table.get_inferred_type(node.id)\n  File \"/Users/fidiego/.virtualenvs/map-demo-backend/lib/python2.7/site-packages/chalice/analyzer.py\", line 214, in get_inferred_type\n    symbol = self._local_table.lookup(name)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/symtable.py\", line 100, in lookup\n    flags = self._table.symbols[name]\nKeyError: 'key'\n```\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/135/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/135/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/131", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/131/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/131/events", "html_url": "https://github.com/aws/chalice/issues/131", "id": 181522746, "node_id": "MDU6SXNzdWUxODE1MjI3NDY=", "number": 131, "title": "Chalice doesn't support dict comps", "user": {"login": "RogerThomas", "id": 3211163, "node_id": "MDQ6VXNlcjMyMTExNjM=", "avatar_url": "https://avatars.githubusercontent.com/u/3211163?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RogerThomas", "html_url": "https://github.com/RogerThomas", "followers_url": "https://api.github.com/users/RogerThomas/followers", "following_url": "https://api.github.com/users/RogerThomas/following{/other_user}", "gists_url": "https://api.github.com/users/RogerThomas/gists{/gist_id}", "starred_url": "https://api.github.com/users/RogerThomas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RogerThomas/subscriptions", "organizations_url": "https://api.github.com/users/RogerThomas/orgs", "repos_url": "https://api.github.com/users/RogerThomas/repos", "events_url": "https://api.github.com/users/RogerThomas/events{/privacy}", "received_events_url": "https://api.github.com/users/RogerThomas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-10-06T20:53:35Z", "updated_at": "2016-10-13T16:22:37Z", "closed_at": "2016-10-13T16:22:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dict comps break `chalice deploy` with awfull error messagas\n\ne.g. this anywhere in the code will cause `chalice deploy` to fail\n\n``` python\nd = {k: v for k, v in [(1, 2), (3, 4)]}\n```\n\nI know dict  comp's were only introduced in 2.7, but I thought chalice was 2.7>\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/131/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/113", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/113/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/113/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/113/events", "html_url": "https://github.com/aws/chalice/issues/113", "id": 174189834, "node_id": "MDU6SXNzdWUxNzQxODk4MzQ=", "number": 113, "title": "Any exceptions result in ChaliceViewError", "user": {"login": "theemadnes", "id": 923796, "node_id": "MDQ6VXNlcjkyMzc5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/923796?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theemadnes", "html_url": "https://github.com/theemadnes", "followers_url": "https://api.github.com/users/theemadnes/followers", "following_url": "https://api.github.com/users/theemadnes/following{/other_user}", "gists_url": "https://api.github.com/users/theemadnes/gists{/gist_id}", "starred_url": "https://api.github.com/users/theemadnes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theemadnes/subscriptions", "organizations_url": "https://api.github.com/users/theemadnes/orgs", "repos_url": "https://api.github.com/users/theemadnes/repos", "events_url": "https://api.github.com/users/theemadnes/events{/privacy}", "received_events_url": "https://api.github.com/users/theemadnes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-08-31T05:48:05Z", "updated_at": "2016-09-01T00:32:08Z", "closed_at": "2016-09-01T00:32:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Trying to test BadRequestError via the following code:\n\n```\nfrom chalice import Chalice\nfrom chalice import NotFoundError, BadRequestError\nimport time\nimport random\n\napp = Chalice(app_name='demoChalice')\n\n\n@app.route('/')\ndef index():\n\n    raise BadRequestError(\"error message\")\n\n    return {'hello': 'world'}`\n```\n\nI would expect to receive a 400 error, but all I get is:\n\n`{\"Code\": \"ChaliceViewError\",\"Message\": \"ChaliceViewError: An internal server error occurred.\"}`\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/113/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/113/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/99", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/99/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/99/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/99/events", "html_url": "https://github.com/aws/chalice/issues/99", "id": 170753888, "node_id": "MDU6SXNzdWUxNzA3NTM4ODg=", "number": 99, "title": "chalice logs don't use the profile seted", "user": {"login": "molleda", "id": 4965197, "node_id": "MDQ6VXNlcjQ5NjUxOTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4965197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molleda", "html_url": "https://github.com/molleda", "followers_url": "https://api.github.com/users/molleda/followers", "following_url": "https://api.github.com/users/molleda/following{/other_user}", "gists_url": "https://api.github.com/users/molleda/gists{/gist_id}", "starred_url": "https://api.github.com/users/molleda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molleda/subscriptions", "organizations_url": "https://api.github.com/users/molleda/orgs", "repos_url": "https://api.github.com/users/molleda/repos", "events_url": "https://api.github.com/users/molleda/events{/privacy}", "received_events_url": "https://api.github.com/users/molleda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-08-11T21:39:18Z", "updated_at": "2016-08-11T22:31:18Z", "closed_at": "2016-08-11T22:31:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have some profiles in my laptop, for chalice I use one specific profile and this is setted in the .chalice/config.json but when I use chalice logs I can see a error like this:\n\n``` python\n(chalice-accounts)user@Jugger ~/git/chalice/chalice-demo (master) $ chalice logs\nTraceback (most recent call last):\n  File \"/Users/user/virtualenvs/chalice-demo/bin/chalice\", line 11, in <module>\n    sys.exit(main())\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/chalice/cli/__init__.py\", line 223, in main\n    return cli(obj={})\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/click/core.py\", line 716, in __call__\n    return self.main(*args, **kwargs)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/click/core.py\", line 696, in main\n    rv = self.invoke(ctx)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/click/core.py\", line 1060, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/click/core.py\", line 889, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/click/core.py\", line 534, in invoke\n    return callback(*args, **kwargs)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\n    return f(get_current_context(), *args, **kwargs)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/chalice/cli/__init__.py\", line 170, in logs\n    show_lambda_logs(ctx.obj, num_entries, include_lambda_messages)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/chalice/cli/__init__.py\", line 60, in show_lambda_logs\n    for event in events:\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/chalice/logs.py\", line 79, in retrieve_logs\n    interleaved=True):\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore/paginate.py\", line 102, in __iter__\n    response = self._make_request(current_kwargs)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore/paginate.py\", line 174, in _make_request\n    return self._method(**current_kwargs)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore/client.py\", line 278, in _api_call\n    return self._make_api_call(operation_name, kwargs)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore/client.py\", line 561, in _make_api_call\n    operation_model, request_dict)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore/endpoint.py\", line 117, in make_request\n    return self._send_request(request_dict, operation_model)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore/endpoint.py\", line 142, in _send_request\n    request = self.create_request(request_dict, operation_model)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore/endpoint.py\", line 126, in create_request\n    operation_name=operation_model.name)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore/hooks.py\", line 227, in emit\n    return self._emit(event_name, kwargs)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore/hooks.py\", line 210, in _emit\n    response = handler(**kwargs)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore/signers.py\", line 90, in handler\n    return self.sign(operation_name, request)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore/signers.py\", line 147, in sign\n    auth.add_auth(request)\n  File \"/Users/user/virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore/auth.py\", line 314, in add_auth\n    raise NoCredentialsError\nbotocore.exceptions.NoCredentialsError: Unable to locate credentials\n```\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/99/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/99/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/74", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/74/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/74/events", "html_url": "https://github.com/aws/chalice/issues/74", "id": 168433673, "node_id": "MDU6SXNzdWUxNjg0MzM2NzM=", "number": 74, "title": "KeyError: 'lambdaname' on chalice deploy when using a Python lambda", "user": {"login": "canozmen", "id": 661933, "node_id": "MDQ6VXNlcjY2MTkzMw==", "avatar_url": "https://avatars.githubusercontent.com/u/661933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/canozmen", "html_url": "https://github.com/canozmen", "followers_url": "https://api.github.com/users/canozmen/followers", "following_url": "https://api.github.com/users/canozmen/following{/other_user}", "gists_url": "https://api.github.com/users/canozmen/gists{/gist_id}", "starred_url": "https://api.github.com/users/canozmen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/canozmen/subscriptions", "organizations_url": "https://api.github.com/users/canozmen/orgs", "repos_url": "https://api.github.com/users/canozmen/repos", "events_url": "https://api.github.com/users/canozmen/events{/privacy}", "received_events_url": "https://api.github.com/users/canozmen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-07-29T23:33:19Z", "updated_at": "2016-08-01T22:56:18Z", "closed_at": "2016-08-01T22:56:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Adding the following code to app.py causes chalice deploy to fail with KeyError: 'x' where x is the name of the Python lambda. I tested the same function on a separate python file and it seems to work fine.\n\n`def fishes_by_month(month):\n    return sorted(fishes.values(), key=lambda x: x.taste_by_month[month - 1], reverse=True)`\n\nHere is the output from chalice deploy:\n\n> Updating IAM policy.\n> Traceback (most recent call last):\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/bin/chalice\", line 11, in <module>\n>     sys.exit(main())\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/cli/**init**.py\", line 203, in main\n>     return cli(obj={})\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/click/core.py\", line 716, in **call**\n>     return self.main(_args, *_kwargs)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/click/core.py\", line 696, in main\n>     rv = self.invoke(ctx)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/click/core.py\", line 1060, in invoke\n>     return _process_result(sub_ctx.command.invoke(sub_ctx))\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/click/core.py\", line 889, in invoke\n>     return ctx.invoke(self.callback, *_ctx.params)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/click/core.py\", line 534, in invoke\n>     return callback(_args, *_kwargs)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\n>     return f(get_current_context(), *args, *_kwargs)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/cli/__init__.py\", line 123, in deploy\n>     d.deploy(ctx.obj)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/deployer.py\", line 203, in deploy\n>     self._deploy_lambda(config)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/deployer.py\", line 215, in _deploy_lambda\n>     self._get_or_create_lambda_role_arn(config)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/deployer.py\", line 304, in _get_or_create_lambda_role_arn\n>     self._update_role_with_latest_policy(app_name, config)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/deployer.py\", line 313, in _update_role_with_latest_policy\n>     app_policy = self._get_policy_from_source_code(config)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/deployer.py\", line 342, in _get_policy_from_source_code\n>     app_policy = policy.policy_from_source_code(f.read())\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/policy.py\", line 20, in policy_from_source_code\n>     client_calls = get_client_calls_for_app(source_code)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 67, in get_client_calls_for_app\n>     t.bind_types(parsed)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 283, in bind_types\n>     self.visit(parsed_code.parsed_ast)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/usr/lib/python2.7/ast.py\", line 249, in generic_visit\n>     self.visit(item)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/usr/lib/python2.7/ast.py\", line 251, in generic_visit\n>     self.visit(value)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 369, in visit_Call\n>     self._infer_function_call(node)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 387, in _infer_function_call\n>     child_infer.bind_types(ParsedCode(ast_node, sub_table))\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 283, in bind_types\n>     self.visit(parsed_code.parsed_ast)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 409, in visit_FunctionDef\n>     self.visit(child)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/usr/lib/python2.7/ast.py\", line 249, in generic_visit\n>     self.visit(item)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/usr/lib/python2.7/ast.py\", line 249, in generic_visit\n>     self.visit(item)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 314, in visit_Assign\n>     self.generic_visit(node)\n>   File \"/usr/lib/python2.7/ast.py\", line 251, in generic_visit\n>     self.visit(value)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 369, in visit_Call\n>     self._infer_function_call(node)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 387, in _infer_function_call\n>     child_infer.bind_types(ParsedCode(ast_node, sub_table))\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 283, in bind_types\n>     self.visit(parsed_code.parsed_ast)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 409, in visit_FunctionDef\n>     self.visit(child)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 419, in visit_Return\n>     self.generic_visit(node)\n>   File \"/usr/lib/python2.7/ast.py\", line 251, in generic_visit\n>     self.visit(value)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 341, in visit_Call\n>     self.generic_visit(node)\n>   File \"/usr/lib/python2.7/ast.py\", line 249, in generic_visit\n>     self.visit(item)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/usr/lib/python2.7/ast.py\", line 251, in generic_visit\n>     self.visit(value)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/usr/lib/python2.7/ast.py\", line 251, in generic_visit\n>     self.visit(value)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/usr/lib/python2.7/ast.py\", line 249, in generic_visit\n>     self.visit(item)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 429, in visit\n>     return ast.NodeVisitor.visit(self, node)\n>   File \"/usr/lib/python2.7/ast.py\", line 241, in visit\n>     return visitor(node)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 307, in visit_Name\n>     node.inferred_type = self._symbol_table.get_inferred_type(node.id)\n>   File \"/home/canozmen/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/analyzer.py\", line 214, in get_inferred_type\n>     symbol = self._local_table.lookup(name)\n>   File \"/usr/lib/python2.7/symtable.py\", line 100, in lookup\n>     flags = self._table.symbols[name]\n> KeyError: 'x'\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/74/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/74/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/71", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/71/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/71/events", "html_url": "https://github.com/aws/chalice/issues/71", "id": 167694896, "node_id": "MDU6SXNzdWUxNjc2OTQ4OTY=", "number": 71, "title": "I can't deploy (but I used to be able to)", "user": {"login": "sandywater", "id": 8161860, "node_id": "MDQ6VXNlcjgxNjE4NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/8161860?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandywater", "html_url": "https://github.com/sandywater", "followers_url": "https://api.github.com/users/sandywater/followers", "following_url": "https://api.github.com/users/sandywater/following{/other_user}", "gists_url": "https://api.github.com/users/sandywater/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandywater/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandywater/subscriptions", "organizations_url": "https://api.github.com/users/sandywater/orgs", "repos_url": "https://api.github.com/users/sandywater/repos", "events_url": "https://api.github.com/users/sandywater/events{/privacy}", "received_events_url": "https://api.github.com/users/sandywater/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-07-26T19:47:40Z", "updated_at": "2017-07-06T23:55:03Z", "closed_at": "2017-07-06T23:55:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "``` bash\n$ chalice gen-policy > .chalice/policy.json\n```\n\n``` bash\n$ chalice deploy\nUpdating IAM policy.\nUpdating lambda function...\nCreating deployment package.\nSending changes to lambda.\nLambda deploy done.\nAPI Gateway rest API already found.\nDeleting root resource id\nDone deleting existing resources.\nTraceback (most recent call last):\n  File \"/Users/sandy/.virtualenvs/proj-env/bin/chalice\", line 11, in <module>\n    sys.exit(main())\n  File \"/Users/sandy/.virtualenvs/proj-env/lib/python2.7/site-packages/chalice/cli/__init__.py\", line 203, in main\n    return cli(obj={})\n  File \"/Users/sandy/.virtualenvs/proj-env/lib/python2.7/site-packages/click/core.py\", line 716, in __call__\n    return self.main(*args, **kwargs)\n  File \"/Users/sandy/.virtualenvs/proj-env/lib/python2.7/site-packages/click/core.py\", line 696, in main\n    rv = self.invoke(ctx)\n  File \"/Users/sandy/.virtualenvs/proj-env/lib/python2.7/site-packages/click/core.py\", line 1060, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/Users/sandy/.virtualenvs/proj-env/lib/python2.7/site-packages/click/core.py\", line 889, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/Users/sandy/.virtualenvs/proj-env/lib/python2.7/site-packages/click/core.py\", line 534, in invoke\n    return callback(*args, **kwargs)\n  File \"/Users/sandy/.virtualenvs/proj-env/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\n    return f(get_current_context(), *args, **kwargs)\n  File \"/Users/sandy/.virtualenvs/proj-env/lib/python2.7/site-packages/chalice/cli/__init__.py\", line 123, in deploy\n    d.deploy(ctx.obj)\n  File \"/Users/sandy/.virtualenvs/proj-env/lib/python2.7/site-packages/chalice/deployer.py\", line 204, in deploy\n    rest_api_id, region_name, stage = self._deploy_api_gateway(config)\n  File \"/Users/sandy/.virtualenvs/proj-env/lib/python2.7/site-packages/chalice/deployer.py\", line 402, in _deploy_api_gateway\n    return self._create_resources_for_api(config, rest_api_id)\n  File \"/Users/sandy/.virtualenvs/proj-env/lib/python2.7/site-packages/chalice/deployer.py\", line 458, in _create_resources_for_api\n    config['config']['lambda_arn'])\nKeyError: 'lambda_arn'\n```\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/71/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/71/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/65", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/65/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/65/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/65/events", "html_url": "https://github.com/aws/chalice/issues/65", "id": 166970754, "node_id": "MDU6SXNzdWUxNjY5NzA3NTQ=", "number": 65, "title": "Unintuitive routes", "user": {"login": "funkybob", "id": 301363, "node_id": "MDQ6VXNlcjMwMTM2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/301363?v=4", "gravatar_id": "", "url": "https://api.github.com/users/funkybob", "html_url": "https://github.com/funkybob", "followers_url": "https://api.github.com/users/funkybob/followers", "following_url": "https://api.github.com/users/funkybob/following{/other_user}", "gists_url": "https://api.github.com/users/funkybob/gists{/gist_id}", "starred_url": "https://api.github.com/users/funkybob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/funkybob/subscriptions", "organizations_url": "https://api.github.com/users/funkybob/orgs", "repos_url": "https://api.github.com/users/funkybob/repos", "events_url": "https://api.github.com/users/funkybob/events{/privacy}", "received_events_url": "https://api.github.com/users/funkybob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-07-22T05:04:42Z", "updated_at": "2016-07-28T20:58:32Z", "closed_at": "2016-07-28T20:58:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I spent a couple of evenings trying to set up a chalice with two routes, always getting the same error:\n\n```\nbotocore.exceptions.ClientError: An error occurred (BadRequestException) when calling the CreateResource operation: Resource's path part must be specified\n```\n\nAfter some trial and error, I discovered the following:\n1. The '/' route is a lie\n\nIf you ask for {hostname}/dev/ you will be rudely rejected.\nIf you ask for {hostname}/dev it will access route('/')\n1. Trailing / makes chalice cry.\n\nOriginally I had two routes:\n\n```\n    @app.route('/')\n\n    @app.route('/login/')\n```\n\nAnd got the error above.\n\nHowever, if I change the second route to `@app.route('/login')` it works.\n\nCan anyone explain this?  Or is this really a bug?\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/65/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/65/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/48", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/48/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/48/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/48/events", "html_url": "https://github.com/aws/chalice/issues/48", "id": 165585748, "node_id": "MDU6SXNzdWUxNjU1ODU3NDg=", "number": 48, "title": "An error occurred (PolicyLengthExceededException) when calling the AddPermission operation", "user": {"login": "KarlXerri", "id": 4490726, "node_id": "MDQ6VXNlcjQ0OTA3MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4490726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KarlXerri", "html_url": "https://github.com/KarlXerri", "followers_url": "https://api.github.com/users/KarlXerri/followers", "following_url": "https://api.github.com/users/KarlXerri/following{/other_user}", "gists_url": "https://api.github.com/users/KarlXerri/gists{/gist_id}", "starred_url": "https://api.github.com/users/KarlXerri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KarlXerri/subscriptions", "organizations_url": "https://api.github.com/users/KarlXerri/orgs", "repos_url": "https://api.github.com/users/KarlXerri/repos", "events_url": "https://api.github.com/users/KarlXerri/events{/privacy}", "received_events_url": "https://api.github.com/users/KarlXerri/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-07-14T15:11:56Z", "updated_at": "2018-08-21T02:54:28Z", "closed_at": "2016-10-12T22:09:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "The Policy was not being correctly autogenerated as it did not include DynamoDB permissions, so I added lines manually to .chalice/policy.json, and build using \"chalice deploy --no-autogen-policy\".\n\nThis has been working just fine for the last day, however when deploying now, I'm getting the following error:\n\n**botocore.exceptions.ClientError: An error occurred (PolicyLengthExceededException) when calling the AddPermission operation: The final policy size (20789) is bigger than the limit (20480).**\n\nNothing has changed in policy.json, and the deploy command was correctly working an hour ago.\n\nI've tried slimming down .chalice/policy.json, but still getting the same error and the same size report (20789).\n\nI've tried deleting the Role from AWS and redeploying.  I then get my .chalice/policy.json shown to me and asked if I want to use it, and I select \"y\".  The same error is presented.\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/48/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/48/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/33", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/33/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/33/events", "html_url": "https://github.com/aws/chalice/issues/33", "id": 165113960, "node_id": "MDU6SXNzdWUxNjUxMTM5NjA=", "number": 33, "title": "\"OSError: [Errno 2] No such file or directory\" while running \"chalice deploy\"", "user": {"login": "AlexOugh", "id": 35925, "node_id": "MDQ6VXNlcjM1OTI1", "avatar_url": "https://avatars.githubusercontent.com/u/35925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexOugh", "html_url": "https://github.com/AlexOugh", "followers_url": "https://api.github.com/users/AlexOugh/followers", "following_url": "https://api.github.com/users/AlexOugh/following{/other_user}", "gists_url": "https://api.github.com/users/AlexOugh/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexOugh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexOugh/subscriptions", "organizations_url": "https://api.github.com/users/AlexOugh/orgs", "repos_url": "https://api.github.com/users/AlexOugh/repos", "events_url": "https://api.github.com/users/AlexOugh/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexOugh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-07-12T15:46:38Z", "updated_at": "2016-07-22T20:35:53Z", "closed_at": "2016-07-13T01:15:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "It looks like it failed to deploy a lambda function after creating an IAM role successfully.\n\n$ chalice deploy\nInitial creation of lambda function.\nCreating role\nCreating deployment package.\nTraceback (most recent call last):\n  File \"/usr/local/bin/chalice\", line 11, in <module>\n    sys.exit(main())\n  File \"/Library/Python/2.7/site-packages/chalice/cli/**init**.py\", line 203, in main\n    return cli(obj={})\n  File \"/Library/Python/2.7/site-packages/click/core.py\", line 716, in **call**\n    return self.main(_args, *_kwargs)\n  File \"/Library/Python/2.7/site-packages/click/core.py\", line 696, in main\n    rv = self.invoke(ctx)\n  File \"/Library/Python/2.7/site-packages/click/core.py\", line 1060, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/Library/Python/2.7/site-packages/click/core.py\", line 889, in invoke\n    return ctx.invoke(self.callback, *_ctx.params)\n  File \"/Library/Python/2.7/site-packages/click/core.py\", line 534, in invoke\n    return callback(_args, *_kwargs)\n  File \"/Library/Python/2.7/site-packages/click/decorators.py\", line 17, in new_func\n    return f(get_current_context(), *args, *_kwargs)\n  File \"/Library/Python/2.7/site-packages/chalice/cli/__init__.py\", line 123, in deploy\n    d.deploy(ctx.obj)\n  File \"/Library/Python/2.7/site-packages/chalice/deployer.py\", line 203, in deploy\n    self._deploy_lambda(config)\n  File \"/Library/Python/2.7/site-packages/chalice/deployer.py\", line 218, in _deploy_lambda\n    function_arn = self._first_time_lambda_create(config)\n  File \"/Library/Python/2.7/site-packages/chalice/deployer.py\", line 261, in _first_time_lambda_create\n    config['project_dir'])\n  File \"/Library/Python/2.7/site-packages/chalice/deployer.py\", line 630, in create_deployment_package\n    self._verify_has_virtualenv()\n  File \"/Library/Python/2.7/site-packages/chalice/deployer.py\", line 617, in _verify_has_virtualenv\n    subprocess.check_output(['virtualenv', '--version'])\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py\", line 566, in check_output\n    process = Popen(stdout=PIPE, _popenargs, *_kwargs)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py\", line 710, in __init__\n    errread, errwrite)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py\", line 1335, in _execute_child\n    raise child_exception\nOSError: [Errno 2] No such file or directory\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/33/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/33/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/31", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/31/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/31/events", "html_url": "https://github.com/aws/chalice/issues/31", "id": 165084096, "node_id": "MDU6SXNzdWUxNjUwODQwOTY=", "number": 31, "title": "running deploy on Windows raises \"assert os.path.isfile(pip_exe)\"", "user": {"login": "rupello", "id": 231545, "node_id": "MDQ6VXNlcjIzMTU0NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/231545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rupello", "html_url": "https://github.com/rupello", "followers_url": "https://api.github.com/users/rupello/followers", "following_url": "https://api.github.com/users/rupello/following{/other_user}", "gists_url": "https://api.github.com/users/rupello/gists{/gist_id}", "starred_url": "https://api.github.com/users/rupello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rupello/subscriptions", "organizations_url": "https://api.github.com/users/rupello/orgs", "repos_url": "https://api.github.com/users/rupello/repos", "events_url": "https://api.github.com/users/rupello/events{/privacy}", "received_events_url": "https://api.github.com/users/rupello/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-07-12T13:45:10Z", "updated_at": "2016-09-21T22:28:40Z", "closed_at": "2016-09-21T22:28:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm following the tutorial instructions and getting the error below:\n\n> chalice deploy  \n> Initial creation of lambda function.  \n> Updating IAM policy.  \n> Creating deployment package.  \n> Traceback (most recent call last):  \n>   File \"C:\\Python27\\Lib\\runpy.py\", line 162, in _run_module_as_main  \n>     \"__main__\", fname, loader, pkg_name)  \n>   File \"C:\\Python27\\Lib\\runpy.py\", line 72, in _run_code  \n>     exec code in run_globals  \n>   File \"C:\\Users\\rlloyd\\venvs\\chalice-demo\\Scripts\\chalice.exe__main__.py\", line 9, in <module>                            \n\n...snipped...\n\n_first_time_lambda_create  \n    config['project_dir'])  \n  File \"c:\\users\\rlloyd\\venvs\\chalice-demo\\lib\\site-packages\\chalice\\deployer.py\", line 633, in create_deployment_package  \n    assert os.path.isfile(pip_exe)  \nAssertionError                                                                                                              \n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/31/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/31/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/29", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/29/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/29/events", "html_url": "https://github.com/aws/chalice/issues/29", "id": 165007070, "node_id": "MDU6SXNzdWUxNjUwMDcwNzA=", "number": 29, "title": "Demo deploy fails with KeyError: 'Statement'", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-07-12T06:58:40Z", "updated_at": "2016-12-29T21:07:58Z", "closed_at": "2016-12-29T21:07:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "On a mac running 10.11.5 or an AWS Linux machine created today, deploying the demo from a fresh install of chalice generates an exception:\n\n```\npip install virtualenv\nvirtualenv ~/.virtualenvs/chalice-demo\nsource ~/.virtualenvs/chalice-demo/bin/activate\npip install chalice\nchalice new-project helloworld\ncd helloworld\nchalice deploy\n->\n\nInitial creation of lambda function.\nUpdating IAM policy.\nTraceback (most recent call last):\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/bin/chalice\", line 9, in <module>\n    load_entry_point('chalice==0.0.1', 'console_scripts', 'chalice')()\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/cli/__init__.py\", line 203, in main\n    return cli(obj={})\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/click/core.py\", line 716, in __call__\n    return self.main(*args, **kwargs)\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/click/core.py\", line 696, in main\n    rv = self.invoke(ctx)\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/click/core.py\", line 1060, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/click/core.py\", line 889, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/click/core.py\", line 534, in invoke\n    return callback(*args, **kwargs)\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\n    return f(get_current_context(), *args, **kwargs)\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/cli/__init__.py\", line 123, in deploy\n    d.deploy(ctx.obj)\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/deployer.py\", line 203, in deploy\n    self._deploy_lambda(config)\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/deployer.py\", line 218, in _deploy_lambda\n    function_arn = self._first_time_lambda_create(config)\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/deployer.py\", line 259, in _first_time_lambda_create\n    role_arn = self._get_or_create_lambda_role_arn(config)\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/deployer.py\", line 304, in _get_or_create_lambda_role_arn\n    self._update_role_with_latest_policy(app_name, config)\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/deployer.py\", line 315, in _update_role_with_latest_policy\n    diff = policy.diff_policies(previous, app_policy)\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/policy.py\", line 38, in diff_policies\n    old = _create_simple_format(old)\n  File \"/home/ec2-user/.virtualenvs/chalice-demo/local/lib/python2.7/site-packages/chalice/policy.py\", line 53, in _create_simple_format\n    for statement in policy['Statement']:\nKeyError: 'Statement'\n\n```\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/29/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/29/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/15", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/15/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/15/events", "html_url": "https://github.com/aws/chalice/issues/15", "id": 162729726, "node_id": "MDU6SXNzdWUxNjI3Mjk3MjY=", "number": 15, "title": "Policy role mngt", "user": {"login": "adhorn", "id": 900174, "node_id": "MDQ6VXNlcjkwMDE3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/900174?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adhorn", "html_url": "https://github.com/adhorn", "followers_url": "https://api.github.com/users/adhorn/followers", "following_url": "https://api.github.com/users/adhorn/following{/other_user}", "gists_url": "https://api.github.com/users/adhorn/gists{/gist_id}", "starred_url": "https://api.github.com/users/adhorn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adhorn/subscriptions", "organizations_url": "https://api.github.com/users/adhorn/orgs", "repos_url": "https://api.github.com/users/adhorn/repos", "events_url": "https://api.github.com/users/adhorn/events{/privacy}", "received_events_url": "https://api.github.com/users/adhorn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-06-28T16:30:27Z", "updated_at": "2017-07-11T12:27:43Z", "closed_at": "2017-07-11T12:27:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "I run into a lost state of the IAM role for helloworld demo, the only way I managed to get out was to log into the console and delete the existing  helloworld role in IAM. \n\n```\n(chalice-demo) \u279c  helloworld git:(master) \u2717 chalice deploy\nUpdating IAM policy.\nTraceback (most recent call last):\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/bin/chalice\", line 9, in <module>\n    load_entry_point('chalice==0.0.1', 'console_scripts', 'chalice')()\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/chalice-0.0.1-py2.7.egg/chalice/cli/__init__.py\", line 161, in main\n    return cli(obj={})\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/click-6.2-py2.7.egg/click/core.py\", line 716, in __call__\n    return self.main(*args, **kwargs)\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/click-6.2-py2.7.egg/click/core.py\", line 696, in main\n    rv = self.invoke(ctx)\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/click-6.2-py2.7.egg/click/core.py\", line 1060, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/click-6.2-py2.7.egg/click/core.py\", line 889, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/click-6.2-py2.7.egg/click/core.py\", line 534, in invoke\n    return callback(*args, **kwargs)\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/click-6.2-py2.7.egg/click/decorators.py\", line 17, in new_func\n    return f(get_current_context(), *args, **kwargs)\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/chalice-0.0.1-py2.7.egg/chalice/cli/__init__.py\", line 104, in deploy\n    d.deploy(ctx.obj)\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/chalice-0.0.1-py2.7.egg/chalice/deployer.py\", line 189, in deploy\n    self._deploy_lambda(config)\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/chalice-0.0.1-py2.7.egg/chalice/deployer.py\", line 205, in _deploy_lambda\n    self._get_or_create_lambda_role_arn(config)\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/chalice-0.0.1-py2.7.egg/chalice/deployer.py\", line 294, in _get_or_create_lambda_role_arn\n    self._update_role_with_latest_policy(app_name, config)\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/chalice-0.0.1-py2.7.egg/chalice/deployer.py\", line 310, in _update_role_with_latest_policy\n    PolicyName=app_name)\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore-1.4.30-py2.7.egg/botocore/client.py\", line 278, in _api_call\n    return self._make_api_call(operation_name, kwargs)\n  File \"/Users/adhorn/.virtualenvs/chalice-demo/lib/python2.7/site-packages/botocore-1.4.30-py2.7.egg/botocore/client.py\", line 572, in _make_api_call\n    raise ClientError(parsed_response, operation_name)\nbotocore.exceptions.ClientError: An error occurred (NoSuchEntity) when calling the DeleteRolePolicy operation: The role policy with name helloworld cannot be found.\n```\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/15/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/15/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/9", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/9/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/9/events", "html_url": "https://github.com/aws/chalice/issues/9", "id": 162464506, "node_id": "MDU6SXNzdWUxNjI0NjQ1MDY=", "number": 9, "title": "missing dependency for boto3", "user": {"login": "garnaat", "id": 2056, "node_id": "MDQ6VXNlcjIwNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/2056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garnaat", "html_url": "https://github.com/garnaat", "followers_url": "https://api.github.com/users/garnaat/followers", "following_url": "https://api.github.com/users/garnaat/following{/other_user}", "gists_url": "https://api.github.com/users/garnaat/gists{/gist_id}", "starred_url": "https://api.github.com/users/garnaat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garnaat/subscriptions", "organizations_url": "https://api.github.com/users/garnaat/orgs", "repos_url": "https://api.github.com/users/garnaat/repos", "events_url": "https://api.github.com/users/garnaat/events{/privacy}", "received_events_url": "https://api.github.com/users/garnaat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-06-27T14:24:29Z", "updated_at": "2016-07-07T21:27:54Z", "closed_at": "2016-07-07T21:27:54Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```\n(chalice) f45c89912ceb:foobar garnaat$ chalice logs\nTraceback (most recent call last):\n  File \"/Users/garnaat/projects/chalice/bin/chalice\", line 9, in <module>\n    load_entry_point('chalice', 'console_scripts', 'chalice')()\n  File \"/Users/garnaat/projects/chalice/chalice/chalice/cli/__init__.py\", line 161, in main\n    return cli(obj={})\n  File \"/Users/garnaat/projects/chalice/lib/python2.7/site-packages/click-6.2-py2.7.egg/click/core.py\", line 716, in __call__\n    return self.main(*args, **kwargs)\n  File \"/Users/garnaat/projects/chalice/lib/python2.7/site-packages/click-6.2-py2.7.egg/click/core.py\", line 696, in main\n    rv = self.invoke(ctx)\n  File \"/Users/garnaat/projects/chalice/lib/python2.7/site-packages/click-6.2-py2.7.egg/click/core.py\", line 1060, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/Users/garnaat/projects/chalice/lib/python2.7/site-packages/click-6.2-py2.7.egg/click/core.py\", line 889, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/Users/garnaat/projects/chalice/lib/python2.7/site-packages/click-6.2-py2.7.egg/click/core.py\", line 534, in invoke\n    return callback(*args, **kwargs)\n  File \"/Users/garnaat/projects/chalice/lib/python2.7/site-packages/click-6.2-py2.7.egg/click/decorators.py\", line 17, in new_func\n    return f(get_current_context(), *args, **kwargs)\n  File \"/Users/garnaat/projects/chalice/chalice/chalice/cli/__init__.py\", line 134, in logs\n    show_lambda_logs(ctx.obj, num_entries)\n  File \"/Users/garnaat/projects/chalice/chalice/chalice/cli/__init__.py\", line 30, in show_lambda_logs\n    import boto3\nImportError: No module named boto3\n```\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/9/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/9/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/aws/chalice/issues/6", "repository_url": "https://api.github.com/repos/aws/chalice", "labels_url": "https://api.github.com/repos/aws/chalice/issues/6/labels{/name}", "comments_url": "https://api.github.com/repos/aws/chalice/issues/6/comments", "events_url": "https://api.github.com/repos/aws/chalice/issues/6/events", "html_url": "https://github.com/aws/chalice/issues/6", "id": 161802457, "node_id": "MDU6SXNzdWUxNjE4MDI0NTc=", "number": 6, "title": "chalice logs --num-entries doesn't work correctly", "user": {"login": "petermoon", "id": 5264605, "node_id": "MDQ6VXNlcjUyNjQ2MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5264605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petermoon", "html_url": "https://github.com/petermoon", "followers_url": "https://api.github.com/users/petermoon/followers", "following_url": "https://api.github.com/users/petermoon/following{/other_user}", "gists_url": "https://api.github.com/users/petermoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/petermoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petermoon/subscriptions", "organizations_url": "https://api.github.com/users/petermoon/orgs", "repos_url": "https://api.github.com/users/petermoon/repos", "events_url": "https://api.github.com/users/petermoon/events{/privacy}", "received_events_url": "https://api.github.com/users/petermoon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 383737475, "node_id": "MDU6TGFiZWwzODM3Mzc0NzU=", "url": "https://api.github.com/repos/aws/chalice/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-06-22T22:35:11Z", "updated_at": "2016-07-07T20:55:07Z", "closed_at": "2016-07-07T20:55:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "--num-entries doesn't work as expected. \"START RequestId: ...\" entries seem to ignore the flag for some reason and just show up.\n\n```\n$ chalice logs --num-entries 2\n2016-06-20 15:59:36.860000 START RequestId: a86ac872-373a-11e6-bf61-d590e72a4e49 Version: $LATEST\n2016-06-20 15:59:36.861000 END RequestId: a86ac872-373a-11e6-bf61-d590e72a4e49\n2016-06-16 18:19:26.903000 START RequestId: 880485d1-3429-11e6-8bd1-5768f1a34d32 Version: $LATEST\n2016-06-16 18:16:04.933000 START RequestId: 0fa1bc80-3429-11e6-89b5-e3700c93b565 Version: $LATEST\n2016-06-16 18:12:37.280000 START RequestId: 93dcdc1d-3428-11e6-a3bb-47f354fceb6b Version: $LATEST\n2016-06-16 17:56:00.222000 START RequestId: 41920974-3426-11e6-bc9c-db5f6f302eae Version: $LATEST\n2016-06-16 17:54:18.662000 START RequestId: 050a2092-3426-11e6-9cec-cb1d421769ae Version: $LATEST\n2016-06-16 17:47:08.940000 START RequestId: 04e799a7-3425-11e6-9fda-9f07bcaa2aa1 Version: $LATEST\n2016-06-16 17:45:13.471000 START RequestId: c0177ac6-3424-11e6-9231-e513acaba488 Version: $LATEST\n2016-06-16 17:11:56.440000 START RequestId: 19bf8b2b-3420-11e6-b5e1-4b20398ea566 Version: $LATEST\n2016-06-16 17:08:31.982000 START RequestId: 9fe675fd-341f-11e6-b19d-d767ade7c1c9 Version: $LATEST\n2016-06-16 17:08:01.404000 START RequestId: 8da4d8b5-341f-11e6-b436-fd8b48b1538a Version: $LATEST\n2016-06-16 17:04:44.678000 START RequestId: 1789b563-341f-11e6-8f6e-6f465a8fb0d2 Version: $LATEST\n2016-06-16 15:55:09.661000 START RequestId: 5f58ee84-3415-11e6-b1f3-1deb0eae2a01 Version: $LATEST\n```\n", "reactions": {"url": "https://api.github.com/repos/aws/chalice/issues/6/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/aws/chalice/issues/6/timeline", "performed_via_github_app": null, "state_reason": "completed"}]